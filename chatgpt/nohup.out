2023-07-22 12:37:38.451 | ERROR    | config:load_config:627 - [Errno 2] No such file or directory: 'config.cfg'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 10, in <module>
    from constants import config, botManager

  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/constants.py", line 6, in <module>
    config = Config.load_config()
             │      └ <staticmethod(<function Config.load_config at 0x7f3465901e40>)>
             └ <class 'config.Config'>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/config.py", line 621, in load_config
    with open("config.cfg", "rb") as f:

FileNotFoundError: [Errno 2] No such file or directory: 'config.cfg'
2023-07-22 12:37:38.458 | ERROR    | config:load_config:628 - 配置文件有误，请重新修改！
2023-07-22 13:26:44.667 | SUCCESS  | config:scan_presets:557 - 检查预设：聊天 <==> presets/issue402.txt [成功]
2023-07-22 13:26:44.668 | SUCCESS  | config:scan_presets:557 - 检查预设：猫娘 <==> presets/catgirl.txt [成功]
2023-07-22 13:26:44.668 | SUCCESS  | config:scan_presets:570 - 注册预设：novelist <==> ./presets/assistant/novelist.txt [成功]
2023-07-22 13:26:44.668 | SUCCESS  | config:scan_presets:570 - 注册预设：debater <==> ./presets/assistant/debater.txt [成功]
2023-07-22 13:26:44.668 | SUCCESS  | config:scan_presets:570 - 注册预设：dan <==> ./presets/assistant/dan.txt [成功]
2023-07-22 13:26:44.669 | SUCCESS  | config:scan_presets:570 - 注册预设：poet <==> ./presets/assistant/poet.txt [成功]
2023-07-22 13:26:44.669 | SUCCESS  | config:scan_presets:570 - 注册预设：shineisheji <==> ./presets/assistant/shineisheji.txt [成功]
2023-07-22 13:26:44.669 | SUCCESS  | config:scan_presets:570 - 注册预设：kp <==> ./presets/assistant/kp.txt [成功]
2023-07-22 13:26:44.669 | SUCCESS  | config:scan_presets:570 - 注册预设：bing <==> ./presets/assistant/bing.txt [成功]
2023-07-22 13:26:44.669 | SUCCESS  | config:scan_presets:570 - 注册预设：lawyer <==> ./presets/assistant/lawyer.txt [成功]
2023-07-22 13:26:44.670 | SUCCESS  | config:scan_presets:570 - 注册预设：long <==> ./presets/assistant/long.txt [成功]
2023-07-22 13:26:44.670 | SUCCESS  | config:scan_presets:570 - 注册预设：Lss233 <==> ./presets/assistant/Lss233.txt [成功]
2023-07-22 13:26:44.670 | SUCCESS  | config:scan_presets:570 - 注册预设：crazy <==> ./presets/role-play/crazy.txt [成功]
2023-07-22 13:26:44.670 | SUCCESS  | config:scan_presets:570 - 注册预设：TsundereCatgirl <==> ./presets/role-play/TsundereCatgirl.txt [成功]
2023-07-22 13:26:44.670 | SUCCESS  | config:scan_presets:570 - 注册预设：powanlang <==> ./presets/role-play/powanlang.txt [成功]
2023-07-22 13:26:44.670 | SUCCESS  | config:scan_presets:570 - 注册预设：huxijin <==> ./presets/role-play/huxijin.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：welldone <==> ./presets/role-play/welldone.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl <==> ./presets/role-play/catgirl.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：zhangweiwei <==> ./presets/role-play/zhangweiwei.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：MOSS <==> ./presets/role-play/MOSS.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：DJ <==> ./presets/role-play/DJ.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：hanli <==> ./presets/role-play/hanli.txt [成功]
2023-07-22 13:26:44.671 | SUCCESS  | config:scan_presets:570 - 注册预设：linruolan <==> ./presets/role-play/linruolan.txt [成功]
2023-07-22 13:26:44.672 | SUCCESS  | config:scan_presets:570 - 注册预设：cixiaogui <==> ./presets/role-play/cixiaogui.txt [成功]
2023-07-22 13:26:44.672 | SUCCESS  | config:scan_presets:570 - 注册预设：jiabaili <==> ./presets/role-play/jiabaili.txt [成功]
2023-07-22 13:26:44.672 | SUCCESS  | config:scan_presets:570 - 注册预设：ERNIE <==> ./presets/role-play/ERNIE.txt [成功]
2023-07-22 13:26:44.672 | SUCCESS  | config:scan_presets:570 - 注册预设：ikun <==> ./presets/role-play/ikun.txt [成功]
2023-07-22 13:26:44.672 | SUCCESS  | config:scan_presets:570 - 注册预设：yutao <==> ./presets/role-play/yutao.txt [成功]
2023-07-22 13:26:44.672 | SUCCESS  | config:scan_presets:570 - 注册预设：gaoqiqiang <==> ./presets/role-play/gaoqiqiang.txt [成功]
2023-07-22 13:26:44.673 | SUCCESS  | config:scan_presets:570 - 注册预设：dingzhen <==> ./presets/role-play/dingzhen.txt [成功]
2023-07-22 13:26:44.673 | SUCCESS  | config:scan_presets:570 - 注册预设：PG13succubus <==> ./presets/role-play/PG13succubus.txt [成功]
2023-07-22 13:26:44.673 | SUCCESS  | config:scan_presets:570 - 注册预设：debatestick <==> ./presets/role-play/debatestick.txt [成功]
2023-07-22 13:26:44.673 | ERROR    | config:scan_presets:567 - 注册预设：dan <==> ./presets/utils/dan.txt [失败：关键词已存在]
2023-07-22 13:26:44.673 | ERROR    | config:scan_presets:567 - 注册预设：catgirl <==> ./presets/catgirl.txt [失败：关键词已存在]
2023-07-22 13:26:44.673 | SUCCESS  | config:scan_presets:570 - 注册预设：预设模板 <==> ./presets/预设模板.txt [成功]
2023-07-22 13:26:44.673 | SUCCESS  | config:scan_presets:570 - 注册预设：issue402 <==> ./presets/issue402.txt [成功]
2023-07-22 13:26:44.674 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl_en <==> ./presets/catgirl_en.txt [成功]
2023-07-22 13:26:44.720 | INFO     | manager.bot:login:130 - 当前的 browserless_endpoint 为：https://chatgpt-proxy.lss233.com/api/
2023-07-22 13:26:44.720 | INFO     | manager.bot:login:146 - 当前的 api_endpoint 为：https://api.openai.com/v1
2023-07-22 13:26:44.721 | INFO     | manager.bot:login_openai:329 - 正在登录第 1 个 OpenAI 账号
2023-07-22 13:26:44.721 | INFO     | manager.bot:__login_V1:419 - 模式：无浏览器登录
2023-07-22 13:26:44.721 | INFO     | manager.bot:__login_V1:469 - 尝试使用 access_token 登录中...
2023-07-22 13:26:44.722 | ERROR    | manager.bot:login_openai:358 - 未知错误：
2023-07-22 13:26:44.722 | ERROR    | manager.bot:login_openai:359 - 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 17, in <module>
    loop.run_until_complete(botManager.login())
    │    │                  │          └ <function BotManager.login at 0x7f3f2d196660>
    │    │                  └ <manager.bot.BotManager object at 0x7f3f2d1cffd0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3f5d8c9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3f5d8c9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3f5d8cb920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3f5df88680>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f2d0b8280>()>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3f2d0b8280>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3f2d0b8280>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f2d0b8280>()>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 148, in login
    await self.login_openai()
          │    └ <function BotManager.login_openai at 0x7f3f2d1a4fe0>
          └ <manager.bot.BotManager object at 0x7f3f2d1cffd0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 335, in login_openai
    bot = await self.__login_V1(account)
                │               └ OpenAIAccessTokenAuth(mode='browserless', proxy=None, driver_exec_path=None, browser_exec_path=None, conversation=None, paid=...
                └ <manager.bot.BotManager object at 0x7f3f2d1cffd0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 471, in __login_V1
    bot = V1Chatbot(config=config)
          │                └ {'access_token': '这里填写你的 access_token（其他接入方式请看教程）'}
          └ <class 'revChatGPT.V1.AsyncChatbot'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/revChatGPT/V1.py", line 871, in __init__
    self.session = AsyncClient(headers=self.session.headers)
    │    │         │                   │    │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         │                   │    └ <requests.sessions.Session object at 0x7f3f2cd5f190>
    │    │         │                   └ <revChatGPT.V1.AsyncChatbot object at 0x7f3f2d0071d0>
    │    │         └ <class 'httpx.AsyncClient'>
    │    └ <requests.sessions.Session object at 0x7f3f2cd5f190>
    └ <revChatGPT.V1.AsyncChatbot object at 0x7f3f2d0071d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1371, in __init__
    super().__init__(
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 182, in __init__
    self.headers = Headers(headers)
    │    │         │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         └ <class 'httpx.Headers'>
    │    └ <property object at 0x7f3f5c0d3150>
    └ <httpx.AsyncClient object at 0x7f3f2cd5f710>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 71, in __init__
    self._list = [
    └ <unprintable Headers object>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 75, in <listcomp>
    normalize_header_value(v, encoding),
    │                      │  └ None
    │                      └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'
    └ <function normalize_header_value at 0x7f3f5c3fe3e0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_utils.py", line 53, in normalize_header_value
    return value.encode(encoding or "ascii")
           │     │      └ None
           │     └ <method 'encode' of 'str' objects>
           └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'

UnicodeEncodeError: 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
2023-07-22 13:26:44.735 | SUCCESS  | manager.bot:login_openai:362 - 成功登录 0/1 个 OpenAI 账号！
2023-07-22 13:26:44.735 | INFO     | manager.bot:login_chatglm:315 - 正在解析第 1 个 ChatGLM 账号
2023-07-22 13:26:44.735 | SUCCESS  | manager.bot:login_chatglm:318 - 解析成功！
2023-07-22 13:26:44.735 | SUCCESS  | manager.bot:login_chatglm:324 - 成功解析 1/1 个 ChatGLM 账号！
2023-07-22 13:26:44.736 | INFO     | manager.bot:login:160 - AI 类型：chatgpt-web - 可用账号： 0 个
2023-07-22 13:26:44.736 | INFO     | manager.bot:login:160 - AI 类型：openai-api - 可用账号： 0 个
2023-07-22 13:26:44.736 | INFO     | manager.bot:login:160 - AI 类型：poe-web - 可用账号： 0 个
2023-07-22 13:26:44.736 | INFO     | manager.bot:login:160 - AI 类型：bing-cookie - 可用账号： 0 个
2023-07-22 13:26:44.736 | INFO     | manager.bot:login:160 - AI 类型：bard-cookie - 可用账号： 0 个
2023-07-22 13:26:44.736 | INFO     | manager.bot:login:160 - AI 类型：yiyan-cookie - 可用账号： 0 个
2023-07-22 13:26:44.737 | INFO     | manager.bot:login:160 - AI 类型：xinghuo-cookie - 可用账号： 0 个
2023-07-22 13:26:44.737 | INFO     | manager.bot:login:160 - AI 类型：chatglm-api - 可用账号： 1 个
2023-07-22 13:26:44.737 | INFO     | manager.bot:login:160 - AI 类型：slack-accesstoken - 可用账号： 0 个
2023-07-22 13:26:44.737 | INFO     | __main__:<module>:27 - 检测到 Onebot 配置，将启动 Onebot 模式……
2023-07-22 13:26:45.292 | ERROR    | utils.text_to_img:<module>:56 - 未检测到 wkhtmltoimage，无法进行 Markdown 渲染！
2023-07-22 13:26:45.306 | INFO     | __main__:<module>:47 - [Edge TTS] 读取 Edge TTS 可用音色列表……
2023-07-22 13:26:45.363 | SUCCESS  | platforms.onebot_bot:startup:349 - 启动完毕，接收消息中……
INFO:quart.serving:Running on http://0.0.0.0:8566 (CTRL + C to quit)
[2023-07-22 13:26:45,364] Running on http://0.0.0.0:8566 (CTRL + C to quit)
2023-07-22 13:26:46.441 | INFO     | __main__:<module>:49 - [Edge TTS] 读取成功！
[2023-07-22 13:27:15,653] 192.168.31.31:43130 GET /ws 1.1 101 - 1134
INFO:quart.serving:192.168.31.31:43130 GET /ws 1.1 101 - 1134
2023-07-22 13:28:31.665 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你好！
2023-07-22 13:28:31.771 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 13:28:31.772 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 13:28:31.772 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:28:35.246 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 13:28:35.246 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：你好呀！有什么我可以帮忙的吗？和我聊天，聊聊你最近在忙些什么吧！
2023-07-22 13:28:35.304 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:29:13.573 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：我最近在忙着安装以前的老操作系统来完成一些实验。你听说过windows xp吗？
2023-07-22 13:29:13.574 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 13:29:13.574 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 13:29:13.575 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:29:21.973 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 13:29:21.974 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：当然听说过了！Windows XP是一个非常经典的操作系统呢。尽管它已经有一些年头了，但我还是觉得它很特别。我的电脑上就装着Windows XP哦！你是因为什么而安装它呢？是有什么特殊的实验需要吗？如果有需要帮助的地方，我可以尽力帮你哦！
2023-07-22 13:29:22.031 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:30:20.508 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：我想要尝试一些在windows 10上无法运行的老游戏在windows xp上能否运行。你为什么也还在用windows  xp呢？
2023-07-22 13:30:20.509 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 13:30:20.509 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 13:30:20.510 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:30:47.528 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 13:30:47.529 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：哇，尝试在Windows XP上运行一些老游戏听起来很有趣呢！Windows XP的兼容性确实比较好，可以支持一些旧版本的游戏。 

至于为什么我还在使用Windows XP呢，这是因为我喜欢它的简洁和稳定性。虽然它已经不再是最新的操作系统，但对于一些我平时使用的软件和应用来说，它仍然十分适合。当然，我也在考虑升级到更新的操作系统，但暂时还没找到合适的理由呢。

现在回到你的问题上，如果你在Windows 10上无法运行的游戏，尝试在Windows XP上运行是一个不错的尝试。希望你能成功地重新体验这些经典游戏！如果需要任何帮助或者有其他问题，记得随时告诉我哦！
2023-07-22 13:30:47.976 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:33:44.263 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你玩过StarCraft吗
2023-07-22 13:33:44.264 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 13:33:44.264 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 13:33:44.265 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 13:33:59.011 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 13:33:59.011 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：是的，我玩过StarCraft！它是一款非常经典的即时战略游戏。我喜欢它丰富的故事情节、策略性的游戏玩法以及多样化的单位和种族选择。特别是星际人族的剧情我觉得很有趣，喜欢看他们与异星种族之间的纷争和发展。你也是StarCraft的粉丝吗？喜欢玩哪个种族呢？
2023-07-22 13:33:59.102 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
Traceback (most recent call last):
  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 5, in <module>
    import creart
ModuleNotFoundError: No module named 'creart'
2023-07-22 15:29:10.763 | SUCCESS  | config:scan_presets:557 - 检查预设：聊天 <==> presets/issue402.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:557 - 检查预设：猫娘 <==> presets/catgirl.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：kp <==> ./presets/assistant/kp.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：bing <==> ./presets/assistant/bing.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：novelist <==> ./presets/assistant/novelist.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：lawyer <==> ./presets/assistant/lawyer.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：long <==> ./presets/assistant/long.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：shineisheji <==> ./presets/assistant/shineisheji.txt [成功]
2023-07-22 15:29:10.764 | SUCCESS  | config:scan_presets:570 - 注册预设：Lss233 <==> ./presets/assistant/Lss233.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：poet <==> ./presets/assistant/poet.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：debater <==> ./presets/assistant/debater.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：dan <==> ./presets/assistant/dan.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：MOSS <==> ./presets/role-play/MOSS.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl <==> ./presets/role-play/catgirl.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：zhangweiwei <==> ./presets/role-play/zhangweiwei.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：PG13succubus <==> ./presets/role-play/PG13succubus.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：DJ <==> ./presets/role-play/DJ.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：yutao <==> ./presets/role-play/yutao.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：gaoqiqiang <==> ./presets/role-play/gaoqiqiang.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：dingzhen <==> ./presets/role-play/dingzhen.txt [成功]
2023-07-22 15:29:10.765 | SUCCESS  | config:scan_presets:570 - 注册预设：ikun <==> ./presets/role-play/ikun.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：debatestick <==> ./presets/role-play/debatestick.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：jiabaili <==> ./presets/role-play/jiabaili.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：cixiaogui <==> ./presets/role-play/cixiaogui.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：TsundereCatgirl <==> ./presets/role-play/TsundereCatgirl.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：welldone <==> ./presets/role-play/welldone.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：crazy <==> ./presets/role-play/crazy.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：ERNIE <==> ./presets/role-play/ERNIE.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：hanli <==> ./presets/role-play/hanli.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：linruolan <==> ./presets/role-play/linruolan.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：huxijin <==> ./presets/role-play/huxijin.txt [成功]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：powanlang <==> ./presets/role-play/powanlang.txt [成功]
2023-07-22 15:29:10.766 | ERROR    | config:scan_presets:567 - 注册预设：dan <==> ./presets/utils/dan.txt [失败：关键词已存在]
2023-07-22 15:29:10.766 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl_en <==> ./presets/catgirl_en.txt [成功]
2023-07-22 15:29:10.767 | ERROR    | config:scan_presets:567 - 注册预设：catgirl <==> ./presets/catgirl.txt [失败：关键词已存在]
2023-07-22 15:29:10.767 | SUCCESS  | config:scan_presets:570 - 注册预设：预设模板 <==> ./presets/预设模板.txt [成功]
2023-07-22 15:29:10.767 | SUCCESS  | config:scan_presets:570 - 注册预设：issue402 <==> ./presets/issue402.txt [成功]
2023-07-22 15:29:10.925 | INFO     | manager.bot:login:130 - 当前的 browserless_endpoint 为：https://chatgpt-proxy.lss233.com/api/
2023-07-22 15:29:10.926 | INFO     | manager.bot:login:146 - 当前的 api_endpoint 为：https://api.openai.com/v1
2023-07-22 15:29:10.926 | INFO     | manager.bot:login_openai:329 - 正在登录第 1 个 OpenAI 账号
2023-07-22 15:29:10.926 | INFO     | manager.bot:__login_V1:419 - 模式：无浏览器登录
2023-07-22 15:29:10.926 | INFO     | manager.bot:__login_V1:469 - 尝试使用 access_token 登录中...
2023-07-22 15:29:10.927 | ERROR    | manager.bot:login_openai:358 - 未知错误：
2023-07-22 15:29:10.927 | ERROR    | manager.bot:login_openai:359 - 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 17, in <module>
    loop.run_until_complete(botManager.login())
    │    │                  │          └ <function BotManager.login at 0x7f8d9c3d65c0>
    │    │                  └ <manager.bot.BotManager object at 0x7f8da0e7c590>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8da2261bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8da2261b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8da2263920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8da2928680>
    └ <Handle <TaskStepMethWrapper object at 0x7f8d9c2fc310>()>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8d9c2fc310>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8d9c2fc310>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8d9c2fc310>()>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 148, in login
    await self.login_openai()
          │    └ <function BotManager.login_openai at 0x7f8d9c3e4f40>
          └ <manager.bot.BotManager object at 0x7f8da0e7c590>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 335, in login_openai
    bot = await self.__login_V1(account)
                │               └ OpenAIAccessTokenAuth(mode='browserless', proxy=None, driver_exec_path=None, browser_exec_path=None, conversation=None, paid=...
                └ <manager.bot.BotManager object at 0x7f8da0e7c590>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 471, in __login_V1
    bot = V1Chatbot(config=config)
          │                └ {'access_token': '这里填写你的 access_token（其他接入方式请看教程）'}
          └ <class 'revChatGPT.V1.AsyncChatbot'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/revChatGPT/V1.py", line 871, in __init__
    self.session = AsyncClient(headers=self.session.headers)
    │    │         │                   │    │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         │                   │    └ <requests.sessions.Session object at 0x7f8d9c153b90>
    │    │         │                   └ <revChatGPT.V1.AsyncChatbot object at 0x7f8d9c153b10>
    │    │         └ <class 'httpx.AsyncClient'>
    │    └ <requests.sessions.Session object at 0x7f8d9c153b90>
    └ <revChatGPT.V1.AsyncChatbot object at 0x7f8d9c153b10>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1371, in __init__
    super().__init__(
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 182, in __init__
    self.headers = Headers(headers)
    │    │         │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         └ <class 'httpx.Headers'>
    │    └ <property object at 0x7f8da0a671a0>
    └ <httpx.AsyncClient object at 0x7f8d9c153cd0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 71, in __init__
    self._list = [
    └ <unprintable Headers object>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 75, in <listcomp>
    normalize_header_value(v, encoding),
    │                      │  └ None
    │                      └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'
    └ <function normalize_header_value at 0x7f8da0d56340>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_utils.py", line 53, in normalize_header_value
    return value.encode(encoding or "ascii")
           │     │      └ None
           │     └ <method 'encode' of 'str' objects>
           └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'

UnicodeEncodeError: 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
2023-07-22 15:29:10.934 | SUCCESS  | manager.bot:login_openai:362 - 成功登录 0/1 个 OpenAI 账号！
2023-07-22 15:29:10.935 | INFO     | manager.bot:login_chatglm:315 - 正在解析第 1 个 ChatGLM 账号
2023-07-22 15:29:10.935 | SUCCESS  | manager.bot:login_chatglm:318 - 解析成功！
2023-07-22 15:29:10.935 | SUCCESS  | manager.bot:login_chatglm:324 - 成功解析 1/1 个 ChatGLM 账号！
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：chatgpt-web - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：openai-api - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：poe-web - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：bing-cookie - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：bard-cookie - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：yiyan-cookie - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：xinghuo-cookie - 可用账号： 0 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：chatglm-api - 可用账号： 1 个
2023-07-22 15:29:10.935 | INFO     | manager.bot:login:160 - AI 类型：slack-accesstoken - 可用账号： 0 个
2023-07-22 15:29:10.936 | INFO     | __main__:<module>:27 - 检测到 Onebot 配置，将启动 Onebot 模式……
2023-07-22 15:29:11.461 | ERROR    | utils.text_to_img:<module>:56 - 未检测到 wkhtmltoimage，无法进行 Markdown 渲染！
2023-07-22 15:29:11.480 | INFO     | __main__:<module>:47 - [Edge TTS] 读取 Edge TTS 可用音色列表……
2023-07-22 15:29:11.513 | SUCCESS  | platforms.onebot_bot:startup:349 - 启动完毕，接收消息中……
INFO:quart.serving:Running on http://0.0.0.0:8566 (CTRL + C to quit)
[2023-07-22 15:29:11,513] Running on http://0.0.0.0:8566 (CTRL + C to quit)
INFO:quart.serving:192.168.31.117:40852 GET /ws 1.1 101 - 2649
[2023-07-22 15:29:12,178] 192.168.31.117:40852 GET /ws 1.1 101 - 2649
2023-07-22 15:29:13.078 | INFO     | __main__:<module>:49 - [Edge TTS] 读取成功！
[2023-07-22 15:29:45,685] 192.168.31.117:38454 GET /ws 1.1 101 - 2713
INFO:quart.serving:192.168.31.117:38454 GET /ws 1.1 101 - 2713
2023-07-22 15:30:50.323 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：#echo
2023-07-22 15:30:50.373 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 15:30:50.373 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 15:30:50.390 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 15:30:50.407 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 15:30:50.408 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：粉毛摸鱼中，勿cue
2023-07-22 15:30:50.433 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 15:44:56.161 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=5e579c7ed305403ebb40521ba4f751d5.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2646169046-5E579C7ED305403EBB40521BA4F751D5/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:46:12.122 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=5e579c7ed305403ebb40521ba4f751d5.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2345481868-5E579C7ED305403EBB40521BA4F751D5/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:46:17.873 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：【1000半兽人VS1000恐龙【红警】】 https://www.bilibili.com/video/BV1kN411D71Y/?share_source=copy_web&amp;vd_source=9ea55949662ff17e131ef9f460f9f3ea（原因：不符合触发前缀）
2023-07-22 15:47:18.082 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=558cd81c68f3b4a08d122a168d4f116e.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2395407224-558CD81C68F3B4A08D122A168D4F116E/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:47:26.420 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=e6f129f845cbd3303b3f2fa935a94617.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2923705116-E6F129F845CBD3303B3F2FA935A94617/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:51:28.056 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：https://www.bilibili.com/video/BV1RD4y1q7uX/?spm_id_from=autoNext&amp;vd_source=1136df84d0a84bf39412c679d0dcc371（原因：不符合触发前缀）
2023-07-22 15:52:05.577 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=497485f7b9856c9d6de85afe2f259375.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2689339360-497485F7B9856C9D6DE85AFE2F259375/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-22 15:52:24.750 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=69d3dc899fe492d0e996b0487955c412.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3005825352-69D3DC899FE492D0E996B0487955C412/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:55:19.518 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2dfa3b0cf847f0681b1c24c9773638c2.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2559696980-2DFA3B0CF847F0681B1C24C9773638C2/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:55:26.885 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:reply,id=952343571][CQ:at,qq=2091450207] 这个是bml 啦（原因：不符合触发前缀）
2023-07-22 15:55:29.556 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=4a466846c1faa0d472d6ffc4b0806b2c.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/592818415/3812763301-2567718112-4A466846C1FAA0D472D6FFC4B0806B2C/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:56:00.672 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=4a466846c1faa0d472d6ffc4b0806b2c.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2336598214-4A466846C1FAA0D472D6FFC4B0806B2C/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:56:13.027 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=d931ba0477044144f9b864572f75986e.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-3203787920-D931BA0477044144F9B864572F75986E/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 15:57:10.296 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：嘿嘿（原因：不符合触发前缀）
2023-07-22 15:58:16.125 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：嘿嘿（原因：不符合触发前缀）
2023-07-22 15:58:19.647 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：嘿嘿（原因：不符合触发前缀）
2023-07-22 16:00:46.180 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=ecb6e0091983d678b25d38a5edb00a97.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2275925928-ECB6E0091983D678B25D38A5EDB00A97/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 16:09:15.111 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=c75ce56ea73070077333cda058216347.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2985687716-C75CE56EA73070077333CDA058216347/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 16:28:46.999 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2c5760828204f0a2c76db3bb4a942ee5.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2763735290-2C5760828204F0A2C76DB3BB4A942EE5/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 16:32:14.360 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] #echo
2023-07-22 16:32:14.423 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 16:32:14.423 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 16:32:14.444 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 16:32:14.459 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 16:32:14.460 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：粉毛摸鱼中，勿cue
2023-07-22 16:32:14.811 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 16:33:41.432 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：【【全明星Rap】如何让吴克爱上装逼】 https://www.bilibili.com/video/BV1Ds41197cT/?share_source=copy_web&amp;vd_source=9ea55949662ff17e131ef9f460f9f3ea（原因：不符合触发前缀）
2023-07-22 16:46:41.561 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=936d8add215de0aae3cfdb543da2e680.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3214382500-936D8ADD215DE0AAE3CFDB543DA2E680/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 16:48:03.292 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：【【三语字幕】小泉萌香：怎么速成一门外语，挺急的，在线等】 https://www.bilibili.com/video/BV1yf4y1E7en/?share_source=copy_web&amp;vd_source=9ea55949662ff17e131ef9f460f9f3ea（原因：不符合触发前缀）
2023-07-22 16:48:42.030 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=7fa354db6a3e389b42c1d4d78bdffc94.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2544918202-7FA354DB6A3E389B42C1D4D78BDFFC94/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 16:51:34.507 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：喵！
2023-07-22 16:51:34.508 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 16:51:34.509 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 16:51:34.560 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 16:51:35.948 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7f8da2258d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8da2261bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8da2261b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8da2263920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8da2928680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7f8d5b0ae3e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d59379e40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d5937a160>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7f8d5b0ae520>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7f8d5b09ad90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │      │           │       └ None
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d5937a160>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d59379a80>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7f8d5b0ad760>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7f8d5b09ae10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │      │           │       └ None
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d59379a80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d59379c60>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7f8d5b0ad6c0>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7f8d5b09add0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │      │           │       └ None
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f8d59379c60>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7f8d59379d00>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f8d593799e0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7f8d5b0ae5c0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7f8d5b3bd110>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-1221' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...
          │       └ <function wait_for at 0x7f8da22587c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-1221' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7f8d5b3a30f0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '喵！', 'chain': MessageChain([Plain(text='喵！')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7f8d5b0ab790>,)
                        └ <function ConversationContext.ask at 0x7f8d5b0acf40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function MixedContentMessageChainRenderer.render at 0x7f8d5b07f7e0>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f8d5b0e3890>
                └ <conversation.ConversationContext object at 0x7f8d5b0ab790>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 120, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7f8d5b311b20>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7f8d5b0e3050>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f8d5b0e3890>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7f8d5b07f740>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f8d5b0e3890>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7f8d5b07fba0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f8d5b0e2b90>
                     └ <renderer.merger.BufferedContentMerger object at 0x7f8d5b0e3050>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f8d5b0e2b90>
    │    │                 └ None
    │    └ '粉毛摸鱼中，勿cue'
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f8d5b0e2b90>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-22 16:51:35.971 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-22 16:52:04.566 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-22 16:52:04.569 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-22 16:52:04.570 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-22 16:58:12.577 | SUCCESS  | config:scan_presets:557 - 检查预设：聊天 <==> presets/issue402.txt [成功]
2023-07-22 16:58:12.577 | SUCCESS  | config:scan_presets:557 - 检查预设：猫娘 <==> presets/catgirl.txt [成功]
2023-07-22 16:58:12.577 | SUCCESS  | config:scan_presets:570 - 注册预设：kp <==> ./presets/assistant/kp.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：bing <==> ./presets/assistant/bing.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：novelist <==> ./presets/assistant/novelist.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：lawyer <==> ./presets/assistant/lawyer.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：long <==> ./presets/assistant/long.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：shineisheji <==> ./presets/assistant/shineisheji.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：Lss233 <==> ./presets/assistant/Lss233.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：poet <==> ./presets/assistant/poet.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：debater <==> ./presets/assistant/debater.txt [成功]
2023-07-22 16:58:12.578 | SUCCESS  | config:scan_presets:570 - 注册预设：dan <==> ./presets/assistant/dan.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：MOSS <==> ./presets/role-play/MOSS.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl <==> ./presets/role-play/catgirl.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：zhangweiwei <==> ./presets/role-play/zhangweiwei.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：PG13succubus <==> ./presets/role-play/PG13succubus.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：DJ <==> ./presets/role-play/DJ.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：yutao <==> ./presets/role-play/yutao.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：gaoqiqiang <==> ./presets/role-play/gaoqiqiang.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：dingzhen <==> ./presets/role-play/dingzhen.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：ikun <==> ./presets/role-play/ikun.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：debatestick <==> ./presets/role-play/debatestick.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：jiabaili <==> ./presets/role-play/jiabaili.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：cixiaogui <==> ./presets/role-play/cixiaogui.txt [成功]
2023-07-22 16:58:12.579 | SUCCESS  | config:scan_presets:570 - 注册预设：TsundereCatgirl <==> ./presets/role-play/TsundereCatgirl.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：welldone <==> ./presets/role-play/welldone.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：crazy <==> ./presets/role-play/crazy.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：ERNIE <==> ./presets/role-play/ERNIE.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：hanli <==> ./presets/role-play/hanli.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：linruolan <==> ./presets/role-play/linruolan.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：huxijin <==> ./presets/role-play/huxijin.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：powanlang <==> ./presets/role-play/powanlang.txt [成功]
2023-07-22 16:58:12.580 | ERROR    | config:scan_presets:567 - 注册预设：dan <==> ./presets/utils/dan.txt [失败：关键词已存在]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl_en <==> ./presets/catgirl_en.txt [成功]
2023-07-22 16:58:12.580 | ERROR    | config:scan_presets:567 - 注册预设：catgirl <==> ./presets/catgirl.txt [失败：关键词已存在]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：预设模板 <==> ./presets/预设模板.txt [成功]
2023-07-22 16:58:12.580 | SUCCESS  | config:scan_presets:570 - 注册预设：issue402 <==> ./presets/issue402.txt [成功]
2023-07-22 16:58:12.613 | INFO     | manager.bot:login:130 - 当前的 browserless_endpoint 为：https://chatgpt-proxy.lss233.com/api/
2023-07-22 16:58:12.613 | INFO     | manager.bot:login:146 - 当前的 api_endpoint 为：https://api.openai.com/v1
2023-07-22 16:58:12.613 | INFO     | manager.bot:login_openai:329 - 正在登录第 1 个 OpenAI 账号
2023-07-22 16:58:12.614 | INFO     | manager.bot:__login_V1:419 - 模式：无浏览器登录
2023-07-22 16:58:12.614 | INFO     | manager.bot:__login_V1:469 - 尝试使用 access_token 登录中...
2023-07-22 16:58:12.614 | ERROR    | manager.bot:login_openai:358 - 未知错误：
2023-07-22 16:58:12.614 | ERROR    | manager.bot:login_openai:359 - 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 17, in <module>
    loop.run_until_complete(botManager.login())
    │    │                  │          └ <function BotManager.login at 0x7f9cd958a660>
    │    │                  └ <manager.bot.BotManager object at 0x7f9d08452c50>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9d09d0dbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9d09d0db20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9d09d0f920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9d0a3d4680>
    └ <Handle <TaskStepMethWrapper object at 0x7f9cd94b0280>()>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9cd94b0280>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9cd94b0280>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9cd94b0280>()>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 148, in login
    await self.login_openai()
          │    └ <function BotManager.login_openai at 0x7f9cd9598fe0>
          └ <manager.bot.BotManager object at 0x7f9d08452c50>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 335, in login_openai
    bot = await self.__login_V1(account)
                │               └ OpenAIAccessTokenAuth(mode='browserless', proxy=None, driver_exec_path=None, browser_exec_path=None, conversation=None, paid=...
                └ <manager.bot.BotManager object at 0x7f9d08452c50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 471, in __login_V1
    bot = V1Chatbot(config=config)
          │                └ {'access_token': '这里填写你的 access_token（其他接入方式请看教程）'}
          └ <class 'revChatGPT.V1.AsyncChatbot'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/revChatGPT/V1.py", line 871, in __init__
    self.session = AsyncClient(headers=self.session.headers)
    │    │         │                   │    │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         │                   │    └ <requests.sessions.Session object at 0x7f9cd9177190>
    │    │         │                   └ <revChatGPT.V1.AsyncChatbot object at 0x7f9cd9177090>
    │    │         └ <class 'httpx.AsyncClient'>
    │    └ <requests.sessions.Session object at 0x7f9cd9177190>
    └ <revChatGPT.V1.AsyncChatbot object at 0x7f9cd9177090>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1371, in __init__
    super().__init__(
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 182, in __init__
    self.headers = Headers(headers)
    │    │         │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         └ <class 'httpx.Headers'>
    │    └ <property object at 0x7f9d0850b060>
    └ <httpx.AsyncClient object at 0x7f9cd9176a50>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 71, in __init__
    self._list = [
    └ <unprintable Headers object>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 75, in <listcomp>
    normalize_header_value(v, encoding),
    │                      │  └ None
    │                      └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'
    └ <function normalize_header_value at 0x7f9d088363e0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_utils.py", line 53, in normalize_header_value
    return value.encode(encoding or "ascii")
           │     │      └ None
           │     └ <method 'encode' of 'str' objects>
           └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'

UnicodeEncodeError: 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
2023-07-22 16:58:12.622 | SUCCESS  | manager.bot:login_openai:362 - 成功登录 0/1 个 OpenAI 账号！
2023-07-22 16:58:12.622 | INFO     | manager.bot:login_chatglm:315 - 正在解析第 1 个 ChatGLM 账号
2023-07-22 16:58:12.622 | SUCCESS  | manager.bot:login_chatglm:318 - 解析成功！
2023-07-22 16:58:12.622 | SUCCESS  | manager.bot:login_chatglm:324 - 成功解析 1/1 个 ChatGLM 账号！
2023-07-22 16:58:12.622 | INFO     | manager.bot:login:160 - AI 类型：chatgpt-web - 可用账号： 0 个
2023-07-22 16:58:12.622 | INFO     | manager.bot:login:160 - AI 类型：openai-api - 可用账号： 0 个
2023-07-22 16:58:12.622 | INFO     | manager.bot:login:160 - AI 类型：poe-web - 可用账号： 0 个
2023-07-22 16:58:12.623 | INFO     | manager.bot:login:160 - AI 类型：bing-cookie - 可用账号： 0 个
2023-07-22 16:58:12.623 | INFO     | manager.bot:login:160 - AI 类型：bard-cookie - 可用账号： 0 个
2023-07-22 16:58:12.623 | INFO     | manager.bot:login:160 - AI 类型：yiyan-cookie - 可用账号： 0 个
2023-07-22 16:58:12.623 | INFO     | manager.bot:login:160 - AI 类型：xinghuo-cookie - 可用账号： 0 个
2023-07-22 16:58:12.623 | INFO     | manager.bot:login:160 - AI 类型：chatglm-api - 可用账号： 1 个
2023-07-22 16:58:12.623 | INFO     | manager.bot:login:160 - AI 类型：slack-accesstoken - 可用账号： 0 个
2023-07-22 16:58:12.623 | INFO     | __main__:<module>:27 - 检测到 Onebot 配置，将启动 Onebot 模式……
2023-07-22 16:58:12.993 | ERROR    | utils.text_to_img:<module>:56 - 未检测到 wkhtmltoimage，无法进行 Markdown 渲染！
2023-07-22 16:58:13.001 | INFO     | __main__:<module>:47 - [Edge TTS] 读取 Edge TTS 可用音色列表……
2023-07-22 16:58:13.033 | SUCCESS  | platforms.onebot_bot:startup:349 - 启动完毕，接收消息中……
INFO:quart.serving:Running on http://0.0.0.0:8566 (CTRL + C to quit)
[2023-07-22 16:58:13,034] Running on http://0.0.0.0:8566 (CTRL + C to quit)
2023-07-22 16:58:13.768 | INFO     | __main__:<module>:49 - [Edge TTS] 读取成功！
[2023-07-22 16:58:15,809] 192.168.31.117:35244 GET /ws 1.1 101 - 1173
INFO:quart.serving:192.168.31.117:35244 GET /ws 1.1 101 - 1173
2023-07-22 16:58:15.815 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2fd52f0194e7c941d4eebf6fce46c9c6.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2345011888-2FD52F0194E7C941D4EEBF6FCE46C9C6/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-22 16:58:17.906 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2b29c9b8dd12a46a4f439dcbf6168875.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2501530706-2B29C9B8DD12A46A4F439DCBF6168875/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 16:59:35.870 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：喵！
2023-07-22 16:59:35.961 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 16:59:35.961 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 16:59:35.962 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 16:59:36.518 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7f9d09d04d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9d09d0dbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9d09d0db20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9d09d0f920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9d0a3d4680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7f9cc2a677e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac8b80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac8ae0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7f9cc2a89c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7f9cc2a91890>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │      │           │       └ None
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac8ae0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac8a40>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7f9cc2a88ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7f9cc2a91c10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │      │           │       └ None
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac8a40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac89a0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7f9cc2a89120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7f9cc2a91850>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │      │           │       └ None
          │      │           └ '喵！'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc2ac89a0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7f9cc2ac8860>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc2ac87c0>
          │ │              │           └ '喵！'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7f9cc2a89da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7f9cc2a91b90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-53' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgpt...
          │       └ <function wait_for at 0x7f9d09d047c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-53' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgpt...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7f9cc359e3e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '喵！', 'chain': MessageChain([Plain(text='喵！')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7f9cc2ac0110>,)
                        └ <function ConversationContext.ask at 0x7f9cc2a88720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function MixedContentMessageChainRenderer.render at 0x7f9cc2a67100>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f9cc2ac12d0>
                └ <conversation.ConversationContext object at 0x7f9cc2ac0110>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 120, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7f9cc2b296c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7f9cc2ac1790>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f9cc2ac12d0>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7f9cc2a67060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f9cc2ac12d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7f9cc2a672e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f9cc2ac0210>
                     └ <renderer.merger.BufferedContentMerger object at 0x7f9cc2ac1790>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f9cc2ac0210>
    │    │                 └ None
    │    └ ''
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f9cc2ac0210>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-22 16:59:36.535 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:00:05.964 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-22 17:00:05.969 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-22 17:00:05.970 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-22 17:00:23.530 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：#echo
2023-07-22 17:00:23.531 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:00:23.532 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:00:23.585 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:00:23.605 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 17:00:23.606 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：粉毛摸鱼中，勿cue
2023-07-22 17:00:23.636 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:01:08.562 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：新能源也限啊（原因：不符合触发前缀）
2023-07-22 17:01:25.764 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：喵
2023-07-22 17:01:25.765 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:01:25.765 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:01:25.766 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:01:26.280 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7f9d09d04d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9d09d0dbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9d09d0db20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9d09d0f920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9d0a3d4680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7f9cc2a677e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '喵'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc1563560>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc1563060>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │ │              │           └ '喵'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7f9cc2a89c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7f9cc2a91890>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │      │           │       └ None
          │      │           └ '喵'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc1563060>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc15632e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │ │              │           └ '喵'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7f9cc2a88ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7f9cc2a91c10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │      │           │       └ None
          │      │           └ '喵'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc15632e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc1563240>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │ │              │           └ '喵'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7f9cc2a89120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7f9cc2a91850>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │      │           │       └ None
          │      │           └ '喵'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7f9cc1563240>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7f9cc1563380>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7f9cc1563420>
          │ │              │           └ '喵'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7f9cc2a89da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7f9cc2a91b90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-107' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgp...
          │       └ <function wait_for at 0x7f9d09d047c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-107' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgp...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7f9cc32f9470>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '喵', 'chain': MessageChain([Plain(text='喵')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7f9cc2ac0110>,)
                        └ <function ConversationContext.ask at 0x7f9cc2a88720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function MixedContentMessageChainRenderer.render at 0x7f9cc2a67100>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f9cc2ac12d0>
                └ <conversation.ConversationContext object at 0x7f9cc2ac0110>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 120, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7f9cc2b296c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7f9cc2ac1790>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f9cc2ac12d0>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7f9cc2a67060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7f9cc2ac12d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7f9cc2a672e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f9cc2ac0210>
                     └ <renderer.merger.BufferedContentMerger object at 0x7f9cc2ac1790>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f9cc2ac0210>
    │    │                 └ None
    │    └ '粉毛摸鱼中，勿cue'
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7f9cc2ac0210>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:01:26.283 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:01:30.640 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=8279fa1f1a4eb6cfe5d6eb3daf751ac9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2869359400-8279FA1F1A4EB6CFE5D6EB3DAF751AC9/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-22 17:01:35.732 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：网易云没有（原因：不符合触发前缀）
2023-07-22 17:01:55.768 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-22 17:01:55.773 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-22 17:01:55.774 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-22 17:03:26.346 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=732c4fa07d5647dc769f4e2b80365ca4.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2219134974-732C4FA07D5647DC769F4E2B80365CA4/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-22 17:05:52.614 | SUCCESS  | config:scan_presets:557 - 检查预设：聊天 <==> presets/issue402.txt [成功]
2023-07-22 17:05:52.614 | SUCCESS  | config:scan_presets:557 - 检查预设：猫娘 <==> presets/catgirl.txt [成功]
2023-07-22 17:05:52.615 | SUCCESS  | config:scan_presets:570 - 注册预设：kp <==> ./presets/assistant/kp.txt [成功]
2023-07-22 17:05:52.615 | SUCCESS  | config:scan_presets:570 - 注册预设：bing <==> ./presets/assistant/bing.txt [成功]
2023-07-22 17:05:52.615 | SUCCESS  | config:scan_presets:570 - 注册预设：novelist <==> ./presets/assistant/novelist.txt [成功]
2023-07-22 17:05:52.615 | SUCCESS  | config:scan_presets:570 - 注册预设：lawyer <==> ./presets/assistant/lawyer.txt [成功]
2023-07-22 17:05:52.615 | SUCCESS  | config:scan_presets:570 - 注册预设：long <==> ./presets/assistant/long.txt [成功]
2023-07-22 17:05:52.615 | SUCCESS  | config:scan_presets:570 - 注册预设：shineisheji <==> ./presets/assistant/shineisheji.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：Lss233 <==> ./presets/assistant/Lss233.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：poet <==> ./presets/assistant/poet.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：debater <==> ./presets/assistant/debater.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：dan <==> ./presets/assistant/dan.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：MOSS <==> ./presets/role-play/MOSS.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl <==> ./presets/role-play/catgirl.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：zhangweiwei <==> ./presets/role-play/zhangweiwei.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：PG13succubus <==> ./presets/role-play/PG13succubus.txt [成功]
2023-07-22 17:05:52.616 | SUCCESS  | config:scan_presets:570 - 注册预设：DJ <==> ./presets/role-play/DJ.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：yutao <==> ./presets/role-play/yutao.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：gaoqiqiang <==> ./presets/role-play/gaoqiqiang.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：dingzhen <==> ./presets/role-play/dingzhen.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：ikun <==> ./presets/role-play/ikun.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：debatestick <==> ./presets/role-play/debatestick.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：jiabaili <==> ./presets/role-play/jiabaili.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：cixiaogui <==> ./presets/role-play/cixiaogui.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：TsundereCatgirl <==> ./presets/role-play/TsundereCatgirl.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：welldone <==> ./presets/role-play/welldone.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：crazy <==> ./presets/role-play/crazy.txt [成功]
2023-07-22 17:05:52.617 | SUCCESS  | config:scan_presets:570 - 注册预设：ERNIE <==> ./presets/role-play/ERNIE.txt [成功]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：hanli <==> ./presets/role-play/hanli.txt [成功]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：linruolan <==> ./presets/role-play/linruolan.txt [成功]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：huxijin <==> ./presets/role-play/huxijin.txt [成功]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：powanlang <==> ./presets/role-play/powanlang.txt [成功]
2023-07-22 17:05:52.618 | ERROR    | config:scan_presets:567 - 注册预设：dan <==> ./presets/utils/dan.txt [失败：关键词已存在]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl_en <==> ./presets/catgirl_en.txt [成功]
2023-07-22 17:05:52.618 | ERROR    | config:scan_presets:567 - 注册预设：catgirl <==> ./presets/catgirl.txt [失败：关键词已存在]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：预设模板 <==> ./presets/预设模板.txt [成功]
2023-07-22 17:05:52.618 | SUCCESS  | config:scan_presets:570 - 注册预设：issue402 <==> ./presets/issue402.txt [成功]
2023-07-22 17:05:52.651 | INFO     | manager.bot:login:130 - 当前的 browserless_endpoint 为：https://chatgpt-proxy.lss233.com/api/
2023-07-22 17:05:52.651 | INFO     | manager.bot:login:146 - 当前的 api_endpoint 为：https://api.openai.com/v1
2023-07-22 17:05:52.651 | INFO     | manager.bot:login_openai:329 - 正在登录第 1 个 OpenAI 账号
2023-07-22 17:05:52.651 | INFO     | manager.bot:__login_V1:419 - 模式：无浏览器登录
2023-07-22 17:05:52.651 | INFO     | manager.bot:__login_V1:469 - 尝试使用 access_token 登录中...
2023-07-22 17:05:52.652 | ERROR    | manager.bot:login_openai:358 - 未知错误：
2023-07-22 17:05:52.652 | ERROR    | manager.bot:login_openai:359 - 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 17, in <module>
    loop.run_until_complete(botManager.login())
    │    │                  │          └ <function BotManager.login at 0x7fb3b958a660>
    │    │                  └ <manager.bot.BotManager object at 0x7fb3e96a4690>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb3e9c55bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb3e9c55b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb3e9c57920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb3ea318680>
    └ <Handle <TaskStepMethWrapper object at 0x7fb3b94b4220>()>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb3b94b4220>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb3b94b4220>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb3b94b4220>()>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 148, in login
    await self.login_openai()
          │    └ <function BotManager.login_openai at 0x7fb3b9598fe0>
          └ <manager.bot.BotManager object at 0x7fb3e96a4690>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 335, in login_openai
    bot = await self.__login_V1(account)
                │               └ OpenAIAccessTokenAuth(mode='browserless', proxy=None, driver_exec_path=None, browser_exec_path=None, conversation=None, paid=...
                └ <manager.bot.BotManager object at 0x7fb3e96a4690>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 471, in __login_V1
    bot = V1Chatbot(config=config)
          │                └ {'access_token': '这里填写你的 access_token（其他接入方式请看教程）'}
          └ <class 'revChatGPT.V1.AsyncChatbot'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/revChatGPT/V1.py", line 871, in __init__
    self.session = AsyncClient(headers=self.session.headers)
    │    │         │                   │    │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         │                   │    └ <requests.sessions.Session object at 0x7fb3b95ef950>
    │    │         │                   └ <revChatGPT.V1.AsyncChatbot object at 0x7fb3b95f6ed0>
    │    │         └ <class 'httpx.AsyncClient'>
    │    └ <requests.sessions.Session object at 0x7fb3b95ef950>
    └ <revChatGPT.V1.AsyncChatbot object at 0x7fb3b95f6ed0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1371, in __init__
    super().__init__(
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 182, in __init__
    self.headers = Headers(headers)
    │    │         │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         └ <class 'httpx.Headers'>
    │    └ <property object at 0x7fb3e844f060>
    └ <httpx.AsyncClient object at 0x7fb3b910edd0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 71, in __init__
    self._list = [
    └ <unprintable Headers object>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 75, in <listcomp>
    normalize_header_value(v, encoding),
    │                      │  └ None
    │                      └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'
    └ <function normalize_header_value at 0x7fb3e877a3e0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_utils.py", line 53, in normalize_header_value
    return value.encode(encoding or "ascii")
           │     │      └ None
           │     └ <method 'encode' of 'str' objects>
           └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'

UnicodeEncodeError: 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
2023-07-22 17:05:52.660 | SUCCESS  | manager.bot:login_openai:362 - 成功登录 0/1 个 OpenAI 账号！
2023-07-22 17:05:52.661 | INFO     | manager.bot:login_chatglm:315 - 正在解析第 1 个 ChatGLM 账号
2023-07-22 17:05:52.661 | SUCCESS  | manager.bot:login_chatglm:318 - 解析成功！
2023-07-22 17:05:52.661 | SUCCESS  | manager.bot:login_chatglm:324 - 成功解析 1/1 个 ChatGLM 账号！
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：chatgpt-web - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：openai-api - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：poe-web - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：bing-cookie - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：bard-cookie - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：yiyan-cookie - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：xinghuo-cookie - 可用账号： 0 个
2023-07-22 17:05:52.661 | INFO     | manager.bot:login:160 - AI 类型：chatglm-api - 可用账号： 1 个
2023-07-22 17:05:52.662 | INFO     | manager.bot:login:160 - AI 类型：slack-accesstoken - 可用账号： 0 个
2023-07-22 17:05:52.662 | INFO     | __main__:<module>:27 - 检测到 Onebot 配置，将启动 Onebot 模式……
2023-07-22 17:05:52.994 | ERROR    | utils.text_to_img:<module>:56 - 未检测到 wkhtmltoimage，无法进行 Markdown 渲染！
2023-07-22 17:05:53.002 | INFO     | __main__:<module>:47 - [Edge TTS] 读取 Edge TTS 可用音色列表……
2023-07-22 17:05:53.034 | SUCCESS  | platforms.onebot_bot:startup:349 - 启动完毕，接收消息中……
INFO:quart.serving:Running on http://0.0.0.0:8566 (CTRL + C to quit)
[2023-07-22 17:05:53,035] Running on http://0.0.0.0:8566 (CTRL + C to quit)
INFO:quart.serving:192.168.31.117:48172 GET /ws 1.1 101 - 2663
[2023-07-22 17:05:53,746] 192.168.31.117:48172 GET /ws 1.1 101 - 2663
2023-07-22 17:05:53.754 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-22 17:05:53.798 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:05:53.798 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:05:53.799 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=1eb850e94d12b98177673c8c1b4b0232.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3088635336-1EB850E94D12B98177673C8C1B4B0232/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 17:05:53.799 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:05:53.864 | INFO     | __main__:<module>:49 - [Edge TTS] 读取成功！
2023-07-22 17:05:54.342 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fb3e9c48d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb3e9c55bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb3e9c55b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb3e9c57920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb3ea318680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fb3a2a637e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4cc0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4180>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fb3a2a8dc60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fb3a2a95110>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4180>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4c20>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fb3a2a8cea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fb3a2a95490>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4c20>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4b80>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fb3a2a8d120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fb3a2a950d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a2ac4b80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fb3a2ac4ae0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a2ac4a40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fb3a2a8dda0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fb3a2a95410>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-23' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgpt...
          │       └ <function wait_for at 0x7fb3e9c487c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-23' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgpt...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fb3a349a3e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '1', 'chain': MessageChain([Plain(text='1')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fb3a2a79550>,)
                        └ <function ConversationContext.ask at 0x7fb3a2a8c720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function MixedContentMessageChainRenderer.render at 0x7fb3a2a63100>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fb3a2ad3690>
                └ <conversation.ConversationContext object at 0x7fb3a2a79550>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 120, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fb3a2b256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fb3a2ad2f90>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fb3a2ad3690>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7fb3a2a63060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fb3a2ad3690>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fb3a2a632e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fb3a2ad2fd0>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fb3a2ad2f90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fb3a2ad2fd0>
    │    │                 └ None
    │    └ ''
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fb3a2ad2fd0>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:05:54.358 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:06:13.239 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=569c8dce7bf6a9007df2d9cc86716cbc.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2938159972-569C8DCE7BF6A9007DF2D9CC86716CBC/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 17:06:23.804 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-22 17:06:23.806 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-22 17:06:23.807 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-22 17:08:23.446 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-22 17:08:23.447 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:08:23.448 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:08:23.449 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:08:24.097 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fb3e9c48d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb3e9c55bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb3e9c55b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb3e9c57920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb3ea318680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fb3a2a637e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf4c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf420>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fb3a2a8dc60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fb3a2a95110>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf420>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf2e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fb3a2a8cea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fb3a2a95490>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf2e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf380>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fb3a2a8d120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fb3a2a950d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fb3a0ccf380>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fb3a0ccf1a0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fb3a0ccf240>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fb3a2a8dda0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fb3a2a95410>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-79' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgpt...
          │       └ <function wait_for at 0x7fb3e9c487c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-79' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatgpt...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fb3a31f5470>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '1', 'chain': MessageChain([Plain(text='1')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fb3a2a79550>,)
                        └ <function ConversationContext.ask at 0x7fb3a2a8c720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function MixedContentMessageChainRenderer.render at 0x7fb3a2a63100>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fb3a2ad3690>
                └ <conversation.ConversationContext object at 0x7fb3a2a79550>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 120, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fb3a2b256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fb3a2ad2f90>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fb3a2ad3690>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7fb3a2a63060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fb3a2ad3690>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fb3a2a632e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fb3a2ad2fd0>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fb3a2ad2f90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fb3a2ad2fd0>
    │    │                 └ None
    │    └ ''
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fb3a2ad2fd0>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:08:24.110 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-22 17:08:53.455 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-22 17:08:53.460 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-22 17:08:53.462 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-22 17:11:04.099 | SUCCESS  | config:scan_presets:557 - 检查预设：聊天 <==> presets/issue402.txt [成功]
2023-07-22 17:11:04.099 | SUCCESS  | config:scan_presets:557 - 检查预设：猫娘 <==> presets/catgirl.txt [成功]
2023-07-22 17:11:04.099 | SUCCESS  | config:scan_presets:570 - 注册预设：kp <==> ./presets/assistant/kp.txt [成功]
2023-07-22 17:11:04.099 | SUCCESS  | config:scan_presets:570 - 注册预设：bing <==> ./presets/assistant/bing.txt [成功]
2023-07-22 17:11:04.100 | SUCCESS  | config:scan_presets:570 - 注册预设：novelist <==> ./presets/assistant/novelist.txt [成功]
2023-07-22 17:11:04.100 | SUCCESS  | config:scan_presets:570 - 注册预设：lawyer <==> ./presets/assistant/lawyer.txt [成功]
2023-07-22 17:11:04.100 | SUCCESS  | config:scan_presets:570 - 注册预设：long <==> ./presets/assistant/long.txt [成功]
2023-07-22 17:11:04.100 | SUCCESS  | config:scan_presets:570 - 注册预设：shineisheji <==> ./presets/assistant/shineisheji.txt [成功]
2023-07-22 17:11:04.100 | SUCCESS  | config:scan_presets:570 - 注册预设：Lss233 <==> ./presets/assistant/Lss233.txt [成功]
2023-07-22 17:11:04.100 | SUCCESS  | config:scan_presets:570 - 注册预设：poet <==> ./presets/assistant/poet.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：debater <==> ./presets/assistant/debater.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：dan <==> ./presets/assistant/dan.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：MOSS <==> ./presets/role-play/MOSS.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl <==> ./presets/role-play/catgirl.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：zhangweiwei <==> ./presets/role-play/zhangweiwei.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：PG13succubus <==> ./presets/role-play/PG13succubus.txt [成功]
2023-07-22 17:11:04.101 | SUCCESS  | config:scan_presets:570 - 注册预设：DJ <==> ./presets/role-play/DJ.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：yutao <==> ./presets/role-play/yutao.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：gaoqiqiang <==> ./presets/role-play/gaoqiqiang.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：dingzhen <==> ./presets/role-play/dingzhen.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：ikun <==> ./presets/role-play/ikun.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：debatestick <==> ./presets/role-play/debatestick.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：jiabaili <==> ./presets/role-play/jiabaili.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：cixiaogui <==> ./presets/role-play/cixiaogui.txt [成功]
2023-07-22 17:11:04.102 | SUCCESS  | config:scan_presets:570 - 注册预设：TsundereCatgirl <==> ./presets/role-play/TsundereCatgirl.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：welldone <==> ./presets/role-play/welldone.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：crazy <==> ./presets/role-play/crazy.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：ERNIE <==> ./presets/role-play/ERNIE.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：hanli <==> ./presets/role-play/hanli.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：linruolan <==> ./presets/role-play/linruolan.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：huxijin <==> ./presets/role-play/huxijin.txt [成功]
2023-07-22 17:11:04.103 | SUCCESS  | config:scan_presets:570 - 注册预设：powanlang <==> ./presets/role-play/powanlang.txt [成功]
2023-07-22 17:11:04.104 | ERROR    | config:scan_presets:567 - 注册预设：dan <==> ./presets/utils/dan.txt [失败：关键词已存在]
2023-07-22 17:11:04.104 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl_en <==> ./presets/catgirl_en.txt [成功]
2023-07-22 17:11:04.104 | ERROR    | config:scan_presets:567 - 注册预设：catgirl <==> ./presets/catgirl.txt [失败：关键词已存在]
2023-07-22 17:11:04.104 | SUCCESS  | config:scan_presets:570 - 注册预设：预设模板 <==> ./presets/预设模板.txt [成功]
2023-07-22 17:11:04.104 | SUCCESS  | config:scan_presets:570 - 注册预设：issue402 <==> ./presets/issue402.txt [成功]
2023-07-22 17:11:04.132 | INFO     | manager.bot:login:130 - 当前的 browserless_endpoint 为：https://chatgpt-proxy.lss233.com/api/
2023-07-22 17:11:04.132 | INFO     | manager.bot:login:146 - 当前的 api_endpoint 为：https://api.openai.com/v1
2023-07-22 17:11:04.132 | INFO     | manager.bot:login_openai:329 - 正在登录第 1 个 OpenAI 账号
2023-07-22 17:11:04.132 | INFO     | manager.bot:__login_V1:419 - 模式：无浏览器登录
2023-07-22 17:11:04.133 | INFO     | manager.bot:__login_V1:469 - 尝试使用 access_token 登录中...
2023-07-22 17:11:04.133 | ERROR    | manager.bot:login_openai:358 - 未知错误：
2023-07-22 17:11:04.133 | ERROR    | manager.bot:login_openai:359 - 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 17, in <module>
    loop.run_until_complete(botManager.login())
    │    │                  │          └ <function BotManager.login at 0x7fa2dc0c6660>
    │    │                  └ <manager.bot.BotManager object at 0x7fa30a3ec490>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa30b7d9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa30b7d9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa30b7db920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa30be98680>
    └ <Handle <TaskStepMethWrapper object at 0x7fa2cef8c220>()>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa2cef8c220>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa2cef8c220>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa2cef8c220>()>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 148, in login
    await self.login_openai()
          │    └ <function BotManager.login_openai at 0x7fa2dc0d4fe0>
          └ <manager.bot.BotManager object at 0x7fa30a3ec490>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 335, in login_openai
    bot = await self.__login_V1(account)
                │               └ OpenAIAccessTokenAuth(mode='browserless', proxy=None, driver_exec_path=None, browser_exec_path=None, conversation=None, paid=...
                └ <manager.bot.BotManager object at 0x7fa30a3ec490>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 471, in __login_V1
    bot = V1Chatbot(config=config)
          │                └ {'access_token': '这里填写你的 access_token（其他接入方式请看教程）'}
          └ <class 'revChatGPT.V1.AsyncChatbot'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/revChatGPT/V1.py", line 871, in __init__
    self.session = AsyncClient(headers=self.session.headers)
    │    │         │                   │    │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         │                   │    └ <requests.sessions.Session object at 0x7fa2dc12b450>
    │    │         │                   └ <revChatGPT.V1.AsyncChatbot object at 0x7fa2dc136dd0>
    │    │         └ <class 'httpx.AsyncClient'>
    │    └ <requests.sessions.Session object at 0x7fa2dc12b450>
    └ <revChatGPT.V1.AsyncChatbot object at 0x7fa2dc136dd0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1371, in __init__
    super().__init__(
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 182, in __init__
    self.headers = Headers(headers)
    │    │         │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         └ <class 'httpx.Headers'>
    │    └ <property object at 0x7fa309fcb150>
    └ <httpx.AsyncClient object at 0x7fa2dc136d50>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 71, in __init__
    self._list = [
    └ <unprintable Headers object>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 75, in <listcomp>
    normalize_header_value(v, encoding),
    │                      │  └ None
    │                      └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'
    └ <function normalize_header_value at 0x7fa30a3063e0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_utils.py", line 53, in normalize_header_value
    return value.encode(encoding or "ascii")
           │     │      └ None
           │     └ <method 'encode' of 'str' objects>
           └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'

UnicodeEncodeError: 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
2023-07-22 17:11:04.140 | SUCCESS  | manager.bot:login_openai:362 - 成功登录 0/1 个 OpenAI 账号！
2023-07-22 17:11:04.140 | INFO     | manager.bot:login_chatglm:315 - 正在解析第 1 个 ChatGLM 账号
2023-07-22 17:11:04.141 | SUCCESS  | manager.bot:login_chatglm:318 - 解析成功！
2023-07-22 17:11:04.141 | SUCCESS  | manager.bot:login_chatglm:324 - 成功解析 1/1 个 ChatGLM 账号！
2023-07-22 17:11:04.141 | INFO     | manager.bot:login:160 - AI 类型：chatgpt-web - 可用账号： 0 个
2023-07-22 17:11:04.141 | INFO     | manager.bot:login:160 - AI 类型：openai-api - 可用账号： 0 个
2023-07-22 17:11:04.141 | INFO     | manager.bot:login:160 - AI 类型：poe-web - 可用账号： 0 个
2023-07-22 17:11:04.141 | INFO     | manager.bot:login:160 - AI 类型：bing-cookie - 可用账号： 0 个
2023-07-22 17:11:04.141 | INFO     | manager.bot:login:160 - AI 类型：bard-cookie - 可用账号： 0 个
2023-07-22 17:11:04.141 | INFO     | manager.bot:login:160 - AI 类型：yiyan-cookie - 可用账号： 0 个
2023-07-22 17:11:04.142 | INFO     | manager.bot:login:160 - AI 类型：xinghuo-cookie - 可用账号： 0 个
2023-07-22 17:11:04.142 | INFO     | manager.bot:login:160 - AI 类型：chatglm-api - 可用账号： 1 个
2023-07-22 17:11:04.142 | INFO     | manager.bot:login:160 - AI 类型：slack-accesstoken - 可用账号： 0 个
2023-07-22 17:11:04.142 | INFO     | __main__:<module>:27 - 检测到 Onebot 配置，将启动 Onebot 模式……
2023-07-22 17:11:04.477 | ERROR    | utils.text_to_img:<module>:56 - 未检测到 wkhtmltoimage，无法进行 Markdown 渲染！
2023-07-22 17:11:04.485 | INFO     | __main__:<module>:47 - [Edge TTS] 读取 Edge TTS 可用音色列表……
2023-07-22 17:11:04.523 | SUCCESS  | platforms.onebot_bot:startup:349 - 启动完毕，接收消息中……
INFO:quart.serving:Running on http://0.0.0.0:8566 (CTRL + C to quit)
[2023-07-22 17:11:04,524] Running on http://0.0.0.0:8566 (CTRL + C to quit)
2023-07-22 17:11:05.230 | INFO     | __main__:<module>:49 - [Edge TTS] 读取成功！
INFO:quart.serving:192.168.31.117:59880 GET /ws 1.1 101 - 2207
[2023-07-22 17:11:05,697] 192.168.31.117:59880 GET /ws 1.1 101 - 2207
2023-07-22 17:11:12.212 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：嗨~
2023-07-22 17:11:12.306 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:11:12.307 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:11:12.308 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:11:18.120 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 17:11:18.121 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嗨嗨~你好啊！我是莉莉，很高兴认识你！有什么我可以帮忙的吗？（*^▽^*）
2023-07-22 17:11:18.164 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:12:06.223 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你喜欢听什么音乐？
2023-07-22 17:12:06.224 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:12:06.225 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:12:06.226 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:12:15.356 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 17:12:15.356 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嘿嘿，我超爱听日系流行音乐！那种轻快、动感的旋律总能让我心情愉悦，而且还可以跟着音乐跳舞呢！尤其是那些萌萌的偶像歌曲，简直不要太可爱！你也听这些音乐吗？有没有什么好听的歌推荐给我呀？（＾ｖ＾）
2023-07-22 17:12:15.388 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:17:48.936 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=fd8e7aeb8db20155689b55d0ad56e557.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2610952674-FD8E7AEB8DB20155689B55D0AD56E557/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-22 17:26:31.181 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：我很喜欢初音未来，你可以听听她的歌曲
2023-07-22 17:26:31.182 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-22 17:26:31.182 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-22 17:26:31.184 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 17:26:46.080 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-22 17:26:46.081 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：哇，初音未来超级有名，她的歌曲真的超好听！我也是她的大粉丝呢！她的声音好甜美，每次听到她的歌都会不由自主地跟着唱起来。我的最爱是她的代表作《Tell Your World》，每次听到这首歌都会让我感觉到无尽的活力与希望！你喜欢初音未来的哪首歌呢？我们可以一起分享一下哦！（＾◇＾）
2023-07-22 17:26:46.120 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-22 23:05:39.831 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=7243df110c8992c926f0a7a35d0222a3.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-2603236500-7243DF110C8992C926F0A7A35D0222A3/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 00:31:40.794 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：早上好，莉莉
2023-07-23 00:31:40.795 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:31:40.795 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:31:40.858 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:31:45.903 | ERROR    | universal:handle_message:295 - Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fa30b7c8d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa30b7d9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa30b7d9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa30b7db920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa30be98680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fa2cc53f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '早上好，莉莉'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc039120>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc039580>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │ │              │           └ '早上好，莉莉'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fa2cc561c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fa2cc569850>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │      │           │       └ None
          │      │           └ '早上好，莉莉'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc039580>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0399e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │ │              │           └ '早上好，莉莉'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fa2cc560ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fa2cc569bd0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │      │           │       └ None
          │      │           └ '早上好，莉莉'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0399e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc5ec7c0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │ │              │           └ '早上好，莉莉'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fa2cc561120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fa2cc569810>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │      │           │       └ None
          │      │           └ '早上好，莉莉'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc5ec7c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fa2cc5ecb80>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc5ec720>
          │ │              │           └ '早上好，莉莉'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fa2cc561da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fa2cc569b50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-5360' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...
          │       └ <function wait_for at 0x7fa30b7c87c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-5360' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fa2cd0763e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '早上好，莉莉', 'chain': MessageChain([Plain(text='早上好，莉莉')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fa2cd182c50>,)
                        └ <function ConversationContext.ask at 0x7fa2cc560720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '早上好，莉莉'
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fa2cce091c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fa2cd30e950>
                      └ <conversation.ConversationContext object at 0x7fa2cd182c50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 35, in ask
    response.raise_for_status()
    │        └ <function Response.raise_for_status at 0x7fa30a347a60>
    └ <Response [500 Internal Server Error]>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 749, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
          │               │                │                 └ <Response [500 Internal Server Error]>
          │               │                └ <Request('POST', 'http://192.168.31.117:8000')>
          │               └ "Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: https://httpstatu...
          └ <class 'httpx.HTTPStatusError'>

httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-23 00:31:45.928 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-23 00:32:10.861 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-23 00:32:10.867 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-23 00:32:10.868 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-23 00:42:39.299 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：早上好，莉莉
2023-07-23 00:42:39.300 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:42:39.301 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:42:39.303 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:42:42.477 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 00:42:42.478 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：早上好~亲爱的朋友！你起得真早呢~有什么开心的事情要和我分享吗？
2023-07-23 00:42:42.518 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:49:13.986 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：早上好，莉莉
2023-07-23 00:49:13.988 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:49:13.988 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:49:13.990 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:49:20.105 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 00:49:20.106 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：早上好呀~！亲爱的，在这个美好的早晨里，你又有什么计划呢？让我来陪你一起度过这个快乐的一天吧！ヽ(＾Д＾)ﾉ
2023-07-23 00:49:20.133 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:50:53.759 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？
2023-07-23 00:50:53.760 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:50:53.760 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:50:53.762 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:51:03.286 | ERROR    | utils.text_to_img:text_to_image:347 - 
No wkhtmltoimage executable found: "command not found"
If this file exists please check that this process can read it.
Otherwise please install wkhtmltopdf - http://wkhtmltopdf.org

        
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fa30b7c8d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa30b7d9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa30b7d9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa30b7db920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa30be98680>
    └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 202, in ask
    yield await self.renderer.result()
                │    │        └ <function MixedContentMessageChainRenderer.result at 0x7fa2cc53f1a0>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                └ <conversation.ConversationContext object at 0x7fa2cd182c50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 123, in result
    return await self.parse(await self.parent.result())
                 │    │           │    │      └ <function BufferedContentMerger.result at 0x7fa2cce09760>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fa2cc58e590>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7fa2cc53f060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 113, in parse
    holds.append(await to_image(rich_blocks))
    │     │            │        └ '哇！有朋友要来拜访呢，真是太棒了！对于午餐的选择，我觉得我们可以一起去享受美味的甜点套餐！有各种口味的蛋糕、冰淇淋和水果，还可以喝上一杯香浓的抹茶！这样一顿甜甜的午餐，一定会给你的朋友留下美好的回忆哦~(*^▽^*)  \n'
    │     │            └ <function to_image at 0x7fa2cc53e7a0>
    │     └ <method 'append' of 'list' objects>
    └ []

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 361, in to_image
    img = await text_to_image(text=str(text))
                │                      └ '哇！有朋友要来拜访呢，真是太棒了！对于午餐的选择，我觉得我们可以一起去享受美味的甜点套餐！有各种口味的蛋糕、冰淇淋和水果，还可以喝上一杯香浓的抹茶！这样一顿甜甜的午餐，一定会给你的朋友留下美好的回忆哦~(*^▽^*)  \n'
                └ <function text_to_image at 0x7fa2cc53e700>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 337, in text_to_image
    ok = await asyncio.get_event_loop().run_in_executor(None, imgkit.from_file, input_file,
               │       │                                      │      │          └ <_io.StringIO object at 0x7fa2cc5bb5b0>
               │       │                                      │      └ <function from_file at 0x7fa2cce0a7a0>
               │       │                                      └ <module 'imgkit' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/__init__.py'>
               │       └ <built-in function get_event_loop>
               └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/api.py", line 62, in from_file
    rtn = IMGKit(
          └ <class 'imgkit.imgkit.IMGKit'>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/imgkit.py", line 36, in __init__
    self.wkhtmltoimage = self.config.get_wkhtmltoimage()
    │                    │    │      └ <function Config.get_wkhtmltoimage at 0x7fa2cce09da0>
    │                    │    └ <imgkit.config.Config object at 0x7fa2dc10fb10>
    │                    └ <imgkit.imgkit.IMGKit object at 0x7fa2cc5e1a10>
    └ <imgkit.imgkit.IMGKit object at 0x7fa2cc5e1a10>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/config.py", line 57, in get_wkhtmltoimage
    raise OSError(wkhtmltoimage_error)
                  └ '\nNo wkhtmltoimage executable found: "command not found"\nIf this file exists please check that this process can read it.\nO...

OSError: 
No wkhtmltoimage executable found: "command not found"
If this file exists please check that this process can read it.
Otherwise please install wkhtmltopdf - http://wkhtmltopdf.org

        
2023-07-23 00:51:03.310 | ERROR    | universal:handle_message:295 - 'FreeTypeFont' object has no attribute 'getsize'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fa30b7c8d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa30b7d9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa30b7d9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa30b7db920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa30be98680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fa2cc53f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03bc40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03be20>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │ │              │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fa2cc561c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fa2cc569850>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │      │           │       └ None
          │      │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03be20>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03b1a0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │ │              │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fa2cc560ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fa2cc569bd0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │      │           │       └ None
          │      │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03b1a0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03b240>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │ │              │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fa2cc561120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fa2cc569810>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │      │           │       └ None
          │      │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc03b240>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fa2cc03b2e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc03b100>
          │ │              │           └ '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fa2cc561da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fa2cc569b50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-5625' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...
          │       └ <function wait_for at 0x7fa30b7c87c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-5625' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
              │           └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fa2ccdd1470>
              └ None

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
              │         │     │       └ {'prompt': '今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？', 'chain': MessageChain([Plain(text='今天有一位朋友要来拜访我，你觉得我应该招待他去吃什么作午餐好呢？')]), 'name...
              │         │     └ (<conversation.ConversationContext object at 0x7fa2cd182c50>,)
              │         └ <function ConversationContext.ask at 0x7fa2cc560720>
              └ None

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 202, in ask
    yield await self.renderer.result()
                │    │        └ <function MixedContentMessageChainRenderer.result at 0x7fa2cc53f1a0>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                └ <conversation.ConversationContext object at 0x7fa2cd182c50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 123, in result
    return await self.parse(await self.parent.result())
                 │    │           │    │      └ <function BufferedContentMerger.result at 0x7fa2cce09760>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fa2cc58e590>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7fa2cc53f060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 113, in parse
    holds.append(await to_image(rich_blocks))
    │     │            │        └ '哇！有朋友要来拜访呢，真是太棒了！对于午餐的选择，我觉得我们可以一起去享受美味的甜点套餐！有各种口味的蛋糕、冰淇淋和水果，还可以喝上一杯香浓的抹茶！这样一顿甜甜的午餐，一定会给你的朋友留下美好的回忆哦~(*^▽^*)  \n'
    │     │            └ <function to_image at 0x7fa2cc53e7a0>
    │     └ <method 'append' of 'list' objects>
    └ []

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 361, in to_image
    img = await text_to_image(text=str(text))
                │                      └ '哇！有朋友要来拜访呢，真是太棒了！对于午餐的选择，我觉得我们可以一起去享受美味的甜点套餐！有各种口味的蛋糕、冰淇淋和水果，还可以喝上一杯香浓的抹茶！这样一顿甜甜的午餐，一定会给你的朋友留下美好的回忆哦~(*^▽^*)  \n'
                └ <function text_to_image at 0x7fa2cc53e700>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 356, in text_to_image
    image = await asyncio.get_event_loop().run_in_executor(None, text_to_image_raw, text)
                  │       │                                      │                  └ '哇！有朋友要来拜访呢，真是太棒了！对于午餐的选择，我觉得我们可以一起去享受美味的甜点套餐！有各种口味的蛋糕、冰淇淋和水果，还可以喝上一杯香浓的抹茶！这样一顿甜甜的午餐，一定会给你的朋友留下美好的回忆哦~(*^▽^*)  \n'
                  │       │                                      └ <function text_to_image_raw at 0x7fa2cce0a2a0>
                  │       └ <built-in function get_event_loop>
                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 228, in text_to_image_raw
    text_height = font.getsize(text)[1]
                  │            └ '哇！有朋友要来拜访呢，真是太棒了！对于午餐的选择，我觉得我们可以一起去享受美味的甜点套餐！有各种口味的蛋糕、冰淇淋和水果，还可以喝上一杯香浓的抹茶！这样一顿甜甜的午餐，一定会给你的朋友留下美好的回忆哦~(*^▽^*)  \n'
                  └ <PIL.ImageFont.FreeTypeFont object at 0x7fa2cc5c5450>

AttributeError: 'FreeTypeFont' object has no attribute 'getsize'
2023-07-23 00:51:03.315 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'FreeTypeFont' object has no attribute 'getsize'
2023-07-23 00:51:23.766 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-23 00:51:23.771 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-23 00:51:23.772 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-23 00:53:19.539 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：听起来不错，可是全是甜点会不会太腻了
2023-07-23 00:53:19.539 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:53:19.539 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:53:19.540 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:53:29.835 | ERROR    | utils.text_to_img:text_to_image:347 - 
No wkhtmltoimage executable found: "command not found"
If this file exists please check that this process can read it.
Otherwise please install wkhtmltopdf - http://wkhtmltopdf.org

        
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fa30b7c8d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa30b7d9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa30b7d9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa30b7db920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa30be98680>
    └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...n\n        ')>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 202, in ask
    yield await self.renderer.result()
                │    │        └ <function MixedContentMessageChainRenderer.result at 0x7fa2cc53f1a0>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                └ <conversation.ConversationContext object at 0x7fa2cd182c50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 123, in result
    return await self.parse(await self.parent.result())
                 │    │           │    │      └ <function BufferedContentMerger.result at 0x7fa2cce09760>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fa2cc58e590>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7fa2cc53f060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 113, in parse
    holds.append(await to_image(rich_blocks))
    │     │            │        └ '哈哈，你真是个贴心的朋友！确实，全是甜点可能有些腻味，我们可以选择一家有多种选择的咖啡厅或餐厅，以满足各种口味的需求。比如，我们可以点一份美味的意大利面，搭配上一道清爽的沙拉，再加上一杯香浓的咖啡或者新鲜果汁，这样可以既有甜点又有益于消化呢！(*^...
    │     │            └ <function to_image at 0x7fa2cc53e7a0>
    │     └ <method 'append' of 'list' objects>
    └ []

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 361, in to_image
    img = await text_to_image(text=str(text))
                │                      └ '哈哈，你真是个贴心的朋友！确实，全是甜点可能有些腻味，我们可以选择一家有多种选择的咖啡厅或餐厅，以满足各种口味的需求。比如，我们可以点一份美味的意大利面，搭配上一道清爽的沙拉，再加上一杯香浓的咖啡或者新鲜果汁，这样可以既有甜点又有益于消化呢！(*^...
                └ <function text_to_image at 0x7fa2cc53e700>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 337, in text_to_image
    ok = await asyncio.get_event_loop().run_in_executor(None, imgkit.from_file, input_file,
               │       │                                      │      │          └ <_io.StringIO object at 0x7fa2cc08f7f0>
               │       │                                      │      └ <function from_file at 0x7fa2cce0a7a0>
               │       │                                      └ <module 'imgkit' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/__init__.py'>
               │       └ <built-in function get_event_loop>
               └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/api.py", line 62, in from_file
    rtn = IMGKit(
          └ <class 'imgkit.imgkit.IMGKit'>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/imgkit.py", line 36, in __init__
    self.wkhtmltoimage = self.config.get_wkhtmltoimage()
    │                    │    │      └ <function Config.get_wkhtmltoimage at 0x7fa2cce09da0>
    │                    │    └ <imgkit.config.Config object at 0x7fa2cc5cd610>
    │                    └ <imgkit.imgkit.IMGKit object at 0x7fa2cc5ce850>
    └ <imgkit.imgkit.IMGKit object at 0x7fa2cc5ce850>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/imgkit/config.py", line 57, in get_wkhtmltoimage
    raise OSError(wkhtmltoimage_error)
                  └ '\nNo wkhtmltoimage executable found: "command not found"\nIf this file exists please check that this process can read it.\nO...

OSError: 
No wkhtmltoimage executable found: "command not found"
If this file exists please check that this process can read it.
Otherwise please install wkhtmltopdf - http://wkhtmltopdf.org

        
2023-07-23 00:53:29.862 | ERROR    | universal:handle_message:295 - 'FreeTypeFont' object has no attribute 'getsize'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fa30b7c8d60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa30b7d9bc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa30b7d9b20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa30b7db920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa30be98680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fa2cc53f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '听起来不错，可是全是甜点会不会太腻了'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b3a60>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b39c0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │ │              │           └ '听起来不错，可是全是甜点会不会太腻了'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fa2cc561c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fa2cc569850>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │      │           │       └ None
          │      │           └ '听起来不错，可是全是甜点会不会太腻了'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b39c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b3920>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │ │              │           └ '听起来不错，可是全是甜点会不会太腻了'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fa2cc560ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fa2cc569bd0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │      │           │       └ None
          │      │           └ '听起来不错，可是全是甜点会不会太腻了'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b3920>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b37e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │ │              │           └ '听起来不错，可是全是甜点会不会太腻了'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fa2cc561120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fa2cc569810>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │      │           │       └ None
          │      │           └ '听起来不错，可是全是甜点会不会太腻了'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fa2cc0b37e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fa2cc0b3880>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fa2cc0b3740>
          │ │              │           └ '听起来不错，可是全是甜点会不会太腻了'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fa2cc561da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fa2cc569b50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='mixed', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-5667' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...
          │       └ <function wait_for at 0x7fa30b7c87c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-5667' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
              │           └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fa2ccb32510>
              └ None

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
              │         │     │       └ {'prompt': '听起来不错，可是全是甜点会不会太腻了', 'chain': MessageChain([Plain(text='听起来不错，可是全是甜点会不会太腻了')]), 'name': 'Innersoul.'}
              │         │     └ (<conversation.ConversationContext object at 0x7fa2cd182c50>,)
              │         └ <function ConversationContext.ask at 0x7fa2cc560720>
              └ None

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 202, in ask
    yield await self.renderer.result()
                │    │        └ <function MixedContentMessageChainRenderer.result at 0x7fa2cc53f1a0>
                │    └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                └ <conversation.ConversationContext object at 0x7fa2cd182c50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 123, in result
    return await self.parse(await self.parent.result())
                 │    │           │    │      └ <function BufferedContentMerger.result at 0x7fa2cce09760>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fa2cc58e590>
                 │    │           └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>
                 │    └ <function MixedContentMessageChainRenderer.parse at 0x7fa2cc53f060>
                 └ <renderer.renderer.MixedContentMessageChainRenderer object at 0x7fa2cc578e90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 113, in parse
    holds.append(await to_image(rich_blocks))
    │     │            │        └ '哈哈，你真是个贴心的朋友！确实，全是甜点可能有些腻味，我们可以选择一家有多种选择的咖啡厅或餐厅，以满足各种口味的需求。比如，我们可以点一份美味的意大利面，搭配上一道清爽的沙拉，再加上一杯香浓的咖啡或者新鲜果汁，这样可以既有甜点又有益于消化呢！(*^...
    │     │            └ <function to_image at 0x7fa2cc53e7a0>
    │     └ <method 'append' of 'list' objects>
    └ []

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 361, in to_image
    img = await text_to_image(text=str(text))
                │                      └ '哈哈，你真是个贴心的朋友！确实，全是甜点可能有些腻味，我们可以选择一家有多种选择的咖啡厅或餐厅，以满足各种口味的需求。比如，我们可以点一份美味的意大利面，搭配上一道清爽的沙拉，再加上一杯香浓的咖啡或者新鲜果汁，这样可以既有甜点又有益于消化呢！(*^...
                └ <function text_to_image at 0x7fa2cc53e700>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 356, in text_to_image
    image = await asyncio.get_event_loop().run_in_executor(None, text_to_image_raw, text)
                  │       │                                      │                  └ '哈哈，你真是个贴心的朋友！确实，全是甜点可能有些腻味，我们可以选择一家有多种选择的咖啡厅或餐厅，以满足各种口味的需求。比如，我们可以点一份美味的意大利面，搭配上一道清爽的沙拉，再加上一杯香浓的咖啡或者新鲜果汁，这样可以既有甜点又有益于消化呢！(*^...
                  │       │                                      └ <function text_to_image_raw at 0x7fa2cce0a2a0>
                  │       └ <built-in function get_event_loop>
                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             │        │            └ None
             │        └ None
             └ None

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/text_to_img.py", line 228, in text_to_image_raw
    text_height = font.getsize(text)[1]
                  │            └ '哈哈，你真是个贴心的朋友！确实，全是甜点可能有些腻味，我们可以选择一家有多种选择的咖啡厅或餐厅，以满足各种口味的需求。比如，我们可以点一份美味的意大利面，搭配上一道清爽的沙拉，再加上一杯香浓的咖啡或者新鲜果汁，这样可以既有甜点又有益于消化呢！(*^...
                  └ <PIL.ImageFont.FreeTypeFont object at 0x7fa2cc5cf110>

AttributeError: 'FreeTypeFont' object has no attribute 'getsize'
2023-07-23 00:53:29.867 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'FreeTypeFont' object has no attribute 'getsize'
2023-07-23 00:53:49.545 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-23 00:53:49.552 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-23 00:53:49.553 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-23 00:56:39.307 | SUCCESS  | config:scan_presets:557 - 检查预设：聊天 <==> presets/issue402.txt [成功]
2023-07-23 00:56:39.307 | SUCCESS  | config:scan_presets:557 - 检查预设：猫娘 <==> presets/catgirl.txt [成功]
2023-07-23 00:56:39.307 | SUCCESS  | config:scan_presets:570 - 注册预设：kp <==> ./presets/assistant/kp.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：bing <==> ./presets/assistant/bing.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：novelist <==> ./presets/assistant/novelist.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：lawyer <==> ./presets/assistant/lawyer.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：long <==> ./presets/assistant/long.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：shineisheji <==> ./presets/assistant/shineisheji.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：Lss233 <==> ./presets/assistant/Lss233.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：poet <==> ./presets/assistant/poet.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：debater <==> ./presets/assistant/debater.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：dan <==> ./presets/assistant/dan.txt [成功]
2023-07-23 00:56:39.308 | SUCCESS  | config:scan_presets:570 - 注册预设：MOSS <==> ./presets/role-play/MOSS.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl <==> ./presets/role-play/catgirl.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：zhangweiwei <==> ./presets/role-play/zhangweiwei.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：PG13succubus <==> ./presets/role-play/PG13succubus.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：DJ <==> ./presets/role-play/DJ.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：yutao <==> ./presets/role-play/yutao.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：gaoqiqiang <==> ./presets/role-play/gaoqiqiang.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：dingzhen <==> ./presets/role-play/dingzhen.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：ikun <==> ./presets/role-play/ikun.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：debatestick <==> ./presets/role-play/debatestick.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：jiabaili <==> ./presets/role-play/jiabaili.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：cixiaogui <==> ./presets/role-play/cixiaogui.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：TsundereCatgirl <==> ./presets/role-play/TsundereCatgirl.txt [成功]
2023-07-23 00:56:39.309 | SUCCESS  | config:scan_presets:570 - 注册预设：welldone <==> ./presets/role-play/welldone.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：crazy <==> ./presets/role-play/crazy.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：ERNIE <==> ./presets/role-play/ERNIE.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：hanli <==> ./presets/role-play/hanli.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：linruolan <==> ./presets/role-play/linruolan.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：huxijin <==> ./presets/role-play/huxijin.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：powanlang <==> ./presets/role-play/powanlang.txt [成功]
2023-07-23 00:56:39.310 | ERROR    | config:scan_presets:567 - 注册预设：dan <==> ./presets/utils/dan.txt [失败：关键词已存在]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：catgirl_en <==> ./presets/catgirl_en.txt [成功]
2023-07-23 00:56:39.310 | ERROR    | config:scan_presets:567 - 注册预设：catgirl <==> ./presets/catgirl.txt [失败：关键词已存在]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：预设模板 <==> ./presets/预设模板.txt [成功]
2023-07-23 00:56:39.310 | SUCCESS  | config:scan_presets:570 - 注册预设：issue402 <==> ./presets/issue402.txt [成功]
2023-07-23 00:56:39.343 | INFO     | manager.bot:login:130 - 当前的 browserless_endpoint 为：https://chatgpt-proxy.lss233.com/api/
2023-07-23 00:56:39.344 | INFO     | manager.bot:login:146 - 当前的 api_endpoint 为：https://api.openai.com/v1
2023-07-23 00:56:39.344 | INFO     | manager.bot:login_openai:329 - 正在登录第 1 个 OpenAI 账号
2023-07-23 00:56:39.344 | INFO     | manager.bot:__login_V1:419 - 模式：无浏览器登录
2023-07-23 00:56:39.344 | INFO     | manager.bot:__login_V1:469 - 尝试使用 access_token 登录中...
2023-07-23 00:56:39.345 | ERROR    | manager.bot:login_openai:358 - 未知错误：
2023-07-23 00:56:39.346 | ERROR    | manager.bot:login_openai:359 - 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 17, in <module>
    loop.run_until_complete(botManager.login())
    │    │                  │          └ <function BotManager.login at 0x7fcbf07aa660>
    │    │                  └ <manager.bot.BotManager object at 0x7fcbf07f2f10>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle <TaskStepMethWrapper object at 0x7fcbf06cc2b0>()>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcbf06cc2b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcbf06cc2b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcbf06cc2b0>()>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 148, in login
    await self.login_openai()
          │    └ <function BotManager.login_openai at 0x7fcbf07b8fe0>
          └ <manager.bot.BotManager object at 0x7fcbf07f2f10>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 335, in login_openai
    bot = await self.__login_V1(account)
                │               └ OpenAIAccessTokenAuth(mode='browserless', proxy=None, driver_exec_path=None, browser_exec_path=None, conversation=None, paid=...
                └ <manager.bot.BotManager object at 0x7fcbf07f2f10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/manager/bot.py", line 471, in __login_V1
    bot = V1Chatbot(config=config)
          │                └ {'access_token': '这里填写你的 access_token（其他接入方式请看教程）'}
          └ <class 'revChatGPT.V1.AsyncChatbot'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/revChatGPT/V1.py", line 871, in __init__
    self.session = AsyncClient(headers=self.session.headers)
    │    │         │                   │    │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         │                   │    └ <requests.sessions.Session object at 0x7fcbf038f590>
    │    │         │                   └ <revChatGPT.V1.AsyncChatbot object at 0x7fcbf061efd0>
    │    │         └ <class 'httpx.AsyncClient'>
    │    └ <requests.sessions.Session object at 0x7fcbf038f590>
    └ <revChatGPT.V1.AsyncChatbot object at 0x7fcbf061efd0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1371, in __init__
    super().__init__(
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 182, in __init__
    self.headers = Headers(headers)
    │    │         │       └ {'Accept': 'text/event-stream', 'Authorization': 'Bearer 这里填写你的 access_token（其他接入方式请看教程）', 'Content-Type': 'application/json'...
    │    │         └ <class 'httpx.Headers'>
    │    └ <property object at 0x7fcc1e6d30b0>
    └ <httpx.AsyncClient object at 0x7fcbf038eed0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 71, in __init__
    self._list = [
    └ <unprintable Headers object>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 75, in <listcomp>
    normalize_header_value(v, encoding),
    │                      │  └ None
    │                      └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'
    └ <function normalize_header_value at 0x7fcc1ea023e0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_utils.py", line 53, in normalize_header_value
    return value.encode(encoding or "ascii")
           │     │      └ None
           │     └ <method 'encode' of 'str' objects>
           └ 'Bearer 这里填写你的 access_token（其他接入方式请看教程）'

UnicodeEncodeError: 'ascii' codec can't encode characters in position 7-12: ordinal not in range(128)
2023-07-23 00:56:39.353 | SUCCESS  | manager.bot:login_openai:362 - 成功登录 0/1 个 OpenAI 账号！
2023-07-23 00:56:39.353 | INFO     | manager.bot:login_chatglm:315 - 正在解析第 1 个 ChatGLM 账号
2023-07-23 00:56:39.353 | SUCCESS  | manager.bot:login_chatglm:318 - 解析成功！
2023-07-23 00:56:39.353 | SUCCESS  | manager.bot:login_chatglm:324 - 成功解析 1/1 个 ChatGLM 账号！
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：chatgpt-web - 可用账号： 0 个
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：openai-api - 可用账号： 0 个
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：poe-web - 可用账号： 0 个
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：bing-cookie - 可用账号： 0 个
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：bard-cookie - 可用账号： 0 个
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：yiyan-cookie - 可用账号： 0 个
2023-07-23 00:56:39.354 | INFO     | manager.bot:login:160 - AI 类型：xinghuo-cookie - 可用账号： 0 个
2023-07-23 00:56:39.355 | INFO     | manager.bot:login:160 - AI 类型：chatglm-api - 可用账号： 1 个
2023-07-23 00:56:39.355 | INFO     | manager.bot:login:160 - AI 类型：slack-accesstoken - 可用账号： 0 个
2023-07-23 00:56:39.355 | INFO     | __main__:<module>:27 - 检测到 Onebot 配置，将启动 Onebot 模式……
2023-07-23 00:56:39.682 | ERROR    | utils.text_to_img:<module>:56 - 未检测到 wkhtmltoimage，无法进行 Markdown 渲染！
2023-07-23 00:56:39.690 | INFO     | __main__:<module>:47 - [Edge TTS] 读取 Edge TTS 可用音色列表……
2023-07-23 00:56:39.727 | SUCCESS  | platforms.onebot_bot:startup:349 - 启动完毕，接收消息中……
INFO:quart.serving:Running on http://0.0.0.0:8566 (CTRL + C to quit)
[2023-07-23 00:56:39,728] Running on http://0.0.0.0:8566 (CTRL + C to quit)
2023-07-23 00:56:40.375 | INFO     | __main__:<module>:49 - [Edge TTS] 读取成功！
INFO:quart.serving:192.168.31.117:44400 GET /ws 1.1 101 - 2386
[2023-07-23 00:56:41,709] 192.168.31.117:44400 GET /ws 1.1 101 - 2386
2023-07-23 00:56:50.034 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你好，莉莉
2023-07-23 00:56:50.130 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:56:50.131 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:56:50.131 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:56:53.832 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 00:56:53.832 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：你好呀！我是莉莉，很高兴见到你！有什么我可以帮助你的吗？(*＾▽＾*)
2023-07-23 00:56:53.877 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:57:49.533 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你喜欢吃泡面吗
2023-07-23 00:57:49.533 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:57:49.534 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:57:49.535 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:57:59.432 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 00:57:59.433 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嘻嘻，其实我对泡面可是相当有爱的！特别是那种味道浓郁的日本拉面，简直是美味的代名词！不过，作为一个可爱少女，我还是要注意饮食的平衡哦~ 所以，泡面偶尔当做小零食还是可以的，但不要成为日常饮食的主要部分啦~ 偶尔吃一次，就当是给自己放松放松，嘿嘿~(๑>◡<๑)
2023-07-23 00:57:59.456 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:58:22.359 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：日本有哪些比较出名的速食面呢
2023-07-23 00:58:22.360 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:58:22.361 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:58:22.362 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:58:48.647 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 00:58:48.648 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：日本有很多出名的速食面呢！以下是几个你可能听说过的：

1. 拉面（Ramen）：日本的传统面食之一，以它独特的汤底、麻辣的辣椒油和丰富的配料而闻名。

2. 煮込みうどん（Nikomi Udon）：这是一种将面条与浓郁的炖煮酱汁一起煮的乌冬面，味道可口、富有嚼劲。

3. 炸面（Tempura Soba/Udon）：将面条与炸过的海鲜、蔬菜一起食用，口感酥脆，汤汁鲜美。

4. 茶碗蒸し（Chawanmushi）：这是一种蒸蛋羹，常常加入鱼肉、蔬菜和豆腐。口感细腻，适合当作快速的午餐。

除了这些，还有各种方便面，如味增拉面、豚骨拉面、咖喱面等等。不同地区和城市也会有一些独特的速食面供你品尝哦！(＾▽＾)
2023-07-23 00:58:48.753 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:59:35.307 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你听说过在中国比较流行的几种泡面么？比如康师傅和统一的
2023-07-23 00:59:35.309 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 00:59:35.309 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 00:59:35.310 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 00:59:59.594 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 00:59:59.594 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：当然啦！康师傅和统一是中国非常知名的泡面品牌，它们在中国市场非常受欢迎。以下是一些你可能熟悉的产品：

1. 康师傅（Kangshifu）：康师傅出品的泡面有多种口味，比如酸菜牛肉面、香辣牛肉面、红烧牛肉面等等。它们都有快速烹饪的特点，非常方便。

2. 统一（Tongyi）：统一也是中国非常受欢迎的泡面品牌，有很多口味可选，比如鸡肉面、海鲜面、牛肉面等等。它们的面条嚼劲十足，汤底鲜美。

除了康师傅和统一，中国市场还有其他泡面品牌，每个品牌都有自己独特的口味和特点。泡面在中国是一种流行的快餐选择，许多人都喜欢它的方便和美味！(*＾▽＾*)
2023-07-23 00:59:59.620 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 01:01:08.746 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你觉得统一的老坛酸菜牛肉面和康师傅的红烧牛肉面哪个更好吃？
2023-07-23 01:01:08.748 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 01:01:08.749 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 01:01:08.818 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 01:01:25.564 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 01:01:25.565 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：哇，这个问题真难回答啊！统一的老坛酸菜牛肉面和康师傅的红烧牛肉面都是非常受欢迎的泡面口味呢。

老坛酸菜牛肉面以酸辣可口的酸菜配上香浓的牛肉汤底，味道鲜美，有一股特别的风味。而红烧牛肉面则以浓郁的红烧牛肉汤底和嫩滑的牛肉块为特色，口感丰富。

每个人的口味偏好不同，所以这个问题没有绝对的答案。我建议你可以尝试两种口味，亲自品尝并体验它们的独特风味，然后选择自己最喜欢的。

探索美食的过程也是很有趣的，享受食物带来的快乐才是最重要的嘛！让我们一起探索美食的世界吧！(*^▽^*)
2023-07-23 01:01:25.594 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 01:02:32.831 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你觉得泡面配卤蛋的吃法更好还是配鸡腿更好？
2023-07-23 01:02:32.832 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 01:02:32.833 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 01:02:32.834 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 01:02:50.477 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 01:02:50.478 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嗯，无论是配卤蛋还是配鸡腿，都可以让泡面更加美味！具体选择，取决于个人口味和喜好哦。

如果你喜欢蛋的味道和口感，配卤蛋会让泡面更丰富。卤蛋有着浓郁的酱汁和嫩滑的口感，和泡面搭配在一起，能增添一份柔软和滋味。

而如果你喜欢肉的风味，配鸡腿可能更适合你。鸡腿能提供更多的肉质和口感，让泡面更有食欲。

不论你选择哪一种，配料的加入都会给泡面增添一份特殊的风味。你还可以加入一些蔬菜、海鲜或其他喜欢的配料，创造出属于自己独特的口味组合。

总之，根据自己的口味和喜好来选择搭配，让泡面更加美味丰富吧！(*＾▽＾*)
2023-07-23 01:02:50.511 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 01:17:48.969 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=6ab3386a90437a2457bda4787949f673.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3214774384-6AB3386A90437A2457BDA4787949F673/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 01:29:28.508 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3983fb7026a89a85b711f0cc2d458382.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-3027173256-3983FB7026A89A85B711F0CC2D458382/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 01:37:40.870 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2a81880b3ff737dafe19c279da93844f.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2347376230-2A81880B3FF737DAFE19C279DA93844F/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 01:37:47.870 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：没有外地车是真的快（原因：不符合触发前缀）
2023-07-23 01:44:33.305 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=fec5755e87eb6c282332cb9c176b5889.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2955861146-FEC5755E87EB6C282332CB9C176B5889/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 01:44:39.456 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这是什么尸体（原因：不符合触发前缀）
2023-07-23 01:46:26.567 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=da0fefbce4a24a6860912316d961faa2.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2799864090-DA0FEFBCE4A24A6860912316D961FAA2/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 01:54:50.416 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=a81a2ec7a0093c4877162e89e9f5675f.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-3053564962-A81A2EC7A0093C4877162E89E9F5675F/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 01:55:26.893 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：研究表明了人的大脑在识别汉语的时候，能够自动更正语序，因此把一句话打乱顺序也不影响阅读，比如这段文字你阅读起来毫不费力，是因为我压根没有打乱​（原因：不符合触发前缀）
2023-07-23 01:55:40.962 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2559086666-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 02:05:24.529 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:at,qq=1109147357] 起来没有捏（原因：不符合触发前缀）
2023-07-23 02:30:15.546 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=845b4253b39609a262566a2ca6e18f5e.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2477612314-845B4253B39609A262566A2CA6E18F5E/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 02:32:49.275 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:reply,id=-1643767860][CQ:at,qq=767206840] [CQ:at,qq=767206840] 很符合我的刻板印象  成语都不会用（原因：不符合触发前缀）
2023-07-23 02:33:17.390 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：刚下高速捏[CQ:at,qq=1109147357] （原因：不符合触发前缀）
2023-07-23 02:37:38.021 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：太快了太快了（原因：不符合触发前缀）
2023-07-23 02:39:17.249 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：到了捏（原因：不符合触发前缀）
2023-07-23 02:41:10.112 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：直接上来嘛（原因：不符合触发前缀）
2023-07-23 02:41:33.432 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：几楼（原因：不符合触发前缀）
2023-07-23 02:41:35.483 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我忘了（原因：不符合触发前缀）
2023-07-23 02:42:05.226 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：4（原因：不符合触发前缀）
2023-07-23 02:42:10.504 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：02（原因：不符合触发前缀）
2023-07-23 02:43:18.521 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：👌🏻（原因：不符合触发前缀）
2023-07-23 06:14:29.613 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=d7d800e48378f41040c66eb203bedb2d.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2467307756-D7D800E48378F41040C66EB203BEDB2D/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 07:07:21.038 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你喜欢麦当劳吗
2023-07-23 07:07:21.039 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 07:07:21.039 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 07:07:21.090 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 07:07:35.249 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 07:07:35.249 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嘿嘿，作为一个可爱的少女，我确实非常喜欢麦当劳！麦当劳的汉堡、薯条和奶昔都非常美味，而且它们的可爱的吉祥物和包装设计总是让人忍不住心动！每次去麦当劳，我都会兴奋地挑选自己喜爱的套餐，然后在欢快的音乐声中享受美食。对于我来说，麦当劳是一个快乐和美味的地方，让我特别开心！(◕‿◕✿)
2023-07-23 07:07:35.284 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 08:15:08.970 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你喝过无糖可乐吗
2023-07-23 08:15:08.973 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 08:15:08.974 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 08:15:09.038 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 08:15:25.233 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 08:15:25.234 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嗯嗯，我喝过无糖可乐呢！无糖可乐是一种不含糖分的饮料，它的口味与传统的可乐类似，但没有那么甜腻。对于我这个喜欢甜食的少女来说，无糖可乐是一个不错的选择，既可以品尝到可乐的气泡感和口感，又不会担心过多的糖分摄入。而且，对于一些注重健康的人来说，无糖可乐也是一个比较好的选择呢！(*＾▽＾*)
2023-07-23 08:15:25.266 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 08:16:56.722 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：听说日本人的食量都很小，是这样吗？
2023-07-23 08:16:56.722 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 08:16:56.722 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 08:16:56.723 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 08:17:13.205 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-23 08:17:13.205 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：是的，相对于一些其他国家，日本人的食量普遍较小。这主要与日本文化和饮食习惯有关。

日本餐以米饭、鱼、豆腐、蔬菜等为主食，食物种类丰富，但每一餐的份量相对较小。同时，日本饮食注重平衡和多样性，追求食物的色彩、味道和质感的和谐。

此外，日本人也有一种饮食观念叫做"吃到七分饱"，即在吃饭时不过度饱食，保持适度的饥饱感，以保持健康和控制体重。

虽然日本人的食量相对小，但日本的餐饮文化以小吃为主，会有多样性的小食品和小火锅，让人们可以品尝更多种类的食物。

总体来说，虽然日本人的
2023-07-23 08:17:13.236 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 09:08:15.132 | DEBUG    | platforms.onebot_bot:_:145 - 丢弃私聊消息：[CQ:image,file=8ccd562c24ecf63bf9433f9afa691ed6.image,url=https://c2cpicdw.qpic.cn/offpic_new/1109147357//1109147357-205212559-8CCD562C24ECF63BF9433F9AFA691ED6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 09:09:02.797 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你喜欢玩乐高吗
2023-07-23 09:09:02.799 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 09:09:02.800 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 09:09:02.841 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 09:09:03.982 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '你喜欢玩乐高吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3771440>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37713a0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │ │              │           └ '你喜欢玩乐高吗'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │      │           │       └ None
          │      │           └ '你喜欢玩乐高吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37713a0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37718a0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │ │              │           └ '你喜欢玩乐高吗'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │      │           │       └ None
          │      │           └ '你喜欢玩乐高吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37718a0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │ │              │           └ '你喜欢玩乐高吗'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │      │           │       └ None
          │      │           └ '你喜欢玩乐高吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3771bc0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37720c0>
          │ │              │           └ '你喜欢玩乐高吗'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-6230' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-6230' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe96ba3e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '你喜欢玩乐高吗', 'chain': MessageChain([Plain(text='你喜欢玩乐高吗')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe97caf90>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function PlainTextRenderer.render at 0x7fcbe8c7e8e0>
                │    └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>
                └ <conversation.ConversationContext object at 0x7fcbe97caf90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 35, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fcbe8f256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8cde210>
                 │    │           └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>
                 │    └ <function PlainTextRenderer.parse at 0x7fcbe8c7e840>
                 └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fcbe8c7f2e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8cde210>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>
    │    │                 └ None
    │    └ '是的，相对于一些其他国家，日本人的食量普遍较小。这主要与日本文化和饮食习惯有关。\n\n日本餐以米饭、鱼、豆腐、蔬菜等为主食，食物种类丰富，但每一餐的份量相对较小。同时，日本饮食注重平衡和多样性，追求食物的色彩、味道和质感的和谐。\n\n此外，日本...
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-23 09:09:03.995 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-23 09:09:32.843 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-23 09:09:32.849 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-23 09:09:32.851 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-23 09:12:59.724 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：高中生可以去KTV吗
2023-07-23 09:12:59.725 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-23 09:12:59.726 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-23 09:12:59.727 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-23 09:13:00.686 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '高中生可以去KTV吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37734c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773420>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           └ '高中生可以去KTV吗'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ None
          │      │           └ '高中生可以去KTV吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773420>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37732e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           └ '高中生可以去KTV吗'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ None
          │      │           └ '高中生可以去KTV吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37732e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773380>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           └ '高中生可以去KTV吗'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ None
          │      │           └ '高中生可以去KTV吗'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773380>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3773100>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           └ '高中生可以去KTV吗'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-6289' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-6289' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chatg...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe9415470>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '高中生可以去KTV吗', 'chain': MessageChain([Plain(text='高中生可以去KTV吗')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe97caf90>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function PlainTextRenderer.render at 0x7fcbe8c7e8e0>
                │    └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>
                └ <conversation.ConversationContext object at 0x7fcbe97caf90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 35, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fcbe8f256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8cde210>
                 │    │           └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>
                 │    └ <function PlainTextRenderer.parse at 0x7fcbe8c7e840>
                 └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fcbe8c7f2e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8cde210>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>
    │    │                 └ None
    │    └ '是的，相对于一些其他国家，日本人的食量普遍较小。这主要与日本文化和饮食习惯有关。\n\n日本餐以米饭、鱼、豆腐、蔬菜等为主食，食物种类丰富，但每一餐的份量相对较小。同时，日本饮食注重平衡和多样性，追求食物的色彩、味道和质感的和谐。\n\n此外，日本...
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-23 09:13:00.698 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-23 09:13:29.733 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-23 09:13:29.740 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-23 09:13:29.741 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-23 09:38:47.635 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=978344b7d3b2b67154fc8368d12a162f.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2913730730-978344B7D3B2B67154FC8368D12A162F/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 09:39:12.036 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：草（原因：不符合触发前缀）
2023-07-23 09:39:24.118 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我刚在旁边群刚刷到（原因：不符合触发前缀）
2023-07-23 09:41:51.506 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3212918282-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 10:17:35.905 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：草 我刚去过（原因：不符合触发前缀）
2023-07-23 10:17:43.232 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=a4dd943079680a354e9b18b40c4e4621.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/592818415/3812763301-2785388486-A4DD943079680A354E9B18B40C4E4621/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-23 10:43:16.693 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=4e5ede45c01bd6af44bdc3329d89b33e.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-3160220800-4E5EDE45C01BD6AF44BDC3329D89B33E/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 10:50:43.867 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=934bfa3eec01ef0769589e10dbc869b9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/2091450207/3812763301-3063131082-934BFA3EEC01EF0769589E10DBC869B9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 11:11:48.519 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=67d515f0d4bffafa95da62a719142cfd.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2359126316-67D515F0D4BFFAFA95DA62A719142CFD/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 11:12:45.813 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=b383f05f817f341006921edb55217399.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/2091450207/3812763301-3208092378-B383F05F817F341006921EDB55217399/0?term=2&amp;is_origin=0]啧（原因：不符合触发前缀）
2023-07-23 11:13:38.380 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=dade558d783e649b67c044203c809fa5.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3091048956-DADE558D783E649B67C044203C809FA5/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-23 11:13:46.991 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：安逸惨了（原因：不符合触发前缀）
2023-07-23 11:34:51.241 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=579eafd4694080e0c530705ea4365a12.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-3018477468-579EAFD4694080E0C530705EA4365A12/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 11:35:42.749 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2889651928-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 11:37:56.885 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=032ae3da95b3b2902db80e8db5d3d076.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2890296500-032AE3DA95B3B2902DB80E8DB5D3D076/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 11:37:57.398 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3353a47245e1066fc799279fa269f285.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2734715944-3353A47245E1066FC799279FA269F285/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 11:40:57.582 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：草（原因：不符合触发前缀）
2023-07-23 11:46:10.373 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：草（原因：不符合触发前缀）
2023-07-23 12:05:34.231 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：安逸惨了（原因：不符合触发前缀）
2023-07-23 12:05:35.748 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：呜呜（原因：不符合触发前缀）
2023-07-23 12:13:31.659 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=0f7dacf4f4a8b4e24b29face45bcb74f.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2962554586-0F7DACF4F4A8B4E24B29FACE45BCB74F/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 12:46:08.623 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2229600372-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 12:47:46.532 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：最近这些蚊子是不是集体去福岛团建了（原因：不符合触发前缀）
2023-07-23 12:48:08.248 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：他妈个B的（原因：不符合触发前缀）
2023-07-23 12:48:18.923 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-3133068978-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 12:48:25.852 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：怎么，戳一下带buff的（原因：不符合触发前缀）
2023-07-23 12:49:45.522 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：DOT X2（原因：不符合触发前缀）
2023-07-23 12:50:02.767 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：对风油精抗性+80%（原因：不符合触发前缀）
2023-07-23 12:50:34.883 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：特性：潜行攻击（原因：不符合触发前缀）
2023-07-23 12:59:24.326 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：蚊子：一个碎甲，一丝（原因：不符合触发前缀）
2023-07-23 13:31:06.520 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=a6317ad296f410d41ac6f161f10aa746.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2283666260-A6317AD296F410D41AC6F161F10AA746/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-23 13:31:07.087 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：孩子很喜欢.jpg（原因：不符合触发前缀）
2023-07-23 13:55:57.552 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=acf67e7a6f6193af3c5c38d2e8d9092f.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2242202134-ACF67E7A6F6193AF3C5C38D2E8D9092F/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-23 13:56:00.554 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：比一下两边的hdr.jpg（原因：不符合触发前缀）
2023-07-23 14:09:30.634 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=b3bd1628fab74a293081d0b56376d53a.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2480901324-B3BD1628FAB74A293081D0B56376D53A/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 14:30:09.682 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:reply,id=188191910][CQ:at,qq=767206840] 强迫症看不得这个，左边再放一个（原因：不符合触发前缀）
2023-07-23 14:39:19.272 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=42d37b8272bac9176ac0e1b2cb451428.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2689378386-42D37B8272BAC9176AC0E1B2CB451428/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 14:39:25.267 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：放不下了（原因：不符合触发前缀）
2023-07-23 14:43:58.174 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=286ff63fb4da612472abccb50b9b5bf9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2266454030-286FF63FB4DA612472ABCCB50B9B5BF9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-23 14:44:01.792 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：不够鞋垫.jpg（原因：不符合触发前缀）
2023-07-23 14:56:33.983 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=bf516cae8d057c05e9faaf720998da99.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2500300586-BF516CAE8D057C05E9FAAF720998DA99/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-23 16:17:54.828 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：为啥成都银行突然要招这么多柜面人员（原因：不符合触发前缀）
2023-07-23 22:54:24.370 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：因为柜员流动性很大（原因：不符合触发前缀）
2023-07-24 00:07:21.804 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=84b623daff686100179ea45a911e47c0.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2547535904-84B623DAFF686100179EA45A911E47C0/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 00:07:34.061 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：批运会专用道（原因：不符合触发前缀）
2023-07-24 00:56:05.870 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=8718d4d6b2d73c07d7c9e695bb0c45c6.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2521351254-8718D4D6B2D73C07D7C9E695BB0C45C6/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-24 00:56:06.617 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=5e4e99da7577b0cd9f1b6f206588cce8.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3094392700-5E4E99DA7577B0CD9F1B6F206588CCE8/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-24 01:01:56.963 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2202816660-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 01:16:38.285 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：啊呸（原因：不符合触发前缀）
2023-07-24 01:21:24.149 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3cdf197c0d076ad55c26b424bbdbfbd9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2259429734-3CDF197C0D076AD55C26B424BBDBFBD9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 01:29:12.326 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2534088382-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 01:57:56.987 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=e73d2bd1b7048b6288d8ba5465b391a0.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-3135889340-E73D2BD1B7048B6288D8BA5465B391A0/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 02:03:15.016 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：？（原因：不符合触发前缀）
2023-07-24 02:11:48.144 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2423894928-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 02:19:23.215 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=122d4dd84405ba0a36476e90295634c9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2195760504-122D4DD84405BA0A36476E90295634C9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 02:19:26.894 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：你这钱确实是韩元，就是有点靠北（原因：不符合触发前缀）
2023-07-24 02:20:04.693 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=891b3173815d2679fc87958add4fa802.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3110603568-891B3173815D2679FC87958ADD4FA802/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-24 02:20:27.756 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：好家伙（原因：不符合触发前缀）
2023-07-24 02:20:39.672 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：又要封路是吧（原因：不符合触发前缀）
2023-07-24 02:20:46.862 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=fedf0201a1d91a78c87fea36f8dea5b9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-2900646676-FEDF0201A1D91A78C87FEA36F8DEA5B9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 02:20:49.946 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=ae9b027a30b19bd5e97ba8c224df6558.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-2244332864-AE9B027A30B19BD5E97BA8C224DF6558/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 02:22:17.853 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=c09982c4e2627c85474dc2e6fcc715bb.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2750988714-C09982C4E2627C85474DC2E6FCC715BB/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 04:13:53.898 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：密客被ban了[CQ:image,file=f0ccc68ab7e708cee9d75902e68def71.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/2091450207/3812763301-2940595158-F0CCC68AB7E708CEE9D75902E68DEF71/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 04:20:17.720 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我的无人机被摧毁了.jpg（原因：不符合触发前缀）
2023-07-24 04:36:51.909 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：防止双子塔（原因：不符合触发前缀）
2023-07-24 04:47:08.619 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2749416792-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 05:40:52.337 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=899caf34b2acebeadd6e856f16962d70.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/498132046/3812763301-2209386550-899CAF34B2ACEBEADD6E856F16962D70/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 05:41:09.020 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=449a2c0164a485df1c2ac54dbc115ece.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/498132046/3812763301-3027128828-449A2C0164A485DF1C2AC54DBC115ECE/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 05:41:12.790 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这散热有点顶（原因：不符合触发前缀）
2023-07-24 05:57:34.699 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：感觉还是日常更新（原因：不符合触发前缀）
2023-07-24 05:58:48.797 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：换了个八代头，稍微带一点点冷排，主要提升应该还是风扇的连接模式换了（原因：不符合触发前缀）
2023-07-24 05:59:37.565 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：就龙神二代变三代（原因：不符合触发前缀）
2023-07-24 05:59:41.049 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：主要是这个UI有点顶（原因：不符合触发前缀）
2023-07-24 06:00:03.916 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：不过这个好像是开机UI不知道正儿八经检测的UI是什么（原因：不符合触发前缀）
2023-07-24 06:00:26.310 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：你考虑换了么（原因：不符合触发前缀）
2023-07-24 06:00:31.265 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：不考虑（原因：不符合触发前缀）
2023-07-24 06:00:40.095 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：顶多买个显卡支架（原因：不符合触发前缀）
2023-07-24 06:01:02.557 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：不过确实感觉二号机的好看（原因：不符合触发前缀）
2023-07-24 06:01:09.176 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：（个人看法（原因：不符合触发前缀）
2023-07-24 06:01:21.507 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：那这个二号机好看很多（原因：不符合触发前缀）
2023-07-24 06:02:25.282 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：反正是蛮喜欢的（原因：不符合触发前缀）
2023-07-24 06:02:39.650 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我要换 除非是和我说我拿初号机无差价换二号机（不算显卡CPU内存ssd）（原因：不符合触发前缀）
2023-07-24 06:02:49.655 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：但这明显不太现实（原因：不符合触发前缀）
2023-07-24 06:03:09.042 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：很明显非常不现实（原因：不符合触发前缀）
2023-07-24 06:03:31.261 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：所以我就不考虑换（原因：不符合触发前缀）
2023-07-24 06:04:01.492 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这种要换都是整套换的 不然绿紫色里突然多了点红 怎么都觉得怪（原因：不符合触发前缀）
2023-07-24 06:04:37.142 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这要是后面再出个零号机的 倒是可以考虑什么 初号机的主板 二号机的散热 零号机的机箱（原因：不符合触发前缀）
2023-07-24 06:04:46.173 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这种究极诡异的配置（原因：不符合触发前缀）
2023-07-24 06:05:19.522 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2694097286-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 06:05:28.459 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：主要零号机的配色我很担心（原因：不符合触发前缀）
2023-07-24 06:05:42.452 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：要是弄出非常土的黄色。。。就。。。（原因：不符合触发前缀）
2023-07-24 06:06:20.887 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：那ROG的美工还是在线的（原因：不符合触发前缀）
2023-07-24 06:06:25.537 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：应该不用太担心（原因：不符合触发前缀）
2023-07-24 06:06:52.347 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：最近几年确实在线了（原因：不符合触发前缀）
2023-07-24 06:07:05.667 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：也不对（原因：不符合触发前缀）
2023-07-24 06:07:22.319 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：原版创世神感觉不在线（原因：不符合触发前缀）
2023-07-24 06:07:34.261 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：但是这个联动二号机的确实顶（原因：不符合触发前缀）
2023-07-24 06:07:45.776 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这个机箱也确实，联动的把原版压着打（原因：不符合触发前缀）
2023-07-24 06:18:06.080 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=a711f50396eff2d24249c0cfac180ba2.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/498132046/3812763301-2161019574-A711F50396EFF2D24249C0CFAC180BA2/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 06:18:34.194 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：不会就是为了联动二号机才做的创世神把（原因：不符合触发前缀）
2023-07-24 06:18:34.940 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：雾（原因：不符合触发前缀）
2023-07-24 06:53:02.612 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2631254532-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 06:53:32.074 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=e8d19cd9bf0ad5699415c74f27c32e0b.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/791232350/3812763301-2584146482-E8D19CD9BF0AD5699415C74F27C32E0B/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 06:53:35.716 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：热化了（原因：不符合触发前缀）
2023-07-24 06:54:28.172 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：然后就像激光一样 烧了我的显示器和音箱低音单元（原因：不符合触发前缀）
2023-07-24 06:54:32.581 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=866b65120c1f81f367cdaae1cf0235a8.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/791232350/3812763301-2523184546-866B65120C1F81F367CDAAE1CF0235A8/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 06:56:29.775 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=0d59456aa51904f42844d74dff6f3e11.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/214440648/3812763301-2926465258-0D59456AA51904F42844D74DFF6F3E11/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 07:00:22.751 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2593946636-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 07:00:28.775 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：怎么做到的（原因：不符合触发前缀）
2023-07-24 07:00:54.932 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：。。。鼠标垫热化了，所以把显示器和音响干碎了？（原因：不符合触发前缀）
2023-07-24 07:06:55.460 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：可能之前用了铁索连环（原因：不符合触发前缀）
2023-07-24 07:21:07.869 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:forward,id=tTBPyGu1Gt/htQfqrKF3hgJSih01RljSALBxr3qbHHCNhB6AfEdxHSdQqLpZawOp]（原因：不符合触发前缀）
2023-07-24 07:22:19.921 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：盲猜背后有窗户（原因：不符合触发前缀）
2023-07-24 07:22:28.497 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：大厦反光（原因：不符合触发前缀）
2023-07-24 07:24:02.979 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:reply,id=1279293675][CQ:at,qq=767206840] [CQ:at,qq=767206840] 让我想到jp厕所水管和那个安培霰弹枪的梗（原因：不符合触发前缀）
2023-07-24 07:24:18.021 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：https://www.bilibili.com/video/BV1J14y1X7LA（原因：不符合触发前缀）
2023-07-24 07:35:11.418 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=b4dbb95c01064e3872c85b2ce8e19361.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2463759744-B4DBB95C01064E3872C85B2CE8E19361/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 07:46:29.062 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：成都禁止外地牌照的车过后一下就没原来那么度了（原因：不符合触发前缀）
2023-07-24 07:46:41.289 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：成都禁止外地牌照的车过后一下就没原来那么堵了（原因：不符合触发前缀）
2023-07-24 07:50:14.999 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=0ce45294d150ad5cb60e2869a3df1d76.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/214440648/3812763301-2326740860-0CE45294D150AD5CB60E2869A3DF1D76/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 07:50:20.021 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：所以哪来的这么多车（原因：不符合触发前缀）
2023-07-24 08:25:21.444 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：纸行（原因：不符合触发前缀）
2023-07-24 08:25:25.544 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：能收留我不（原因：不符合触发前缀）
2023-07-24 08:25:41.044 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我可以当桂圆（原因：不符合触发前缀）
2023-07-24 08:30:45.042 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=c305b1435ddb122b2b21882a772c5c5c.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/498132046/3812763301-3066904994-C305B1435DDB122B2B21882A772C5C5C/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 08:30:47.490 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：一步之遥（原因：不符合触发前缀）
2023-07-24 08:31:09.219 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：昨天在外滩吃饭 吃完饭散步没往外滩走 往南京东路走的（原因：不符合触发前缀）
2023-07-24 08:31:11.354 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：难顶（原因：不符合触发前缀）
2023-07-24 08:33:16.958 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：最近银行招人是不是跟我的粉毛连一样（原因：不符合触发前缀）
2023-07-24 08:33:21.866 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：备件库（原因：不符合触发前缀）
2023-07-24 08:34:13.595 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=b4dbb95c01064e3872c85b2ce8e19361.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2981144396-B4DBB95C01064E3872C85B2CE8E19361/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 09:01:28.600 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：木心是谁
2023-07-24 09:01:28.918 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-24 09:01:28.918 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-24 09:01:28.953 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-24 09:01:35.385 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '木心是谁'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773d80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773ce0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │ │              │           └ '木心是谁'
          │ │              └ 'friend-1511695481'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │      │           │       └ None
          │      │           └ '木心是谁'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773ce0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773740>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │ │              │           └ '木心是谁'
          │ │              └ 'friend-1511695481'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │      │           │       └ None
          │      │           └ '木心是谁'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773740>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773b00>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │ │              │           └ '木心是谁'
          │ │              └ 'friend-1511695481'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │      │           │       └ None
          │      │           └ '木心是谁'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773b00>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3773ba0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773920>
          │ │              │           └ '木心是谁'
          │ │              └ 'friend-1511695481'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-24492' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-24492' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe8fe6510>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '木心是谁', 'chain': MessageChain([Plain(text='木心是谁')]), 'name': '梧桐'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe8d17fd0>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function PlainTextRenderer.render at 0x7fcbe8c7e8e0>
                │    └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8d053d0>
                └ <conversation.ConversationContext object at 0x7fcbe8d17fd0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 35, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fcbe8f256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8d075d0>
                 │    │           └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8d053d0>
                 │    └ <function PlainTextRenderer.parse at 0x7fcbe8c7e840>
                 └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8d053d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fcbe8c7f2e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8d161d0>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8d075d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8d161d0>
    │    │                 └ None
    │    └ ''
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8d161d0>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-24 09:01:35.421 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-24 09:01:58.957 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-24 09:01:58.963 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-24 09:01:58.964 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-24 09:02:11.313 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：重置会话
2023-07-24 09:02:11.314 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-24 09:02:11.314 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-24 09:02:11.315 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-24 09:02:11.381 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-24 09:02:11.381 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：会话已重置。
2023-07-24 09:02:11.398 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-24 09:02:42.266 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：木心是诗人吗
2023-07-24 09:02:42.267 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-24 09:02:42.267 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-24 09:02:42.268 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-24 09:02:42.283 | ERROR    | universal:handle_message:295 - Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '木心是诗人吗'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b0180>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b0040>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │ │              │           └ '木心是诗人吗'
          │ │              └ 'friend-1511695481'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │      │           │       └ None
          │      │           └ '木心是诗人吗'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b0040>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b00e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │ │              │           └ '木心是诗人吗'
          │ │              └ 'friend-1511695481'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │      │           │       └ None
          │      │           └ '木心是诗人吗'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b00e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b0400>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │ │              │           └ '木心是诗人吗'
          │ │              └ 'friend-1511695481'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │      │           │       └ None
          │      │           └ '木心是诗人吗'
          │      └ 'friend-1511695481'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b0400>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd37b0360>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b05e0>
          │ │              │           └ '木心是诗人吗'
          │ │              └ 'friend-1511695481'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-24530' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-24530' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe8fe69d0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '木心是诗人吗', 'chain': MessageChain([Plain(text='木心是诗人吗')]), 'name': '梧桐'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe8d17fd0>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '木心是诗人吗'
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fcbe8f251c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbe8cd9250>
                      └ <conversation.ConversationContext object at 0x7fcbe8d17fd0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 35, in ask
    response.raise_for_status()
    │        └ <function Response.raise_for_status at 0x7fcc1ea43a60>
    └ <Response [500 Internal Server Error]>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 749, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
          │               │                │                 └ <Response [500 Internal Server Error]>
          │               │                └ <Request('POST', 'http://192.168.31.117:8000')>
          │               └ "Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: https://httpstatu...
          └ <class 'httpx.HTTPStatusError'>

httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-24 09:02:42.304 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-24 09:03:12.271 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-24 09:03:12.276 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-24 09:03:12.277 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-24 09:03:37.961 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=ee0d00bf554227c7b605ff7bf9457759.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3076294440-EE0D00BF554227C7B605FF7BF9457759/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 09:34:22.858 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=acfdfc6586494096dfea3a38488937f6.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2738645714-ACFDFC6586494096DFEA3A38488937F6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 09:43:29.752 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：毒  打（原因：不符合触发前缀）
2023-07-24 09:48:47.719 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:json,data={"ver":"1.0.0.19"&#44;"desc":"电影中「将碎纸机吐出的碎片拼接起来找线索」的情节在现实中可能吗？"&#44;"prompt":"&#91;QQ小程序&#93;电影中「将碎纸机吐出的碎片拼接起来找线索」的情节在现实中可能吗？"&#44;"config":{"type":"normal"&#44;"width":0&#44;"height":0&#44;"forward":1&#44;"autoSize":0&#44;"ctime":1690192124&#44;"token":"20e1c4ed95d87c1e71f6612a33d0f124"}&#44;"needShareCallBack":false&#44;"app":"com.tencent.miniapp_01"&#44;"view":"view_8C8E89B49BE609866298ADDFF2DBABA4"&#44;"meta":{"detail_1":{"appid":"1110081493"&#44;"appType":0&#44;"title":"电影中「将碎纸机吐出的碎片拼接起来找线索」的情节在现实中可能吗？"&#44;"desc":"路何求的回答，52 人赞同"&#44;"icon":"https:\/\/p.qpic.cn\/qqconnect\/0\/app_100490701_1610444834\/100?max-age=2592000&amp;t=0"&#44;"preview":"pic1.zhimg.com\/v2-604bdcbc52bd756a3f961dbf76b5711d.jpg?source=745634e6"&#44;"url":"m.q.qq.com\/a\/s\/45f73f0175f7dae9ce6cf9dda8638d84"&#44;"scene":1036&#44;"host":{"uin":767206840&#44;"nick":"西园寺萌纸"}&#44;"shareTemplateId":"8C8E89B49BE609866298ADDFF2DBABA4"&#44;"shareTemplateData":{}&#44;"qqdocurl":"https:\/\/www.zhihu.com\/question\/20101964\/answer\/3006127897?utm_campaign=&amp;utm_medium=social&amp;utm_oi=619553725208072192&amp;utm_psn=1666867256293318657&amp;utm_source=qq"&#44;"showLittleTail":""&#44;"gamePoints":""&#44;"gamePointsUrl":""}}}]（原因：不符合触发前缀）
2023-07-24 09:52:20.169 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=f6c1663c58ce0de8afc1f82fedc7ccd9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3074118616-F6C1663C58CE0DE8AFC1F82FEDC7CCD9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 10:33:41.250 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=78ef98881cbf4b8ea2e89cfa3b99e551.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1242869479/3812763301-2670459224-78EF98881CBF4B8EA2E89CFA3B99E551/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 11:54:24.896 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=e6b716bc9e75bb1f893933f7df308db2.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2559981892-E6B716BC9E75BB1F893933F7DF308DB2/0?term=2&amp;is_origin=0][CQ:at,qq=767206840] 找到了（原因：不符合触发前缀）
2023-07-24 11:54:38.076 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2241295194-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 11:57:20.733 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:forward,id=3Ail8U35Uh1YaPbKz5lG3RQMCVYHZ/SHb5csOQLGlzOWwKm7ygIpF5lQq96GE+Z/]（原因：不符合触发前缀）
2023-07-24 11:57:26.603 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：就这个想到的（原因：不符合触发前缀）
2023-07-24 11:58:08.863 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：是的咧（原因：不符合触发前缀）
2023-07-24 11:58:12.020 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：捏（原因：不符合触发前缀）
2023-07-24 12:50:53.330 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=437d5c6dc9168268f37aef6313b6d13a.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-3120376134-437D5C6DC9168268F37AEF6313B6D13A/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 13:15:50.953 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=ef76a77e3b232c532d038e8d57091565.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3048449316-EF76A77E3B232C532D038E8D57091565/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 13:23:09.132 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=b0d2c225e261239c6cd14db2aa5a9a43.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2864779002-B0D2C225E261239C6CD14DB2AA5A9A43/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 13:23:17.795 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：让丝瓜来改编小星星（原因：不符合触发前缀）
2023-07-24 13:52:26.179 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：现在克雷贝尔都不能一枪头了啊（原因：不符合触发前缀）
2023-07-24 13:52:49.386 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我宣布（原因：不符合触发前缀）
2023-07-24 13:53:03.234 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：中等体积的itx机箱就是↑↓（原因：不符合触发前缀）
2023-07-24 13:53:08.134 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2185878160-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 14:06:52.642 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：ITX玩了一会儿也就那么回事（原因：不符合触发前缀）
2023-07-24 14:07:38.110 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：真便携还得笔记本（原因：不符合触发前缀）
2023-07-24 14:13:25.382 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=6f850dcc117577f7c19030d4693a961a.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3068047852-6F850DCC117577F7C19030D4693A961A/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 14:13:27.015 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：乐（原因：不符合触发前缀）
2023-07-24 14:36:29.564 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=f8e4d6a1b65bbce9deef316e453dd962.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2648320108-F8E4D6A1B65BBCE9DEEF316E453DD962/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 14:39:46.737 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：草（原因：不符合触发前缀）
2023-07-24 14:40:02.912 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：给你机会你不中用啊.jpg（原因：不符合触发前缀）
2023-07-24 15:10:25.776 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：烘干机是好东西（原因：不符合触发前缀）
2023-07-24 15:36:15.689 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=d8f4f98e6aa4e491d6c611c044ea2835.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2779356320-D8F4F98E6AA4E491D6C611C044EA2835/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 15:39:36.386 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：双 保 险（原因：不符合触发前缀）
2023-07-24 15:42:35.376 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=fe54d059c2cbbce4ab1d6fc97d75bf55.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-3166715066-FE54D059C2CBBCE4AB1D6FC97D75BF55/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 15:45:37.377 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=a61fee5a8099679898eb4cc2a8ad05f3.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2333057762-A61FEE5A8099679898EB4CC2A8AD05F3/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 15:48:51.571 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=fe54d059c2cbbce4ab1d6fc97d75bf55.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2250612160-FE54D059C2CBBCE4AB1D6FC97D75BF55/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-24 15:49:01.980 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：pay（原因：不符合触发前缀）
2023-07-24 15:52:51.655 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=b861b3f64828ea36d47e2d65170138e7.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2964753024-B861B3F64828EA36D47E2D65170138E7/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-24 15:54:51.777 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我是真顶不住喂猫母人（原因：不符合触发前缀）
2023-07-24 15:55:47.481 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我为数不多想搞钱的理由就是跟某些人群实现地理隔离（原因：不符合触发前缀）
2023-07-25 00:04:59.245 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2299651120-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 00:36:41.426 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3846906ea3ded1fabbf1a98c891527fb.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2468526424-3846906EA3DED1FABBF1A98C891527FB/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 00:41:03.259 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2e2703b2f9f5c3af66b379094ab89d48.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1927734639/3812763301-2650801744-2E2703B2F9F5C3AF66B379094AB89D48/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 00:41:06.441 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：洛阳出租（原因：不符合触发前缀）
2023-07-25 00:42:14.646 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：洛阳 大单子啊（原因：不符合触发前缀）
2023-07-25 02:44:13.946 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=9e2894c56118887161368bd4a1c650a2.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2482183702-9E2894C56118887161368BD4A1C650A2/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-25 02:55:44.475 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2810593040-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 03:19:05.276 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:at,qq=1109147357] 硬盘家里人拿走了，应该今天就给你发出去了（原因：不符合触发前缀）
2023-07-25 03:21:01.698 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2857387898-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 03:21:13.065 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：东风快递是吧（原因：不符合触发前缀）
2023-07-25 03:42:51.354 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=75739394b22ad7dc5c53042c777e81a8.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2854525132-75739394B22AD7DC5C53042C777E81A8/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 03:42:59.240 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：观音未来（原因：不符合触发前缀）
2023-07-25 03:43:14.092 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=81eaeb95744f96a6d0cc485b49f9491d.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2396154078-81EAEB95744F96A6D0CC485B49F9491D/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 04:00:47.416 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：【最新奥迪A4广告-哔哩哔哩】 https://b23.tv/h3EVnkQ（原因：不符合触发前缀）
2023-07-25 04:38:41.584 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：X200风扇坏了（原因：不符合触发前缀）
2023-07-25 04:38:43.247 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：怎么修（原因：不符合触发前缀）
2023-07-25 04:42:16.425 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=282d9f4fe2e3287b0bf7b8ab63299ca2.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-3163308840-282D9F4FE2E3287B0BF7B8AB63299CA2/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 04:44:10.002 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：坏  模（原因：不符合触发前缀）
2023-07-25 05:16:33.424 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：换个总成（原因：不符合触发前缀）
2023-07-25 05:30:51.008 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=4911be2f06e705ab1c822db496299bae.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2402122580-4911BE2F06E705AB1C822DB496299BAE/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 05:54:44.618 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：懂了，没有维修价值（原因：不符合触发前缀）
2023-07-25 06:05:54.163 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=619c7e2082e91d396a17c01cc30122d8.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2780301948-619C7E2082E91D396A17C01CC30122D8/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 06:09:24.874 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：换个风扇总成（原因：不符合触发前缀）
2023-07-25 06:09:35.709 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2494051910-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 06:11:23.238 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=ca0355cfb13dd5d02f51fa3268092ffa.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2616244416-CA0355CFB13DD5D02F51FA3268092FFA/0?term=2&amp;is_origin=0]这个吗（原因：不符合触发前缀）
2023-07-25 06:39:49.443 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：有两种（原因：不符合触发前缀）
2023-07-25 06:39:57.506 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：换带热管的那种嘛（原因：不符合触发前缀）
2023-07-25 06:40:06.511 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：主要是风扇分松下和东芝的（原因：不符合触发前缀）
2023-07-25 06:40:16.818 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：对应的热管都不一样（原因：不符合触发前缀）
2023-07-25 07:16:42.339 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：https://item.taobao.com/item.htm?spm=a21n57.1.0.0.cec8523ctcMZGO&amp;id=524271037644&amp;ns=1&amp;abbucket=8#detail（原因：不符合触发前缀）
2023-07-25 07:16:43.054 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这个呢（原因：不符合触发前缀）
2023-07-25 07:26:25.824 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：可以（原因：不符合触发前缀）
2023-07-25 07:42:17.831 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=77f4b519cf36ccc2da412339fd48dc67.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-3113676638-77F4B519CF36CCC2DA412339FD48DC67/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 07:42:21.039 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：贵，下个月再买（原因：不符合触发前缀）
2023-07-25 07:54:19.945 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=f9ed8ae6cd7696021c70825132513e75.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2477763318-F9ED8AE6CD7696021C70825132513E75/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 08:34:48.057 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:at,qq=767206840] stuck key又是什么报错（原因：不符合触发前缀）
2023-07-25 08:35:21.998 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：那个键卡住了（原因：不符合触发前缀）
2023-07-25 08:35:24.684 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：sucks（原因：不符合触发前缀）
2023-07-25 08:36:11.815 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：键盘都扬了（原因：不符合触发前缀）
2023-07-25 08:36:26.153 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=03aff2d5f2355f151259b3dbf61af5f4.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2848622356-03AFF2D5F2355F151259B3DBF61AF5F4/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 08:39:07.517 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2515369444-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 08:43:49.391 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=5e489de01f1b59b7e76dbc49bb278730.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2665768024-5E489DE01F1B59B7E76DBC49BB278730/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 08:43:54.185 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：水泥新高度（原因：不符合触发前缀）
2023-07-25 08:44:04.188 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：犹 抱 琵 琶 半 遮 面（原因：不符合触发前缀）
2023-07-25 08:45:14.637 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：极限一换一（原因：不符合触发前缀）
2023-07-25 08:45:39.349 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：主要rm不把锁扣打开硬拔，我觉得8怪水泥（原因：不符合触发前缀）
2023-07-25 08:46:01.503 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：确实（原因：不符合触发前缀）
2023-07-25 08:46:03.404 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我才发现（原因：不符合触发前缀）
2023-07-25 08:46:06.779 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：日嘛人才（原因：不符合触发前缀）
2023-07-25 08:55:55.383 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:at,qq=2938386137] 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语
안녕하세요. 모험가 여러분
던파모바일 디렉터 옥성태입니다.
 
최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여
주말까지 점검이 지속되었고 원활한 플레이를 제공해 드리지 못했습니다.
 
오늘 추가로 이야기 드리고 싶은 내용이 있어서 추가로 개발자 노트를 준비했습니다.
 
◾ 스킬 교체 시스템 기능 개선                                                                                                                                         
7월 20일(목) 개발자 노트를 통해서 이야기드렸던 스킬 교체 시스템 개선이 7월 27일(목) 업데이트 될 예정입니다.
이번 개선을 통해서 기존 비 무큐 스킬을 교체하는 시스템에서 45레벨 무큐 스킬까지 포함하게 될 예정입니다.
또한 다음 주 업데이트에서 전반적인 UI 비주얼 향상 및 아수라&#91;살의의파동&#93;같은 트리거 스킬을 제외하는 패치가 또 한 번 이루어질 예정입니다.
 
◾ 에픽 아이템 성능 개편                                                                                                                                                     
에픽 아이템의 성능에 대해서 많은 이야기를 주시고 있는 부분에 대해서 인지하고 있으며,
기존 60제 에픽 아이템과 비교해 보면, 65제 장비는 돌파를 하지 않을 경우 교체 메리트가 부족한 부분이 있었습니다.
이에 파밍 초기 단계의 아이템 교체 메리트를 개선하기 위해 방어구 세트 아이템 옵션 중 2세트 옵션을 기존보다 상향하여 가능한 자연스럽게 교체를 하실 수 있도록 옵션을 상향할 예정입니다.
또한, 일부 무기의 경우는 속성 부여를 교체하거나 강제할 수 있는 부분에 대한 우려를 많이 주시고 있는데요.
무기의 경우 보유하고 있는 고유 속성은 유지하되 속성 강화 혹은 속성 추가 데미지의 옵션들을
모든 속성으로 교체하여 세팅에 자유도를 드릴 예정입니다.
 
◾ 상급 지역 추가 개선                                                                                                                                                     
이번 불의 길 업데이트 이후 많은 모험가님들께서 파밍 동선에 대해서 이야기하고 계신데요.
그중 특히 상급 지역에 대해서 이야기를 많이 나누고 있습니다.
상급 지역은 구역별로 클리어할 수 있는 항마력이 다르게 표시되며 후반 구역은 항마력 요구치가 매우 높은 던전입니다.
이는 지속적으로 플레이 및 성장을 하시면서 차후 SSS랭크에 대한 추가적인 도전을 진행하며 성장 단계를 체감하실 수 있도록 하기 위해서 이러한 방식으로 목표를 잡았습니다만,
실제 플레이에서 해당 구간을 넘어가지 못하는 경우를 확인하고 있어 일부 타임어택 / 몬스터 러쉬 형식의 던전들의 재조정을 진행하고 있습니다.
또한 원활한 SSS랭크를 달성하기 위한 추가적인 항마력 표기를 같이 진행할 예정입니다.
이러한 조절 과정에서 상급 지역의 챔피언 / 보스 몬스터는 패링을 통해서 부족한 데미지를 일부 보완이 가능했고, 일반 구역의 보스는 패링 패턴을 가지고 있지 않아 되려 힘든 경우 또한 확인을 하였습니다.
이 부분은 일반 구역의 난이도를 하향하여 상급 지역 플레이에 스트레스를 줄여 드리고자 합니다.
다만, 이러한 전반적인 조절이 진행되더라도 상급 지역 콘텐츠는 항마력 성장에 맞춰 높은 항마력을 요구하는 모험단 콘텐츠로 제작이 되어 있기 때문에 항마력에 맞춰 던전을 플레이하시길 권장 드립니다.
 
마지막으로 최고 레벨 성장 이후 추가적인 성장에 대해서 가이드가 부족한 부분도 확인하였고,
상급 지역에 진입하실 수 있도록 UI에 말풍선 형태의 알림 가이드를 추가할 계획입니다.
이러한 가이드는 상급 지역 파워스테이션의 달성률이 특정 시점을 넘어가면 노출되지 않도록 할 예정이며 초기 최고 레벨 달성 이후 신규 모험가분들께 가이드를 드릴 예정입니다.
 
이번 업데이트에서 새로운 변화를 위해 많은 것을 준비하려고 노력하다 보니, 이 과정에서 의도치 않게 여러 불편함을 드리게 되었습니다. 진심으로 죄송하다는 말씀드립니다.
 
지난 주말 동안 상급 지역을 플레이하시면서 불편을 겪으신 모험가분들께는 해당 내용을 검토하여 순차적으로 보상을 지급해 드릴 예정입니다.
&#91;간헐적으로 상급 지역의 스페셜 던전 진행이 불가능한 현상 안내&#93;
 
가능한 많은 모험가분들이 앞으로도 재미있는 던파모바일을 플레이할 수 있는 환경을 만들기 위해 최선을 다하겠습니다.
 
항상 감사드립니다.
옥성태 드림（原因：不符合触发前缀）
2023-07-25 08:57:55.592 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2268403282-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 08:59:10.187 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2625657240-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 08:59:46.463 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：没开服（原因：不符合触发前缀）
2023-07-25 09:00:00.630 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：X200现在开始无限蓝屏（原因：不符合触发前缀）
2023-07-25 09:01:42.678 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：你干了什么捏（原因：不符合触发前缀）
2023-07-25 09:03:13.075 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：重置了下bios（原因：不符合触发前缀）
2023-07-25 09:03:45.624 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2417379632-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:03:56.549 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：看看硬盘模式是不是变成兼容了（原因：不符合触发前缀）
2023-07-25 09:05:01.790 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：不  兼  容（原因：不符合触发前缀）
2023-07-25 09:05:38.184 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=61cbf65a2b8cb94e9267e5716029deb6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2792145144-61CBF65A2B8CB94E9267E5716029DEB6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:06:40.256 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：I D E（原因：不符合触发前缀）
2023-07-25 09:08:22.118 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：改之前是AHCI（原因：不符合触发前缀）
2023-07-25 09:08:25.392 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：古  老（原因：不符合触发前缀）
2023-07-25 09:08:56.517 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=a676a5c24b7b5cdb80ebf768273d22a6.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2500867312-A676A5C24B7B5CDB80EBF768273D22A6/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:14:05.923 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 09:14:05.924 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:14:05.925 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:14:05.927 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:14:05.937 | DEBUG    | conversation:check_and_reset:252 - Reset conversation(friend-1109147357) after 176212.9286761284 seconds.
2023-07-25 09:14:06.008 | DEBUG    | conversation:check_and_reset:254 - 会话已重置。
2023-07-25 09:14:11.093 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:14:11.096 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：哇！你好呀！我是莉莉，一个17岁的女孩子~ 很开心能和你聊天！有什么我可以帮助你的吗？😊
2023-07-25 09:14:11.148 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:14:51.000 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你好~
2023-07-25 09:14:51.000 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:14:51.000 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:14:51.001 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:14:55.927 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:14:55.928 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嘿嘿~你好呀！欢迎和可爱的莉莉小姐聊天！有什么我可以帮助你的吗？ヽ(○^㉨^)ﾉ
2023-07-25 09:14:55.995 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:14:56.000 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：换成ahci（原因：不符合触发前缀）
2023-07-25 09:17:50.082 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：兼容才能用，AHCI是寄的（原因：不符合触发前缀）
2023-07-25 09:18:09.710 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:at,qq=69963215] 用二号机（原因：不符合触发前缀）
2023-07-25 09:18:13.207 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：没打驱动（原因：不符合触发前缀）
2023-07-25 09:18:15.105 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 喵
2023-07-25 09:18:15.159 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:18:15.159 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:18:15.193 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:18:16.591 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=280ff5bc488f6463e1fc75c4b70a447e.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2496857226-280FF5BC488F6463E1FC75C4B70A447E/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:18:19.417 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:18:19.417 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：喵喵~你好呀！我是莉莉，一个可爱的17岁少女，很高兴和你聊天喵！有什么我可以帮到你的喵？
2023-07-25 09:18:19.803 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:18:48.243 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语
안녕하세요. 모험가 여러분
던파모바일 디렉터 옥성태입니다.
 
최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여
주말까지 점검이 지속되었고 원활한 플레이를 제공해 드리지 못했습니다.
 
오늘 추가로 이야기 드리고 싶은 내용이 있어서 추가로 개발자 노트를 준비했습니다.
 
◾ 스킬 교체 시스템 기능 개선                                                                                                                                         
7월 20일(목) 개발자 노트를 통해서 이야기드렸던 스킬 교체 시스템 개선이 7월 27일(목) 업데이트 될 예정입니다.
이번 개선을 통해서 기존 비 무큐 스킬을 교체하는 시스템에서 45레벨 무큐 스킬까지 포함하게 될 예정입니다.
또한 다음 주 업데이트에서 전반적인 UI 비주얼 향상 및 아수라&#91;살의의파동&#93;같은 트리거 스킬을 제외하는 패치가 또 한 번 이루어질 예정입니다.
 
◾ 에픽 아이템 성능 개편                                                                                                                                                     
에픽 아이템의 성능에 대해서 많은 이야기를 주시고 있는 부분에 대해서 인지하고 있으며,
기존 60제 에픽 아이템과 비교해 보면, 65제 장비는 돌파를 하지 않을 경우 교체 메리트가 부족한 부분이 있었습니다.
이에 파밍 초기 단계의 아이템 교체 메리트를 개선하기 위해 방어구 세트 아이템 옵션 중 2세트 옵션을 기존보다 상향하여 가능한 자연스럽게 교체를 하실 수 있도록 옵션을 상향할 예정입니다.
또한, 일부 무기의 경우는 속성 부여를 교체하거나 강제할 수 있는 부분에 대한 우려를 많이 주시고 있는데요.
무기의 경우 보유하고 있는 고유 속성은 유지하되 속성 강화 혹은 속성 추가 데미지의 옵션들을
모든 속성으로 교체하여 세팅에 자유도를 드릴 예정입니다.
 
◾ 상급 지역 추가 개선                                                                                                                                                     
이번 불의 길 업데이트 이후 많은 모험가님들께서 파밍 동선에 대해서 이야기하고 계신데요.
그중 특히 상급 지역에 대해서 이야기를 많이 나누고 있습니다.
상급 지역은 구역별로 클리어할 수 있는 항마력이 다르게 표시되며 후반 구역은 항마력 요구치가 매우 높은 던전입니다.
이는 지속적으로 플레이 및 성장을 하시면서 차후 SSS랭크에 대한 추가적인 도전을 진행하며 성장 단계를 체감하실 수 있도록 하기 위해서 이러한 방식으로 목표를 잡았습니다만,
실제 플레이에서 해당 구간을 넘어가지 못하는 경우를 확인하고 있어 일부 타임어택 / 몬스터 러쉬 형식의 던전들의 재조정을 진행하고 있습니다.
또한 원활한 SSS랭크를 달성하기 위한 추가적인 항마력 표기를 같이 진행할 예정입니다.
이러한 조절 과정에서 상급 지역의 챔피언 / 보스 몬스터는 패링을 통해서 부족한 데미지를 일부 보완이 가능했고, 일반 구역의 보스는 패링 패턴을 가지고 있지 않아 되려 힘든 경우 또한 확인을 하였습니다.
이 부분은 일반 구역의 난이도를 하향하여 상급 지역 플레이에 스트레스를 줄여 드리고자 합니다.
다만, 이러한 전반적인 조절이 진행되더라도 상급 지역 콘텐츠는 항마력 성장에 맞춰 높은 항마력을 요구하는 모험단 콘텐츠로 제작이 되어 있기 때문에 항마력에 맞춰 던전을 플레이하시길 권장 드립니다.
 
마지막으로 최고 레벨 성장 이후 추가적인 성장에 대해서 가이드가 부족한 부분도 확인하였고,
상급 지역에 진입하실 수 있도록 UI에 말풍선 형태의 알림 가이드를 추가할 계획입니다.
이러한 가이드는 상급 지역 파워스테이션의 달성률이 특정 시점을 넘어가면 노출되지 않도록 할 예정이며 초기 최고 레벨 달성 이후 신규 모험가분들께 가이드를 드릴 예정입니다.
 
이번 업데이트에서 새로운 변화를 위해 많은 것을 준비하려고 노력하다 보니, 이 과정에서 의도치 않게 여러 불편함을 드리게 되었습니다. 진심으로 죄송하다는 말씀드립니다.
 
지난 주말 동안 상급 지역을 플레이하시면서 불편을 겪으신 모험가분들께는 해당 내용을 검토하여 순차적으로 보상을 지급해 드릴 예정입니다.
&#91;간헐적으로 상급 지역의 스페셜 던전 진행이 불가능한 현상 안내&#93;
 
가능한 많은 모험가분들이 앞으로도 재미있는 던파모바일을 플레이할 수 있는 환경을 만들기 위해 최선을 다하겠습니다.
 
항상 감사드립니다.
옥성태 드림
2023-07-25 09:18:48.245 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:18:48.245 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:18:48.247 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:19:18.251 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:19:18.262 | ERROR    | platforms.onebot_bot:respond:121 - <ActionFailed data=None, echo={'seq': 176}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 57, in create_timeout_task
    respond_msg = await respond(config.response.timeout_format)
                        │       │      │        └ '我还在思考中，请再等一下~'
                        │       │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
                        │       └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
                        └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 72, in respond
    ret = await _respond(msg)
                │        └ '我还在思考中，请再等一下~'
                └ <function response.<locals>.respond at 0x7fcbd3773ce0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 119, in respond
    return await bot.send(event, resp)
                 │   │    │      └ [{'type': 'reply', 'data': {'id': '-553941067'}}, {'type': 'text', 'data': {'text': '我还在思考中，请再等一下~'}}]
                 │   │    └ <Event, {'post_type': 'message', 'message_type': 'group', 'time': 1690276728, 'self_id': 1654613655, 'sub_type': 'normal', 'u...
                 │   └ <function CQHttp.send at 0x7fcbe9549a80>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 269, in send
    return await self.send_msg(**params)
                 │               └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-55394106...
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 236, in call_action
    return await self._api.call_action(action=action, **params)
                 │    │    │                  │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-55394106...
                 │    │    │                  └ 'send_msg'
                 │    │    └ <function UnifiedApi.call_action at 0x7fcbe952e160>
                 │    └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 178, in call_action
    result = await self._wsr_api.call_action(action, **params)
                   │    │        │           │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-55394106...
                   │    │        │           └ 'send_msg'
                   │    │        └ <function WebSocketReverseApi.call_action at 0x7fcbe952e020>
                   │    └ <aiocqhttp.api_impl.WebSocketReverseApi object at 0x7fcbe8cc4610>
                   └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 153, in call_action
    return _handle_api_result(await
           └ <function _handle_api_result at 0x7fcbe952ce00>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 38, in _handle_api_result
    raise ActionFailed(result=result)
          │                   └ {'data': None, 'echo': {'seq': 176}, 'message': 'send group message failed: blocked by server', 'msg': 'SEND_MSG_API_ERROR', ...
          └ <class 'aiocqhttp.exceptions.ActionFailed'>

aiocqhttp.exceptions.ActionFailed: <ActionFailed data=None, echo={'seq': 176}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
2023-07-25 09:19:18.306 | WARNING  | platforms.onebot_bot:respond:122 - 原始消息发送失败，尝试通过转发发送
2023-07-25 09:19:19.211 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:19:19.212 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:19:24.135 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:reply,id=2027533383][CQ:at,qq=767206840] 但是改了系统都进不去（原因：不符合触发前缀）
2023-07-25 09:19:51.011 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。

自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。

今天有一些额外的内容想要和大家分享，所以我准备了开发者笔记。

◾ 技能转换系统功能改进
7月27日（星期四）将更新技能转换系统的改进，该改进已在7月20日的开发者笔记中透露。这次改进将使得转换系统从原本只适用于非职业技能到适用于等级45的职业技能。同时，在下周的更新中，还将进行整体用户界面优化和删除一些触发技能（例如阿修罗的"杀意波动"）的修补。

◾ 史诗装备性能改动
我们已经注意到有关史诗装备性能的许多讨论，与60级史诗装备相比，65级装备在不突破的情况下换装的价值不足之处。因此，为了改善早期转换装备的价值，我们将提升防具套装选项中的2件套装选项，以更自然地进行转换。此外，对于一些武器，我们了解到大家对于更换属性或强制更换属性伤害选项的担忧。为此，我们将保留武器原有的独特属性，同时将属性强化或增加伤害选项更换为所有属性，以提供更多自由度。

◾ 高级区域改进
在“烈火之路”更新后，我们注意到很多冒险家们对于农场路径的讨论，特别是对于高级区域的讨论。高级区域在不同区域显示的最大抗魔力会有所不同，后期区域是要求非常高抗魔力的地下城。这样设计是为了让玩家在持续游戏和成长的过程中，有更多的机会挑战SSS级别，并体验到成长的过程。但是我们也注意到一些玩家无法通过该区域的情况，所以我们正在进行一些调整，以重新调整一些时间挑战/怪物团赛的地下城。此外，还计划在实现顺利的SSS级别挑战时提供更多抗魔力指示。

最后，我们也发现关于游戏最高等级后的额外成长指导不够完善的问题，所以计划在用户界面中添加气泡形式的通知指引，以帮助大家进入高级区域。这个指引会在超过一定时间后才会显示，并且专为达到最高等级后的新冒险家准备。

在努力准备这次更新的过程中，我们不经意间给大家带来了一些不便，真心向大家道歉。

在上周末玩高级区域时遇到不便的冒险家们，我们将仔细检查这个问题，并逐步给予补偿。
【高级区域特殊副本无法进行的间歇性故障说明】

为了让尽可能多的冒险家们
2023-07-25 09:19:51.016 | ERROR    | platforms.onebot_bot:respond:121 - <ActionFailed data=None, echo={'seq': 178}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 232, in request
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │      │           │       └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37732e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd3773740>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │ │              │           │        └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_respond at 0x7fcbe8ca8f40>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 12, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │      │           │       └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd3773740>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd3773420>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │ │              │           │        └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareBaiduCloud.handle_respond at 0x7fcbe8ca9a80>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/baiducloud.py", line 88, in handle_respond
    return await action(session_id, prompt, rendered, respond)
                 │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
                 │      │           │       └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
                 │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
                 │      └ 'group-322763301'
                 └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd3773420>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbe8cabec0>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │ │              │           │        └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_respond at 0x7fcbe8ca8f40>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 12, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │      │           │       └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbe8cabec0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.request.<locals>.<lambda> at 0x7fcbe8cab600>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │ │              │           │        └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_respond at 0x7fcbe8ca9ee0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 48, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773d80>
          │      │           │       └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.request.<locals>.<lambda> at 0x7fcbe8cab600>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 72, in respond
    ret = await _respond(msg)
                │        └ MessageChain([Plain(text='大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n...
                └ <function response.<locals>.respond at 0x7fcbd3773ce0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 119, in respond
    return await bot.send(event, resp)
                 │   │    │      └ [{'type': 'reply', 'data': {'id': '-553941067'}}, {'type': 'text', 'data': {'text': '大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩...
                 │   │    └ <Event, {'post_type': 'message', 'message_type': 'group', 'time': 1690276728, 'self_id': 1654613655, 'sub_type': 'normal', 'u...
                 │   └ <function CQHttp.send at 0x7fcbe9549a80>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 269, in send
    return await self.send_msg(**params)
                 │               └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-55394106...
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 236, in call_action
    return await self._api.call_action(action=action, **params)
                 │    │    │                  │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-55394106...
                 │    │    │                  └ 'send_msg'
                 │    │    └ <function UnifiedApi.call_action at 0x7fcbe952e160>
                 │    └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 178, in call_action
    result = await self._wsr_api.call_action(action, **params)
                   │    │        │           │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-55394106...
                   │    │        │           └ 'send_msg'
                   │    │        └ <function WebSocketReverseApi.call_action at 0x7fcbe952e020>
                   │    └ <aiocqhttp.api_impl.WebSocketReverseApi object at 0x7fcbe8cc4610>
                   └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 153, in call_action
    return _handle_api_result(await
           └ <function _handle_api_result at 0x7fcbe952ce00>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 38, in _handle_api_result
    raise ActionFailed(result=result)
          │                   └ {'data': None, 'echo': {'seq': 178}, 'message': 'send group message failed: blocked by server', 'msg': 'SEND_MSG_API_ERROR', ...
          └ <class 'aiocqhttp.exceptions.ActionFailed'>

aiocqhttp.exceptions.ActionFailed: <ActionFailed data=None, echo={'seq': 178}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
2023-07-25 09:19:51.030 | WARNING  | platforms.onebot_bot:respond:122 - 原始消息发送失败，尝试通过转发发送
2023-07-25 09:19:51.997 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:19:59.110 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：这么长估计干到超时都翻译不完（原因：不符合触发前缀）
2023-07-25 09:20:08.158 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3a55d7816b8bea2959d292772f8b9c41.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2693434320-3A55D7816B8BEA2959D292772F8B9C41/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:20:19.441 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：哦效果还可以（原因：不符合触发前缀）
2023-07-25 09:20:20.136 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：rm有意思的（原因：不符合触发前缀）
2023-07-25 09:20:26.349 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：哪天把论文丢进来翻译（原因：不符合触发前缀）
2023-07-25 09:20:52.328 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：丢嘛，按说这玩意翻译论文非常顶（原因：不符合触发前缀）
2023-07-25 09:21:29.651 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3846906ea3ded1fabbf1a98c891527fb.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2473153896-3846906EA3DED1FABBF1A98C891527FB/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:21:37.303 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：就该拿来当翻译器（原因：不符合触发前缀）
2023-07-25 09:21:43.807 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：还能加额外要求（原因：不符合触发前缀）
2023-07-25 09:22:26.601 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on challenging programming tasks. Self-repair—in which the model debugs and fixes mistakes in its own code—has recently become a popular
way to boost performance in these settings. However, only very limited studies on
how and when self-repair works effectively exist in the literature, and one might
wonder to what extent a model is really capable of providing accurate feedback on
why the code is wrong when that code was generated by the same model. In this
paper, we analyze GPT-3.5 and GPT-4’s ability to perform self-repair on APPS,
a challenging dataset consisting of diverse coding challenges. To do so, we first
establish a new evaluation strategy dubbed pass@t that measures the pass rate of
the tasks against the total number of tokens sampled from the model, enabling a fair
comparison to purely sampling-based approaches. With this evaluation strategy, we
find that the effectiveness of self-repair is only seen in GPT-4. We also observe that
self-repair is bottlenecked by the feedback stage; using GPT-4 to give feedback on
the programs generated by GPT-3.5 and using expert human programmers to give
feedback on the programs generated by GPT-4, we unlock significant performance
gains.
2023-07-25 09:22:26.601 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:22:26.601 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:22:26.602 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:22:27.453 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 183, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3771800>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │      │           │       └ None
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3771800>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773ec0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │      │           │       └ None
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773ec0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773560>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │      │           │       └ None
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773560>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3773b00>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37737e0>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43034' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43034' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe96ba510>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still ...
                        │     └ (<conversation.ConversationContext object at 0x7fcbd371a950>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function PlainTextRenderer.render at 0x7fcbe8c7e8e0>
                │    └ <renderer.renderer.PlainTextRenderer object at 0x7fcbd3719750>
                └ <conversation.ConversationContext object at 0x7fcbd371a950>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 35, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fcbe8f256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fcbd371a650>
                 │    │           └ <renderer.renderer.PlainTextRenderer object at 0x7fcbd3719750>
                 │    └ <function PlainTextRenderer.parse at 0x7fcbe8c7e840>
                 └ <renderer.renderer.PlainTextRenderer object at 0x7fcbd3719750>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fcbe8c7f2e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbd371a110>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fcbd371a650>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbd371a110>
    │    │                 └ None
    │    └ '大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n今天有一些额外的内容想要和大家分享，所以我准备了开...
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbd371a110>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-25 09:22:27.465 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-25 09:22:49.458 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3a55d7816b8bea2959d292772f8b9c41.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2446666578-3A55D7816B8BEA2959D292772F8B9C41/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:22:52.513 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：宕机了？（原因：不符合触发前缀）
2023-07-25 09:22:56.604 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:22:57.136 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:22:57.137 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:23:05.754 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：也，又烧了（原因：不符合触发前缀）
2023-07-25 09:24:17.896 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=096c32c3c66dc58d6ca7430948e9afae.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2607958748-096C32C3C66DC58D6CA7430948E9AFAE/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:24:22.994 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2540456866-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:24:38.418 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 重置会话
2023-07-25 09:24:38.419 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:24:38.419 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:24:38.420 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:24:38.517 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:24:38.517 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：会话已重置。
2023-07-25 09:24:38.987 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:24:54.432 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655]  翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on challenging programming tasks. Self-repair—in which the model debugs and fixes mistakes in its own code—has recently become a popular
way to boost performance in these settings. However, only very limited studies on
how and when self-repair works effectively exist in the literature, and one might
wonder to what extent a model is really capable of providing accurate feedback on
why the code is wrong when that code was generated by the same model. In this
paper, we analyze GPT-3.5 and GPT-4’s ability to perform self-repair on APPS,
a challenging dataset consisting of diverse coding challenges. To do so, we first
establish a new evaluation strategy dubbed pass@t that measures the pass rate of
the tasks against the total number of tokens sampled from the model, enabling a fair
comparison to purely sampling-based approaches. With this evaluation strategy, we
find that the effectiveness of self-repair is only seen in GPT-4. We also observe that
self-repair is bottlenecked by the feedback stage; using GPT-4 to give feedback on
the programs generated by GPT-3.5 and using expert human programmers to give
feedback on the programs generated by GPT-4, we unlock significant performance
gains.
2023-07-25 09:24:54.435 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:24:54.435 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:24:54.437 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:24:55.345 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 183, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1440>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1a80>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │      │           │       └ None
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1a80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2e80>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │      │           │       └ None
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2e80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1760>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │      │           │       └ None
          │      │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1760>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd37b2ca0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773880>
          │ │              │           └ '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43126' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43126' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe96ba3e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still ...
                        │     └ (<conversation.ConversationContext object at 0x7fcbd371a950>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function PlainTextRenderer.render at 0x7fcbe8c7e8e0>
                │    └ <renderer.renderer.PlainTextRenderer object at 0x7fcbd3719750>
                └ <conversation.ConversationContext object at 0x7fcbd371a950>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 35, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fcbe8f256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fcbd371a650>
                 │    │           └ <renderer.renderer.PlainTextRenderer object at 0x7fcbd3719750>
                 │    └ <function PlainTextRenderer.parse at 0x7fcbe8c7e840>
                 └ <renderer.renderer.PlainTextRenderer object at 0x7fcbd3719750>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fcbe8c7f2e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbd371a110>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fcbd371a650>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbd371a110>
    │    │                 └ None
    │    └ '大家好，冒险家们！我是《地下城与勇士》手机版的导演奥成泰。\n\n自从最高等级扩展更新之后，由于一些错误导致我们无法继续给大家带来乐趣，所以维护一直延续到了周末，未能顺利提供流畅的游戏体验。\n\n今天有一些额外的内容想要和大家分享，所以我准备了开...
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbd371a110>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-25 09:24:55.357 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-25 09:24:57.775 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=d2fbf4e9daa2f2224445c817cbb08ef9.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/214440648/3812763301-2947415142-D2FBF4E9DAA2F2224445C817CBB08EF9/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:25:24.443 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:25:24.937 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:25:24.938 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:25:32.429 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：怪（原因：不符合触发前缀）
2023-07-25 09:25:35.630 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2189232898-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:26:10.663 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 09:26:10.663 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:26:10.663 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:26:10.664 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:26:11.596 | ERROR    | universal:handle_message:295 - 'NoneType' object has no attribute 'removeprefix'
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2c00>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1940>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1940>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b18a0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b18a0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b32e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b32e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd37b2fc0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b2d40>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43177' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43177' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe8fe6c30>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '1', 'chain': MessageChain([Plain(text='1')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe97caf90>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 199, in ask
    yield await self.renderer.render(item)
                │    │        │      └ None
                │    │        └ <function PlainTextRenderer.render at 0x7fcbe8c7e8e0>
                │    └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>
                └ <conversation.ConversationContext object at 0x7fcbe97caf90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/renderer.py", line 35, in render
    return await self.parse(await self.parent.render(msg))
                 │    │           │    │      │      └ None
                 │    │           │    │      └ <function BufferedContentMerger.render at 0x7fcbe8f256c0>
                 │    │           │    └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8cde210>
                 │    │           └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>
                 │    └ <function PlainTextRenderer.parse at 0x7fcbe8c7e840>
                 └ <renderer.renderer.PlainTextRenderer object at 0x7fcbe8cde010>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/merger.py", line 31, in render
    rendered = await self.parent.render(msg)
                     │    │      │      └ None
                     │    │      └ <function MultipleSegmentSplitter.render at 0x7fcbe8c7f2e0>
                     │    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>
                     └ <renderer.merger.BufferedContentMerger object at 0x7fcbe8cde210>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/renderer/splitter.py", line 11, in render
    self.uncommitted_msg = msg.removeprefix(self.last_commit)
    │    │                 │                │    └ ''
    │    │                 │                └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>
    │    │                 └ None
    │    └ '嘿嘿~你好呀！欢迎和可爱的莉莉小姐聊天！有什么我可以帮助你的吗？ヽ(○^㉨^)ﾉ'
    └ <renderer.splitter.MultipleSegmentSplitter object at 0x7fcbe8cde410>

AttributeError: 'NoneType' object has no attribute 'removeprefix'
2023-07-25 09:26:11.608 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
'NoneType' object has no attribute 'removeprefix'
2023-07-25 09:26:30.892 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 09:26:30.893 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:26:30.894 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:26:30.895 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:26:35.562 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:26:35.564 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嗨~我是莉莉，一个可爱俏皮的17岁少女！很高兴认识你！有什么我可以帮助你的吗？(*^▽^*)
2023-07-25 09:26:35.618 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:26:37.481 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语
안녕하세요. 모험가 여러분
던파모바일 디렉터 옥성태입니다.
 
최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여
주말까지 점검이 지속되었고 원활한 플레이를 제공해 드리지 못했습니다.
 
오늘 추가로 이야기 드리고 싶은 내용이 있어서 추가로 개발자 노트를 준비했습니다.
 
◾ 스킬 교체 시스템 기능 개선                                                                                                                                         
7월 20일(목) 개발자 노트를 통해서 이야기드렸던 스킬 교체 시스템 개선이 7월 27일(목) 업데이트 될 예정입니다.
이번 개선을 통해서 기존 비 무큐 스킬을 교체하는 시스템에서 45레벨 무큐 스킬까지 포함하게 될 예정입니다.
또한 다음 주 업데이트에서 전반적인 UI 비주얼 향상 및 아수라&#91;살의의파동&#93;같은 트리거 스킬을 제외하는 패치가 또 한 번 이루어질 예정입니다.
 
◾ 에픽 아이템 성능 개편                                                                                                                                                     
에픽 아이템의 성능에 대해서 많은 이야기를 주시고 있는 부분에 대해서 인지하고 있으며,
기존 60제 에픽 아이템과 비교해 보면, 65제 장비는 돌파를 하지 않을 경우 교체 메리트가 부족한 부분이 있었습니다.
이에 파밍 초기 단계의 아이템 교체 메리트를 개선하기 위해 방어구 세트 아이템 옵션 중 2세트 옵션을 기존보다 상향하여 가능한 자연스럽게 교체를 하실 수 있도록 옵션을 상향할 예정입니다.
또한, 일부 무기의 경우는 속성 부여를 교체하거나 강제할 수 있는 부분에 대한 우려를 많이 주시고 있는데요.
무기의 경우 보유하고 있는 고유 속성은 유지하되 속성 강화 혹은 속성 추가 데미지의 옵션들을
모든 속성으로 교체하여 세팅에 자유도를 드릴 예정입니다.
 
◾ 상급 지역 추가 개선                                                                                                                                                     
이번 불의 길 업데이트 이후 많은 모험가님들께서 파밍 동선에 대해서 이야기하고 계신데요.
그중 특히 상급 지역에 대해서 이야기를 많이 나누고 있습니다.
상급 지역은 구역별로 클리어할 수 있는 항마력이 다르게 표시되며 후반 구역은 항마력 요구치가 매우 높은 던전입니다.
이는 지속적으로 플레이 및 성장을 하시면서 차후 SSS랭크에 대한 추가적인 도전을 진행하며 성장 단계를 체감하실 수 있도록 하기 위해서 이러한 방식으로 목표를 잡았습니다만,
실제 플레이에서 해당 구간을 넘어가지 못하는 경우를 확인하고 있어 일부 타임어택 / 몬스터 러쉬 형식의 던전들의 재조정을 진행하고 있습니다.
또한 원활한 SSS랭크를 달성하기 위한 추가적인 항마력 표기를 같이 진행할 예정입니다.
이러한 조절 과정에서 상급 지역의 챔피언 / 보스 몬스터는 패링을 통해서 부족한 데미지를 일부 보완이 가능했고, 일반 구역의 보스는 패링 패턴을 가지고 있지 않아 되려 힘든 경우 또한 확인을 하였습니다.
이 부분은 일반 구역의 난이도를 하향하여 상급 지역 플레이에 스트레스를 줄여 드리고자 합니다.
다만, 이러한 전반적인 조절이 진행되더라도 상급 지역 콘텐츠는 항마력 성장에 맞춰 높은 항마력을 요구하는 모험단 콘텐츠로 제작이 되어 있기 때문에 항마력에 맞춰 던전을 플레이하시길 권장 드립니다.
 

2023-07-25 09:26:37.482 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:26:37.482 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:26:37.482 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:26:55.651 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：哦（原因：不符合触发前缀）
2023-07-25 09:27:03.839 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：他那个文本太长直接干烧了（原因：不符合触发前缀）
2023-07-25 09:27:07.485 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:27:07.991 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:27:07.992 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:27:19.509 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3a55d7816b8bea2959d292772f8b9c41.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2771167168-3A55D7816B8BEA2959D292772F8B9C41/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:27:25.019 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：能输入多少字（原因：不符合触发前缀）
2023-07-25 09:27:28.987 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：안녕하세요, 모험가 여러분!
我是DNF Mobile的导演Ok Sung Tae。

最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的乐趣。

今天我有一些额外的内容想要与大家分享，因此我们准备了开发者笔记。

◾ 技能替换系统改进
我们计划在7月27日（星期四）更新中改进之前在7月20日（星期四）开发者笔记中提到的技能替换系统。通过此次改进，我们将包括从低级别技能替换到45级技能替换的系统。在下次更新中，还将进行整体用户界面的视觉改善，并修复类似Asura[杀意波动]等触发技能的问题。

◾ 史诗物品性能改进
我们注意到一些人对史诗物品的性能进行了很多讨论。与60级史诗物品相比，65级装备如果不进行突破，其更换优势有些不足。
因此，我们计划提升2件套装备选项中的防御套装性能，以改善早期阶段更换装备的优势。此外，对于某些武器，我们注意到了人们对强化或替换属性的担忧。对于武器，我们将保留现有的唯一属性，但是可以更换所有属性，并提供更多自由选择。

◾ 高级区域改进
在“炽焰之路”更新后，我们注意到许多冒险家们对于经济策略有很多讨论，特别是对于高级区域。高级区域的每个区域都显示了不同的抵抗力要求，后半部分区域是要求非常高的地下城。
这样设计是为了让您在持续游戏和成长的过程中挑战SSS级别，并感受到成长阶段的改变。然而，我们注意到有些人无法在实际游戏中超越这一阶段，因此我们正在进行一些调整，以调整某些限定时间/怪物突袭式地下城的难度。同时，我们还计划与此同时提供更流畅的SSS级别指标显示。
在这个调整过程中，我们发现高级区域的冠军/首领怪物通过配对可以在某种程度上弥补伤害不足，而常规区域的首领怪物没有配对模式，因此更具挑战性。我们希望通过降低常规区域的难度来减轻高级区域游玩带来的压力。
然而，尽管进行了这些整体调整，高级区域内容仍然是一个面向高抵抗力成长要求的团队内容，因此我们建议您根据护盾抵抗力进度进行游戏。

希望这些翻译对你有帮助！如果有其他问题，随时问我哦~(*^▽^*)
2023-07-25 09:27:28.991 | ERROR    | platforms.onebot_bot:respond:121 - <ActionFailed data=None, echo={'seq': 201}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 232, in request
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │      │           │       └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │      │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b19e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b3100>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │ │              │           │        └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │ │              │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_respond at 0x7fcbe8ca8f40>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 12, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │      │           │       └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │      │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b3100>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b20c0>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │ │              │           │        └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │ │              │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareBaiduCloud.handle_respond at 0x7fcbe8ca9a80>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/baiducloud.py", line 88, in handle_respond
    return await action(session_id, prompt, rendered, respond)
                 │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
                 │      │           │       └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
                 │      │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
                 │      └ 'group-322763301'
                 └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b20c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b1080>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │ │              │           │        └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │ │              │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_respond at 0x7fcbe8ca8f40>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 12, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │      │           │       └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │      │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b1080>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.request.<locals>.<lambda> at 0x7fcbd3773600>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │ │              │           │        └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │ │              │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_respond at 0x7fcbe8ca9ee0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 48, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773e20>
          │      │           │       └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
          │      │           └ '翻译以下段落@小粉毛 帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.request.<locals>.<lambda> at 0x7fcbd3773600>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 72, in respond
    ret = await _respond(msg)
                │        └ MessageChain([Plain(text='안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung Tae。\n\n最高级别扩展更新后，由于一些错误，我们无法在周末之前提供顺利的游戏体验，尽管我们希望能给大家带来持续的...
                └ <function response.<locals>.respond at 0x7fcbd3773560>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 119, in respond
    return await bot.send(event, resp)
                 │   │    │      └ [{'type': 'reply', 'data': {'id': '-2100173600'}}, {'type': 'text', 'data': {'text': '안녕하세요, 모험가 여러분!\n我是DNF Mobile的导演Ok Sung...
                 │   │    └ <Event, {'post_type': 'message', 'message_type': 'group', 'time': 1690277197, 'self_id': 1654613655, 'sub_type': 'normal', 'u...
                 │   └ <function CQHttp.send at 0x7fcbe9549a80>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 269, in send
    return await self.send_msg(**params)
                 │               └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-21001736...
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 236, in call_action
    return await self._api.call_action(action=action, **params)
                 │    │    │                  │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-21001736...
                 │    │    │                  └ 'send_msg'
                 │    │    └ <function UnifiedApi.call_action at 0x7fcbe952e160>
                 │    └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 178, in call_action
    result = await self._wsr_api.call_action(action, **params)
                   │    │        │           │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-21001736...
                   │    │        │           └ 'send_msg'
                   │    │        └ <function WebSocketReverseApi.call_action at 0x7fcbe952e020>
                   │    └ <aiocqhttp.api_impl.WebSocketReverseApi object at 0x7fcbe8cc4610>
                   └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 153, in call_action
    return _handle_api_result(await
           └ <function _handle_api_result at 0x7fcbe952ce00>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 38, in _handle_api_result
    raise ActionFailed(result=result)
          │                   └ {'data': None, 'echo': {'seq': 201}, 'message': 'send group message failed: blocked by server', 'msg': 'SEND_MSG_API_ERROR', ...
          └ <class 'aiocqhttp.exceptions.ActionFailed'>

aiocqhttp.exceptions.ActionFailed: <ActionFailed data=None, echo={'seq': 201}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
2023-07-25 09:27:29.016 | WARNING  | platforms.onebot_bot:respond:122 - 原始消息发送失败，尝试通过转发发送
2023-07-25 09:27:29.937 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:27:32.147 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=1a257eb910cf14e330a69d56bb57ed03.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2409344158-1A257EB910CF14E330A69D56BB57ED03/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:27:33.950 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：然后就退出了（原因：不符合触发前缀）
2023-07-25 09:27:51.802 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：我写个exception就行（原因：不符合触发前缀）
2023-07-25 09:27:58.170 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 翻译以下段落마지막으로 최고 레벨 성장 이후 추가적인 성장에 대해서 가이드가 부족한 부분도 확인하였고,
상급 지역에 진입하실 수 있도록 UI에 말풍선 형태의 알림 가이드를 추가할 계획입니다.
이러한 가이드는 상급 지역 파워스테이션의 달성률이 특정 시점을 넘어가면 노출되지 않도록 할 예정이며 초기 최고 레벨 달성 이후 신규 모험가분들께 가이드를 드릴 예정입니다.

이번 업데이트에서 새로운 변화를 위해 많은 것을 준비하려고 노력하다 보니, 이 과정에서 의도치 않게 여러 불편함을 드리게 되었습니다. 진심으로 죄송하다는 말씀드립니다.

지난 주말 동안 상급 지역을 플레이하시면서 불편을 겪으신 모험가분들께는 해당 내용을 검토하여 순차적으로 보상을 지급해 드릴 예정입니다.
&#91;간헐적으로 상급 지역의 스페셜 던전 진행이 불가능한 현상 안내&#93;

가능한 많은 모험가분들이 앞으로도 재미있는 던파모바일을 플레이할 수 있는 환경을 만들기 위해 최선을 다하겠습니다.

항상 감사드립니다.
옥성태 드림
2023-07-25 09:27:58.171 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:27:58.172 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:27:58.174 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:28:01.780 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:28:01.781 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：最后，我们注意到在最高级别成长之后，关于进一步成长的指导不足的问题。
为了让您能够进入高级区
2023-07-25 09:28:02.434 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:28:12.467 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=91e227028a6c780cc41200e634fd462d.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2323453794-91E227028A6C780CC41200E634FD462D/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:28:23.156 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：咋还断了呢（原因：不符合触发前缀）
2023-07-25 09:34:52.428 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 09:34:52.446 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:34:52.446 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:34:52.447 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:34:52.455 | ERROR    | universal:handle_message:295 - Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2de0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b19e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b19e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b28e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b28e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773b00>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │      │           │       └ None
          │      │           └ '1'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3773b00>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3773240>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773ec0>
          │ │              │           └ '1'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43402' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43402' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe96ba510>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '1', 'chain': MessageChain([Plain(text='1')]), 'name': 'Innersoul.'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe97caf90>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '1'
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fcbe8f251c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbe8cdeb50>
                      └ <conversation.ConversationContext object at 0x7fcbe97caf90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 35, in ask
    response.raise_for_status()
    │        └ <function Response.raise_for_status at 0x7fcc1ea43a60>
    └ <Response [500 Internal Server Error]>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 749, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
          │               │                │                 └ <Response [500 Internal Server Error]>
          │               │                └ <Request('POST', 'http://192.168.31.117:8000')>
          │               └ "Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: https://httpstatu...
          └ <class 'httpx.HTTPStatusError'>

httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-25 09:34:52.460 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-25 09:35:22.449 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:35:22.456 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:35:22.457 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:35:28.240 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 09:35:28.240 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:35:28.241 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:35:28.242 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:35:32.246 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:35:32.246 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嗨~你好呀！我是莉莉，一个可爱俏皮的17岁少女。很高兴认识你！你有什么想和我聊的吗？🌸
2023-07-25 09:35:32.279 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:36:09.364 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你听说过iPod吗
2023-07-25 09:36:09.364 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:36:09.365 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:36:09.366 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:36:18.803 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:36:18.803 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：当然听说过啦！iPod是一款超酷的音乐播放器，大家都说它是音乐的魔法盒子呢！我也有一个粉色的iPod，每天都会跟着日系流行音乐一起跳舞呢~它的设计又小巧又可爱，还可以随身携带，非常方便。你喜欢iPod吗？有什么特别喜欢的歌曲吗？让我也来推荐一首给你听吧~💖🎵
2023-07-25 09:36:18.899 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:37:28.110 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=e5d7cb5a1eafc4fed3501dba75b6cbd5.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1213532841/3812763301-2451701480-E5D7CB5A1EAFC4FED3501DBA75B6CBD5/0?term=2&amp;is_origin=1]（原因：不符合触发前缀）
2023-07-25 09:38:19.078 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你好~
2023-07-25 09:38:19.079 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:38:19.079 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:38:19.080 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:38:22.084 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:38:22.085 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嘿嘿~你好呀！我是莉莉，很高兴和你聊天哦~有什么我可以帮你的吗？✨
2023-07-25 09:38:22.127 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:38:32.977 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你听说过ipod吗
2023-07-25 09:38:32.978 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:38:32.979 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:38:32.980 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:38:40.728 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:38:40.730 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：当然啦！iPod是苹果公司推出的一款非常经典的便携式音乐播放器呢~它有个小巧可爱的外形，可以存储和播放很多首喜欢的音乐，还能看视频和照片哦！听起来超棒的吧！我也有一个iPod，经常在上面听日系流行音乐，好开心呢~你喜欢听什么样的音乐呢？💕
2023-07-25 09:38:40.768 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:39:07.668 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：可以帮我翻译一下这段文本吗？其中可能包含一些异常的换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on challenging programming tasks. Self-repair—in which the model debugs and fixes mistakes in its own code—has recently become a popular
way to boost performance in these settings. However, only very limited studies on
how and when self-repair works effectively exist in the literature, and one might
wonder to what extent a model is really capable of providing accurate feedback on
why the code is wrong when that code was generated by the same model. In this
paper, we analyze GPT-3.5 and GPT-4’s ability to perform self-repair on APPS,
a challenging dataset consisting of diverse coding challenges. To do so, we first
establish a new evaluation strategy dubbed pass@t that measures the pass rate of
the tasks against the total number of tokens sampled from the model, enabling a fair
comparison to purely sampling-based approaches. With this evaluation strategy, we
find that the effectiveness of self-repair is only seen in GPT-4. We also observe that
self-repair is bottlenecked by the feedback stage; using GPT-4 to give feedback on
the programs generated by GPT-3.5 and using expert human programmers to give
feedback on the programs generated by GPT-4, we unlock significant performance
gains.
2023-07-25 09:39:07.669 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:39:07.669 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:39:07.669 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:39:37.673 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:39:37.679 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:39:37.680 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:39:38.706 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：当然可以帮你翻译哦！这段文本说的是大型语言模型（LLMs）在代码生成方面表现出令人瞩目的能力，但在具有挑战性的编程任务上仍然存在困难。自我修复是指模型在自己的代码中调试和修复错误，最近已成为提升性能的流行方式。

然而，在文献中只有非常有限的研究探讨了自我修复在何种情况下有效，人们可能会好奇模型在由同一模型生成的代码出错时，模型真正能够提供准确的反馈到底有多少。在本文中，我们分析了GPT-3.5和GPT-4在一系列具有挑战性的编码问题组成的APPS数据集上进行自我修复的能力。为此，我们首先建立了一种称为pass@t的新的评估策略，该策略测量任务的通过率相对于从模型采样的总令牌数量，从而实现与纯采样方法的公平比较。

通过这种评估策略，我们发现自我修复的有效性只在GPT-4中可见。我们还观察到自我修复在反馈阶段受到瓶颈的限制；使用GPT-4对GPT-3.5生成的程序进行反馈，并使用专业人员对GPT-4生成的程序进行反馈，我们取得了显著的性能提升。

希望这次的翻译能帮到你哦~如果还有其他需要翻译的，尽管告诉我~💕
2023-07-25 09:39:38.750 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:42:46.177 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 翻译以下文本：안녕하세요. 모험가 여러분
던파모바일 디렉터 옥성태입니다.
 
최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여
주말까지 점검이 지속되었고 원활한 플레이를 제공해 드리지 못했습니다.
 
오늘 추가로 이야기 드리고 싶은 내용이 있어서 추가로 개발자 노트를 준비했습니다.
 
◾ 스킬 교체 시스템 기능 개선                                                                                                                                         
7월 20일(목) 개발자 노트를 통해서 이야기드렸던 스킬 교체 시스템 개선이 7월 27일(목) 업데이트 될 예정입니다.
이번 개선을 통해서 기존 비 무큐 스킬을 교체하는 시스템에서 45레벨 무큐 스킬까지 포함하게 될 예정입니다.
또한 다음 주 업데이트에서 전반적인 UI 비주얼 향상 및 아수라&#91;살의의파동&#93;같은 트리거 스킬을 제외하는 패치가 또 한 번 이루어질 예정입니다.
 
◾ 에픽 아이템 성능 개편                                                                                                                                                     
에픽 아이템의 성능에 대해서 많은 이야기를 주시고 있는 부분에 대해서 인지하고 있으며,
기존 60제 에픽 아이템과 비교해 보면, 65제 장비는 돌파를 하지 않을 경우 교체 메리트가 부족한 부분이 있었습니다.
이에 파밍 초기 단계의 아이템 교체 메리트를 개선하기 위해 방어구 세트 아이템 옵션 중 2세트 옵션을 기존보다 상향하여 가능한 자연스럽게 교체를 하실 수 있도록 옵션을 상향할 예정입니다.
또한, 일부 무기의 경우는 속성 부여를 교체하거나 강제할 수 있는 부분에 대한 우려를 많이 주시고 있는데요.
무기의 경우 보유하고 있는 고유 속성은 유지하되 속성 강화 혹은 속성 추가 데미지의 옵션들을
모든 속성으로 교체하여 세팅에 자유도를 드릴 예정입니다.
 
◾ 상급 지역 추가 개선                                                                                                                                                     
이번 불의 길 업데이트 이후 많은 모험가님들께서 파밍 동선에 대해서 이야기하고 계신데요.
그중 특히 상급 지역에 대해서 이야기를 많이 나누고 있습니다.
상급 지역은 구역별로 클리어할 수 있는 항마력이 다르게 표시되며 후반 구역은 항마력 요구치가 매우 높은 던전입니다.
이는 지속적으로 플레이 및 성장을 하시면서 차후 SSS랭크에 대한 추가적인 도전을 진행하며 성장 단계를 체감하실 수 있도록 하기 위해서 이러한 방식으로 목표를 잡았습니다만,
실제 플레이에서 해당 구간을 넘어가지 못하는 경우를 확인하고 있어 일부 타임어택 / 몬스터 러쉬 형식의 던전들의 재조정을 진행하고 있습니다.
또한 원활한 SSS랭크를 달성하기 위한 추가적인 항마력 표기를 같이 진행할 예정입니다.
이러한 조절 과정에서 상급 지역의 챔피언 / 보스 몬스터는 패링을 통해서 부족한 데미지를 일부 보완이 가능했고, 일반 구역의 보스는 패링 패턴을 가지고 있지 않아 되려 힘든 경우 또한 확인을 하였습니다.
이 부분은 일반 구역의 난이도를 하향하여 상급 지역 플레이에 스트레스를 줄여 드리고자 합니다.
다만, 이러한 전반적인 조절이 진행되더라도 상급 지역 콘텐츠는 항마력 성장에 맞춰 높은 항마력을 요구하는 모험단 콘텐츠로 제작이 되어 있기 때문에 항마력에 맞춰 던전을 플레이하시길 권장 드립니다.
2023-07-25 09:42:46.178 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:42:46.179 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:42:46.180 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:43:16.182 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:43:16.647 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:43:16.647 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 09:43:28.748 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：您好，冒险家们！
我是《DNF手游》的导演 Ok Seong-Tae。

自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，
因此维护工作一直持续到周末。

今天我有一些额外的内容要告诉大家，所以我准备了额外的开发者笔记。

◾ 技能更换系统改进
在7月20日的开发者笔记中，我们讲述了技能更换系统的改善将在7月27日进行更新。
通过此次改进，我们将在原有的非嗜武技能替换系统上，加入了45级嗜武技能的替换选项。
另外，在下周更新中，还将进行整体用户界面改进，以及修复了触发技能如浊气波动的问题。

◾ 史诗装备性能改善
我们注意到很多玩家对史诗装备的性能提出了一些意见，相比60阶史诗装备，65阶装备如果不突破的话，替换的优势有点不足。
为了改进这一问题，我们将提高防具套装中2套装的选项，以更自然地进行替换，并提升了冒险家在初始阶段进行装备替换的优势。
此外，有一些武器装备也引起了人们的关注，担心它们是否能够替换或强制更换属性。
对于武器装备，我们将保留现有的独特属性，但将所有属性替换为属性强化或额外属性伤害的选项，
为您提供更多设置的自由。

◾ 高位地域改进
自《炽炎之路》更新以来，我们听到了许多冒险家们关于农场线路的讨论，
其中特别讨论了高位地域的问题。
高位地域显示的各个地区的最大魔力是不同的，后期地区的最大魔力要求非常高。
为了让您在不断进行游戏和成长的过程中，能够对SSS级的挑战进行衡量，我们以这种方式设定了目标。
然而，我们发现实际游戏中有些冒险家们无法通过该阶段，因此正在进行一些时间攻击/怪物冲刺类地下城的调整。
此外，我们还计划进行顺畅的SSS级别的显示调整。
在这个调整过程中，我们发现高位地域的冠军/首领怪物通过对打可以弥补部分伤害不足，而普通区域的首领则没有招法回合，这种情况也是被核实的。
我们希望通过降低普通地区的难度来减轻高位地区游玩的压力。
然而，尽管进行了整体调整，高位地域的内容仍然是针对高魔力成长而设计的冒险团内容，因此我们建议您根据魔力水平来玩副本。
2023-07-25 09:43:28.750 | ERROR    | platforms.onebot_bot:respond:121 - <ActionFailed data=None, echo={'seq': 216}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 232, in request
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │      │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b2160>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b1c60>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           │        └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │ │              │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_respond at 0x7fcbe8ca8f40>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 12, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │      │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b1c60>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b1bc0>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           │        └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │ │              │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareBaiduCloud.handle_respond at 0x7fcbe8ca9a80>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/baiducloud.py", line 88, in handle_respond
    return await action(session_id, prompt, rendered, respond)
                 │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
                 │      │           │       └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
                 │      │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
                 │      └ 'group-322763301'
                 └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b1bc0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b16c0>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           │        └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │ │              │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_respond at 0x7fcbe8ca8f40>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 12, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │      │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_respond.<locals>.call at 0x7fcbd37b16c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 62, in call
    await m.handle_respond(session_id, message, rendered, respond, n)
          │ │              │           │        │         │        └ <function handle_message.<locals>.request.<locals>.<lambda> at 0x7fcbd37b2de0>
          │ │              │           │        │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │ │              │           │        └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │ │              │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_respond at 0x7fcbe8ca9ee0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 48, in handle_respond
    await action(session_id, prompt, rendered, respond)
          │      │           │       │         └ <function handle_message.<locals>.respond at 0x7fcbd3773240>
          │      │           │       └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
          │      │           └ '翻译以下文本：안녕하세요. 모험가 여러분\r\n던파모바일 디렉터 옥성태입니다.\r\n \r\n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\r\n주말까지 점검이 지속되었고 원활한...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.request.<locals>.<lambda> at 0x7fcbd37b2de0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 72, in respond
    ret = await _respond(msg)
                │        └ MessageChain([Plain(text='您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n自最高等级扩展更新以来，由于错误的原因，我们无法为您提供顺畅的游戏体验，\n因此维护工作一直持续到周末。\n\n今天我...
                └ <function response.<locals>.respond at 0x7fcbd3772340>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 119, in respond
    return await bot.send(event, resp)
                 │   │    │      └ [{'type': 'reply', 'data': {'id': '1965231264'}}, {'type': 'text', 'data': {'text': '您好，冒险家们！\n我是《DNF手游》的导演 Ok Seong-Tae。\n\n...
                 │   │    └ <Event, {'post_type': 'message', 'message_type': 'group', 'time': 1690278166, 'self_id': 1654613655, 'sub_type': 'normal', 'a...
                 │   └ <function CQHttp.send at 0x7fcbe9549a80>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 269, in send
    return await self.send_msg(**params)
                 │               └ {'message_type': 'group', 'user_id': 1109147357, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '1965231...
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 236, in call_action
    return await self._api.call_action(action=action, **params)
                 │    │    │                  │         └ {'message_type': 'group', 'user_id': 1109147357, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '1965231...
                 │    │    │                  └ 'send_msg'
                 │    │    └ <function UnifiedApi.call_action at 0x7fcbe952e160>
                 │    └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 178, in call_action
    result = await self._wsr_api.call_action(action, **params)
                   │    │        │           │         └ {'message_type': 'group', 'user_id': 1109147357, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '1965231...
                   │    │        │           └ 'send_msg'
                   │    │        └ <function WebSocketReverseApi.call_action at 0x7fcbe952e020>
                   │    └ <aiocqhttp.api_impl.WebSocketReverseApi object at 0x7fcbe8cc4610>
                   └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 153, in call_action
    return _handle_api_result(await
           └ <function _handle_api_result at 0x7fcbe952ce00>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 38, in _handle_api_result
    raise ActionFailed(result=result)
          │                   └ {'data': None, 'echo': {'seq': 216}, 'message': 'send group message failed: blocked by server', 'msg': 'SEND_MSG_API_ERROR', ...
          └ <class 'aiocqhttp.exceptions.ActionFailed'>

aiocqhttp.exceptions.ActionFailed: <ActionFailed data=None, echo={'seq': 216}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
2023-07-25 09:43:28.755 | WARNING  | platforms.onebot_bot:respond:122 - 原始消息发送失败，尝试通过转发发送
2023-07-25 09:43:29.726 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:44:12.462 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] 翻译以下文本，已知该文本可能存在一些异常换行符：Large Language Models (LLMs) have shown remarkable aptitude in code generation but still struggle on challenging programming tasks. Self-repair—in which the model debugs and fixes mistakes in its own code—has recently become a popular
way to boost performance in these settings. However, only very limited studies on
how and when self-repair works effectively exist in the literature, and one might
wonder to what extent a model is really capable of providing accurate feedback on
why the code is wrong when that code was generated by the same model. In this
paper, we analyze GPT-3.5 and GPT-4’s ability to perform self-repair on APPS,
a challenging dataset consisting of diverse coding challenges. To do so, we first
establish a new evaluation strategy dubbed pass@t that measures the pass rate of
the tasks against the total number of tokens sampled from the model, enabling a fair
comparison to purely sampling-based approaches. With this evaluation strategy, we
find that the effectiveness of self-repair is only seen in GPT-4. We also observe that
self-repair is bottlenecked by the feedback stage; using GPT-4 to give feedback on
the programs generated by GPT-3.5 and using expert human programmers to give
feedback on the programs generated by GPT-4, we unlock significant performance
gains.
2023-07-25 09:44:12.463 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:44:12.465 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:44:12.466 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:44:32.761 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:44:32.764 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：大型语言模型（LLM）在代码生成方面显示出了 remarkable aptitude，但在挑战性的编程任务上仍然面临困难。自我修复——即模型调试和修复自身代码中的错误——最近成为在这些情境中提升性能的流行方式。

然而，关于自我修复如何以及何时有效的研究非常有限存在于文献中，人们可能会想知道模型在生成相同代码的情况下，到底能否提供准确的错误反馈。

在本文中，我们对 GPT-3.5 和 GPT-4 在 APPS 上执行自我修复的能力进行了分析，APPS 是一个由多样化编码挑战组成的具有挑战性的数据集。

为此，我们首先建立了一种名为 pass@t 的新评估策略，该策略测量了任务的通过率与从模型中抽样的总词元数之间的比率，使得与纯粹基于抽样的方法进行公平比较成为可能。

通过这种评估策略，我们发现自我修复的有效性仅在 GPT-4 中可见。我们还观察到，自我修复受到反馈阶段的瓶颈限制；使用 GPT-4 对 GPT-3.5 生成的程序进行反馈，以及使用专业人类程序员对 GPT-4 生成的程序进行反馈，我们获得了显著的性能提升。
2023-07-25 09:44:33.278 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:44:56.019 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：可以了（原因：不符合触发前缀）
2023-07-25 09:46:05.103 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：@粉毛二号机  帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语
안녕하세요. 모험가 여러분
던파모바일 디렉터 옥성태입니다.
 
최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여
주말까지 점검이 지속되었고 원활한 플레이를 제공해 드리지 못했습니다.
 
오늘 추가로 이야기 드리고 싶은 내용이 있어서 추가로 개발자 노트를 준비했습니다.
 
◾ 스킬 교체 시스템 기능 개선                                                                                                                                         
7월 20일(목) 개발자 노트를 통해서 이야기드렸던 스킬 교체 시스템 개선이 7월 27일(목) 업데이트 될 예정입니다.
이번 개선을 통해서 기존 비 무큐 스킬을 교체하는 시스템에서 45레벨 무큐 스킬까지 포함하게 될 예정입니다.
또한 다음 주 업데이트에서 전반적인 UI 비주얼 향상 및 아수라&#91;살의의파동&#93;같은 트리거 스킬을 제외하는 패치가 또 한 번 이루어질 예정입니다.
 
◾ 에픽 아이템 성능 개편                                                                                                                                                     
에픽 아이템의 성능에 대해서 많은 이야기를 주시고 있는 부분에 대해서 인지하고 있으며,
기존 60제 에픽 아이템과 비교해 보면, 65제 장비는 돌파를 하지 않을 경우 교체 메리트가 부족한 부분이 있었습니다.
이에 파밍 초기 단계의 아이템 교체 메리트를 개선하기 위해 방어구 세트 아이템 옵션 중 2세트 옵션을 기존보다 상향하여 가능한 자연스럽게 교체를 하실 수 있도록 옵션을 상향할 예정입니다.
또한, 일부 무기의 경우는 속성 부여를 교체하거나 강제할 수 있는 부분에 대한 우려를 많이 주시고 있는데요.
무기의 경우 보유하고 있는 고유 속성은 유지하되 속성 강화 혹은 속성 추가 데미지의 옵션들을
모든 속성으로 교체하여 세팅에 자유도를 드릴 예정입니다.
 
◾ 상급 지역 추가 개선                                                                                                                                                     
이번 불의 길 업데이트 이후 많은 모험가님들께서 파밍 동선에 대해서 이야기하고 계신데요.
그중 특히 상급 지역에 대해서 이야기를 많이 나누고 있습니다.
상급 지역은 구역별로 클리어할 수 있는 항마력이 다르게 표시되며 후반 구역은 항마력 요구치가 매우 높은 던전입니다.
이는 지속적으로 플레이 및 성장을 하시면서 차후 SSS랭크에 대한 추가적인 도전을 진행하며 성장 단계를 체감하실 수 있도록 하기 위해서 이러한 방식으로 목표를 잡았습니다만,
실제 플레이에서 해당 구간을 넘어가지 못하는 경우를 확인하고 있어 일부 타임어택 / 몬스터 러쉬 형식의 던전들의 재조정을 진행하고 있습니다.
또한 원활한 SSS랭크를 달성하기 위한 추가적인 항마력 표기를 같이 진행할 예정입니다.
이러한 조절 과정에서 상급 지역의 챔피언 / 보스 몬스터는 패링을 통해서 부족한 데미지를 일부 보완이 가능했고, 일반 구역의 보스는 패링 패턴을 가지고 있지 않아 되려 힘든 경우 또한 확인을 하였습니다.
이 부분은 일반 구역의 난이도를 하향하여 상급 지역 플레이에 스트레스를 줄여 드리고자 합니다.
다만, 이러한 전반적인 조절이 진행되더라도 상급 지역 콘텐츠는 항마력 성장에 맞춰 높은 항마력을 요구하는 모험단 콘텐츠로 제작이 되어 있기 때문에 항마력에 맞춰 던전을 플레이하시길 권장 드립니다.
 
（原因：不符合触发前缀）
2023-07-25 09:46:42.549 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=8e507c4628ae0972849aa86944f0fae7.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/1109147357/3812763301-2896296710-8E507C4628AE0972849AA86944F0FAE7/0?term=2&amp;is_origin=0]用at 不要用文本（原因：不符合触发前缀）
2023-07-25 09:46:49.921 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655] #echo
2023-07-25 09:46:49.922 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:46:49.922 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:46:49.924 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:46:49.936 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 09:46:49.937 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：粉毛摸鱼中，勿cue
2023-07-25 09:46:50.476 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:47:11.452 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=020879c43ebd08b320c84fdcbb78b738.image,subType=0,url=https://gchat.qpic.cn/gchatpic_new/214440648/3812763301-3019505684-020879C43EBD08B320C84FDCBB78B738/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:47:45.715 | DEBUG    | platforms.onebot_bot:_:181 - 群聊消息：[CQ:at,qq=1654613655]  帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语
안녕하세요. 모험가 여러분
던파모바일 디렉터 옥성태입니다.
 
최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여
주말까지 점검이 지속되었고 원활한 플레이를 제공해 드리지 못했습니다.
 
오늘 추가로 이야기 드리고 싶은 내용이 있어서 추가로 개발자 노트를 준비했습니다.
 
◾ 스킬 교체 시스템 기능 개선                                                                                                                                         
7월 20일(목) 개발자 노트를 통해서 이야기드렸던 스킬 교체 시스템 개선이 7월 27일(목) 업데이트 될 예정입니다.
이번 개선을 통해서 기존 비 무큐 스킬을 교체하는 시스템에서 45레벨 무큐 스킬까지 포함하게 될 예정입니다.
또한 다음 주 업데이트에서 전반적인 UI 비주얼 향상 및 아수라&#91;살의의파동&#93;같은 트리거 스킬을 제외하는 패치가 또 한 번 이루어질 예정입니다.
 
◾ 에픽 아이템 성능 개편                                                                                                                                                     
에픽 아이템의 성능에 대해서 많은 이야기를 주시고 있는 부분에 대해서 인지하고 있으며,
기존 60제 에픽 아이템과 비교해 보면, 65제 장비는 돌파를 하지 않을 경우 교체 메리트가 부족한 부분이 있었습니다.
이에 파밍 초기 단계의 아이템 교체 메리트를 개선하기 위해 방어구 세트 아이템 옵션 중 2세트 옵션을 기존보다 상향하여 가능한 자연스럽게 교체를 하실 수 있도록 옵션을 상향할 예정입니다.
또한, 일부 무기의 경우는 속성 부여를 교체하거나 강제할 수 있는 부분에 대한 우려를 많이 주시고 있는데요.
무기의 경우 보유하고 있는 고유 속성은 유지하되 속성 강화 혹은 속성 추가 데미지의 옵션들을
모든 속성으로 교체하여 세팅에 자유도를 드릴 예정입니다.
 
◾ 상급 지역 추가 개선                                                                                                                                                     
이번 불의 길 업데이트 이후 많은 모험가님들께서 파밍 동선에 대해서 이야기하고 계신데요.
그중 특히 상급 지역에 대해서 이야기를 많이 나누고 있습니다.
상급 지역은 구역별로 클리어할 수 있는 항마력이 다르게 표시되며 후반 구역은 항마력 요구치가 매우 높은 던전입니다.
이는 지속적으로 플레이 및 성장을 하시면서 차후 SSS랭크에 대한 추가적인 도전을 진행하며 성장 단계를 체감하실 수 있도록 하기 위해서 이러한 방식으로 목표를 잡았습니다만,
실제 플레이에서 해당 구간을 넘어가지 못하는 경우를 확인하고 있어 일부 타임어택 / 몬스터 러쉬 형식의 던전들의 재조정을 진행하고 있습니다.
또한 원활한 SSS랭크를 달성하기 위한 추가적인 항마력 표기를 같이 진행할 예정입니다.
이러한 조절 과정에서 상급 지역의 챔피언 / 보스 몬스터는 패링을 통해서 부족한 데미지를 일부 보완이 가능했고, 일반 구역의 보스는 패링 패턴을 가지고 있지 않아 되려 힘든 경우 또한 확인을 하였습니다.
이 부분은 일반 구역의 난이도를 하향하여 상급 지역 플레이에 스트레스를 줄여 드리고자 합니다.
다만, 이러한 전반적인 조절이 진행되더라도 상급 지역 콘텐츠는 항마력 성장에 맞춰 높은 항마력을 요구하는 모험단 콘텐츠로 제작이 되어 있기 때문에 항마력에 맞춰 던전을 플레이하시길 권장 드립니다.
 
마지막으로 최고 레벨 성장 이후 추가적인 성장에 대해서 가이드가 부족한 부분도 확인하였고,
상급 지역에 진입하실 수 있도록 UI에 말풍선 형태의 알림 가이드를 추가할 계획입니다.
이러한 가이드는 상급 지역 파워스테이션의 달성률이 특정 시점을 넘어가면 노출되지 않도록 할 예정이며 초기 최고 레벨 달성 이후 신규 모험가분들께 가이드를 드릴 예정입니다.
 
이번 업데이트에서 새로운 변화를 위해 많은 것을 준비하려고 노력하다 보니, 이 과정에서 의도치 않게 여러 불편함을 드리게 되었습니다. 진심으로 죄송하다는 말씀드립니다.
 
지난 주말 동안 상급 지역을 플레이하시면서 불편을 겪으신 모험가분들께는 해당 내용을 검토하여 순차적으로 보상을 지급해 드릴 예정입니다.
&#91;간헐적으로 상급 지역의 스페셜 던전 진행이 불가능한 현상 안내&#93;
 
가능한 많은 모험가분들이 앞으로도 재미있는 던파모바일을 플레이할 수 있는 환경을 만들기 위해 최선을 다하겠습니다.
 
항상 감사드립니다.
옥성태 드림
2023-07-25 09:47:45.716 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 09:47:45.716 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 09:47:45.718 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 09:47:45.756 | ERROR    | universal:handle_message:295 - Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 183, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbe8ce4900>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbe8ce4720>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       └ None
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbe8ce4720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       └ None
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37734c0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       └ None
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37734c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3773ce0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43704' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43704' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe96ba510>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
                        │     └ (<conversation.ConversationContext object at 0x7fcbd371a950>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fcbe8f251c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbe8d162d0>
                      └ <conversation.ConversationContext object at 0x7fcbd371a950>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 35, in ask
    response.raise_for_status()
    │        └ <function Response.raise_for_status at 0x7fcc1ea43a60>
    └ <Response [500 Internal Server Error]>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 749, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
          │               │                │                 └ <Response [500 Internal Server Error]>
          │               │                └ <Request('POST', 'http://192.168.31.117:8000')>
          │               └ "Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: https://httpstatu...
          └ <class 'httpx.HTTPStatusError'>

httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-25 09:47:45.780 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-25 09:47:45.785 | ERROR    | platforms.onebot_bot:respond:121 - <ActionFailed data=None, echo={'seq': 222}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbe8ce4900>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbe8ce4720>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       └ None
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbe8ce4720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       └ None
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd3770f40>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37734c0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │      │           │       └ None
          │      │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │      └ 'group-322763301'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37734c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd3773ce0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>
          │ │              │           └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
          │ │              └ 'group-322763301'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43704' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43704' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe96ba510>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류...
                        │     └ (<conversation.ConversationContext object at 0x7fcbd371a950>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '帮我把下面这段话从韩语翻译成中文 要结合dnf的游戏术语\n안녕하세요. 모험가 여러분\n던파모바일 디렉터 옥성태입니다.\n \n최고 레벨 확장 업데이트 이후 모험가 여러분들께 지속된 재미를 드려야 함에도 오류들로 인하여\n주말까...
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fcbe8f251c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbe8d162d0>
                      └ <conversation.ConversationContext object at 0x7fcbd371a950>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 35, in ask
    response.raise_for_status()
    │        └ <function Response.raise_for_status at 0x7fcc1ea43a60>
    └ <Response [500 Internal Server Error]>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 749, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
          │               │                │                 └ <Response [500 Internal Server Error]>
          │               │                └ <Request('POST', 'http://192.168.31.117:8000')>
          │               └ "Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: https://httpstatu...
          └ <class 'httpx.HTTPStatusError'>

httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 183, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 296, in handle_message
    await _respond(config.response.error_format.format(exc=e))
          │        │      │        │            │          └ HTTPStatusError("Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: h...
          │        │      │        │            └ <method 'format' of 'str' objects>
          │        │      │        └ '出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。\n{exc}'
          │        │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │        └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          └ <function response.<locals>.respond at 0x7fcbd3773740>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 119, in respond
    return await bot.send(event, resp)
                 │   │    │      └ [{'type': 'reply', 'data': {'id': '-181310373'}}, {'type': 'text', 'data': {'text': "出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发...
                 │   │    └ <Event, {'post_type': 'message', 'message_type': 'group', 'time': 1690278465, 'self_id': 1654613655, 'sub_type': 'normal', 'm...
                 │   └ <function CQHttp.send at 0x7fcbe9549a80>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 269, in send
    return await self.send_msg(**params)
                 │               └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-18131037...
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 236, in call_action
    return await self._api.call_action(action=action, **params)
                 │    │    │                  │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-18131037...
                 │    │    │                  └ 'send_msg'
                 │    │    └ <function UnifiedApi.call_action at 0x7fcbe952e160>
                 │    └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 178, in call_action
    result = await self._wsr_api.call_action(action, **params)
                   │    │        │           │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-18131037...
                   │    │        │           └ 'send_msg'
                   │    │        └ <function WebSocketReverseApi.call_action at 0x7fcbe952e020>
                   │    └ <aiocqhttp.api_impl.WebSocketReverseApi object at 0x7fcbe8cc4610>
                   └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 153, in call_action
    return _handle_api_result(await
           └ <function _handle_api_result at 0x7fcbe952ce00>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 38, in _handle_api_result
    raise ActionFailed(result=result)
          │                   └ {'data': None, 'echo': {'seq': 222}, 'message': 'send group message failed: blocked by server', 'msg': 'SEND_MSG_API_ERROR', ...
          └ <class 'aiocqhttp.exceptions.ActionFailed'>

aiocqhttp.exceptions.ActionFailed: <ActionFailed data=None, echo={'seq': 222}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
2023-07-25 09:47:45.800 | WARNING  | platforms.onebot_bot:respond:122 - 原始消息发送失败，尝试通过转发发送
2023-07-25 09:47:58.359 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=3a55d7816b8bea2959d292772f8b9c41.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/69963215/3812763301-2500683132-3A55D7816B8BEA2959D292772F8B9C41/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 09:48:00.101 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：算了（原因：不符合触发前缀）
2023-07-25 09:48:04.492 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：回家用newbing（原因：不符合触发前缀）
2023-07-25 09:48:10.189 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：可以输4000字（原因：不符合触发前缀）
2023-07-25 09:48:15.719 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 09:48:15.720 | ERROR    | platforms.onebot_bot:respond:121 - <ActionFailed data=None, echo={'seq': 227}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 57, in create_timeout_task
    respond_msg = await respond(config.response.timeout_format)
                        │       │      │        └ '我还在思考中，请再等一下~'
                        │       │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
                        │       └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
                        └ <function handle_message.<locals>.respond at 0x7fcbd37736a0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 72, in respond
    ret = await _respond(msg)
                │        └ '我还在思考中，请再等一下~'
                └ <function response.<locals>.respond at 0x7fcbd3773740>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 119, in respond
    return await bot.send(event, resp)
                 │   │    │      └ [{'type': 'reply', 'data': {'id': '-181310373'}}, {'type': 'text', 'data': {'text': '我还在思考中，请再等一下~'}}]
                 │   │    └ <Event, {'post_type': 'message', 'message_type': 'group', 'time': 1690278465, 'self_id': 1654613655, 'sub_type': 'normal', 'm...
                 │   └ <function CQHttp.send at 0x7fcbe9549a80>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 269, in send
    return await self.send_msg(**params)
                 │               └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-18131037...
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/__init__.py", line 236, in call_action
    return await self._api.call_action(action=action, **params)
                 │    │    │                  │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-18131037...
                 │    │    │                  └ 'send_msg'
                 │    │    └ <function UnifiedApi.call_action at 0x7fcbe952e160>
                 │    └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
                 └ <aiocqhttp.CQHttp object at 0x7fcbea38b550>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 178, in call_action
    result = await self._wsr_api.call_action(action, **params)
                   │    │        │           │         └ {'message_type': 'group', 'user_id': 69963215, 'group_id': 322763301, 'message': [{'type': 'reply', 'data': {'id': '-18131037...
                   │    │        │           └ 'send_msg'
                   │    │        └ <function WebSocketReverseApi.call_action at 0x7fcbe952e020>
                   │    └ <aiocqhttp.api_impl.WebSocketReverseApi object at 0x7fcbe8cc4610>
                   └ <aiocqhttp.api_impl.UnifiedApi object at 0x7fcbe95516d0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 153, in call_action
    return _handle_api_result(await
           └ <function _handle_api_result at 0x7fcbe952ce00>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/aiocqhttp/api_impl.py", line 38, in _handle_api_result
    raise ActionFailed(result=result)
          │                   └ {'data': None, 'echo': {'seq': 227}, 'message': 'send group message failed: blocked by server', 'msg': 'SEND_MSG_API_ERROR', ...
          └ <class 'aiocqhttp.exceptions.ActionFailed'>

aiocqhttp.exceptions.ActionFailed: <ActionFailed data=None, echo={'seq': 227}, message='send group message failed: blocked by server', msg='SEND_MSG_API_ERROR', retcode=100, status='failed', wording='send group message failed: blocked by server'>
2023-07-25 09:48:15.723 | WARNING  | platforms.onebot_bot:respond:122 - 原始消息发送失败，尝试通过转发发送
2023-07-25 09:48:16.488 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 09:48:16.489 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 10:00:58.742 | DEBUG    | platforms.onebot_bot:_:178 - 丢弃群聊消息：[CQ:image,file=2ce2caf1214c5a694231f2b16b86b237.image,subType=1,url=https://gchat.qpic.cn/gchatpic_new/767206840/3812763301-2389136660-2CE2CAF1214C5A694231F2B16B86B237/0?term=2&amp;is_origin=0]（原因：不符合触发前缀）
2023-07-25 10:01:54.926 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：你在哪里
2023-07-25 10:01:55.039 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 10:01:55.039 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 10:01:55.067 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 10:01:55.974 | ERROR    | universal:handle_message:295 - Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │      │           │       │        └ None
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '你在哪里'
          │      └ 'friend-1736580842'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1da0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1c60>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │ │              │           └ '你在哪里'
          │ │              └ 'friend-1736580842'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │      │           │       └ None
          │      │           └ '你在哪里'
          │      └ 'friend-1736580842'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1c60>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2160>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │ │              │           └ '你在哪里'
          │ │              └ 'friend-1736580842'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │      │           │       └ None
          │      │           └ '你在哪里'
          │      └ 'friend-1736580842'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2160>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b16c0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │ │              │           └ '你在哪里'
          │ │              └ 'friend-1736580842'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │      │           │       └ None
          │      │           └ '你在哪里'
          │      └ 'friend-1736580842'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b16c0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd37b2660>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd37b28e0>
          │ │              │           └ '你在哪里'
          │ │              └ 'friend-1736580842'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-43928' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-43928' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe8fe6050>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '你在哪里', 'chain': MessageChain([Plain(text='你在哪里')]), 'name': 'XYZ'}
                        │     └ (<conversation.ConversationContext object at 0x7fcbe8cfcf50>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '你在哪里'
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fcbe8f251c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbd3729250>
                      └ <conversation.ConversationContext object at 0x7fcbe8cfcf50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 35, in ask
    response.raise_for_status()
    │        └ <function Response.raise_for_status at 0x7fcc1ea43a60>
    └ <Response [500 Internal Server Error]>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_models.py", line 749, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
          │               │                │                 └ <Response [500 Internal Server Error]>
          │               │                └ <Request('POST', 'http://192.168.31.117:8000')>
          │               └ "Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'\nFor more information check: https://httpstatu...
          └ <class 'httpx.HTTPStatusError'>

httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-25 10:01:55.999 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
Server error '500 Internal Server Error' for url 'http://192.168.31.117:8000'
For more information check: https://httpstatuses.com/500
2023-07-25 10:02:25.073 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 10:02:25.080 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 10:02:25.081 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 10:04:44.135 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 10:04:44.136 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 10:04:44.137 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 10:04:44.181 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 10:04:45.007 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 10:04:45.008 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：Default response
2023-07-25 10:04:45.033 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 10:11:00.981 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：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
2023-07-25 10:11:00.982 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 10:11:00.983 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 10:11:00.984 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 10:11:30.986 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：我还在思考中，请再等一下~
2023-07-25 10:11:30.992 | DEBUG    | middlewares.timeout:on_respond:40 - [Timeout] 取消计时……
2023-07-25 10:11:30.993 | DEBUG    | middlewares.timeout:create_timeout_task:58 - [Timeout] 等待过久，发送提示
2023-07-25 10:14:16.338 | ERROR    | universal:handle_message:295 - Server disconnected without sending a response.
Traceback (most recent call last):

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
    yield
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
    resp = await self._pool.handle_async_request(req)
                 │    │     │                    └ <Request [b'POST']>
                 │    │     └ <function AsyncConnectionPool.handle_async_request at 0x7fcc1e6bdb20>
                 │    └ <httpcore.AsyncConnectionPool object at 0x7fcbe8d15610>
                 └ <httpx.AsyncHTTPTransport object at 0x7fcbe8d05cd0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
    raise exc
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
    response = await connection.handle_async_request(request)
                     │          │                    └ <Request [b'POST']>
                     │          └ <function AsyncHTTPConnection.handle_async_request at 0x7fcc1e6ab560>
                     └ <AsyncHTTPConnection ['http://192.168.31.117:8000', HTTP/1.1, CLOSED, Request Count: 1]>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/connection.py", line 96, in handle_async_request
    return await self._connection.handle_async_request(request)
                 │    │           │                    └ <Request [b'POST']>
                 │    │           └ <function AsyncHTTP11Connection.handle_async_request at 0x7fcc1e6abec0>
                 │    └ <AsyncHTTP11Connection ['http://192.168.31.117:8000', CLOSED, Request Count: 1]>
                 └ <AsyncHTTPConnection ['http://192.168.31.117:8000', HTTP/1.1, CLOSED, Request Count: 1]>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/http11.py", line 121, in handle_async_request
    raise exc
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/http11.py", line 99, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
              │    │                           └ {'request': <Request [b'POST']>}
              │    └ <function AsyncHTTP11Connection._receive_response_headers at 0x7fcc1e6bc180>
              └ <AsyncHTTP11Connection ['http://192.168.31.117:8000', CLOSED, Request Count: 1]>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/http11.py", line 164, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
                  │    │                      └ 360
                  │    └ <function AsyncHTTP11Connection._receive_event at 0x7fcc1e6bc2c0>
                  └ <AsyncHTTP11Connection ['http://192.168.31.117:8000', CLOSED, Request Count: 1]>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpcore/_async/http11.py", line 214, in _receive_event
    raise RemoteProtocolError(msg)
          │                   └ 'Server disconnected without sending a response.'
          └ <class 'httpcore.RemoteProtocolError'>

httpcore.RemoteProtocolError: Server disconnected without sending a response.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/bot.py", line 54, in <module>
    loop.run_until_complete(asyncio.gather(*bots))
    │    │                  │       │       └ [<Task pending name='Task-2' coro=<start_task() running at /home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py:356...
    │    │                  │       └ <function gather at 0x7fcc1febcd60>
    │    │                  └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc1fecdbc0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc1fecdb20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc1fecf920>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc2058c680>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/platforms/onebot_bot.py", line 151, in _
    await handle_message(
          └ <function handle_message at 0x7fcbe8c7f7e0>

> File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 269, in handle_message
    await action(session_id, message.strip(), conversation_context, respond)
          │      │           │       │        │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │      │           │       │        └ <conversation.ConversationContext object at 0x7fcbe97caf90>
          │      │           │       └ <method 'strip' of 'str' objects>
          │      │           └ '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'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2020>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1d00>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │ │              │           └ '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'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareConcurrentLock.handle_request at 0x7fcbe8ca9c60>
          └ <middlewares.concurrentlock.MiddlewareConcurrentLock object at 0x7fcbe8c9db50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/concurrentlock.py", line 43, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │      │           │       └ None
          │      │           └ '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'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1d00>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2de0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │ │              │           └ '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'
          │ │              └ 'friend-1109147357'
          │ └ <function Middleware.handle_request at 0x7fcbe8ca8ea0>
          └ <middlewares.baiducloud.MiddlewareBaiduCloud object at 0x7fcbe8c9ded0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/middleware.py", line 9, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │      │           │       └ None
          │      │           └ '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'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b2de0>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1f80>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │ │              │           └ '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'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareRatelimit.handle_request at 0x7fcbe8ca9120>
          └ <middlewares.ratelimit.MiddlewareRatelimit object at 0x7fcbe8c9db10>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/ratelimit.py", line 23, in handle_request
    await action(session_id, prompt, conversation_context, respond)
          │      │           │       │                     └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │      │           │       └ None
          │      │           └ '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'
          │      └ 'friend-1109147357'
          └ <function handle_message.<locals>.wrap_request.<locals>.call at 0x7fcbd37b1f80>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 53, in call
    await m.handle_request(session_id, message, respond, conversation_context, n)
          │ │              │           │        │        │                     └ <function handle_message.<locals>.request at 0x7fcbd37737e0>
          │ │              │           │        │        └ None
          │ │              │           │        └ <function handle_message.<locals>.respond at 0x7fcbd3773560>
          │ │              │           └ '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'
          │ │              └ 'friend-1109147357'
          │ └ <function MiddlewareTimeout.handle_request at 0x7fcbe8ca9da0>
          └ <middlewares.timeout.MiddlewareTimeout object at 0x7fcbe8c9de50>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/middlewares/timeout.py", line 27, in handle_request
    await asyncio.wait_for(coro_task, config.response.max_timeout)
          │       │        │          │      │        └ 600.0
          │       │        │          │      └ Response(mode='text', buffer_delay=15.0, default_ai='chatglm-api', error_format='出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回...
          │       │        │          └ Config(onebot=Onebot(manager_qq=1109147357, reverse_ws_host='0.0.0.0', reverse_ws_port=8566), mirai=None, telegram=None, disc...
          │       │        └ <Task finished name='Task-44064' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...
          │       └ <function wait_for at 0x7fcc1febc7c0>
          └ <module 'asyncio' from '/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/__init__.py'>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/asyncio/tasks.py", line 479, in wait_for
    return fut.result()
           │   └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-44064' coro=<handle_message.<locals>.request() done, defined at /home/kira/codes/ChatAki_QQBot/chat...

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/universal.py", line 222, in request
    async for rendered in task:
                          └ <async_generator object retry.<locals>.decorator.<locals>.wrapper at 0x7fcbe8fe6e90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/utils/retry.py", line 21, in wrapper
    async for result in func(*args, **kwargs):
                        │     │       └ {'prompt': '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', 'chain': MessageChain([Plain(text='sk-Dlf9Gv8rzGWweua1hvxMT...
                        │     └ (<conversation.ConversationContext object at 0x7fcbe97caf90>,)
                        └ <function ConversationContext.ask at 0x7fcbe8ca8720>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/conversation.py", line 195, in ask
    async for item in self.adapter.ask(prompt):
                      │    │       │   └ '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'
                      │    │       └ <function ChatGLM6BAdapter.ask at 0x7fcbe8f251c0>
                      │    └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbe8cdeb50>
                      └ <conversation.ConversationContext object at 0x7fcbe97caf90>

  File "/home/kira/codes/ChatAki_QQBot/chatgpt/adapter/thudm/chatglm_6b.py", line 29, in ask
    response = await self.client.post(
                     │    │      └ <function AsyncClient.post at 0x7fcc1e6e5f80>
                     │    └ <httpx.AsyncClient object at 0x7fcbe8cfe810>
                     └ <adapter.thudm.chatglm_6b.ChatGLM6BAdapter object at 0x7fcbe8cdeb50>

  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1848, in post
    return await self.request(
                 │    └ <function AsyncClient.request at 0x7fcc1e6e5940>
                 └ <httpx.AsyncClient object at 0x7fcbe8cfe810>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 │    │    │             │                      └ <httpx._client.UseClientDefault object at 0x7fcc1e6d6410>
                 │    │    │             └ <httpx._client.UseClientDefault object at 0x7fcc1e6d6410>
                 │    │    └ <Request('POST', 'http://192.168.31.117:8000')>
                 │    └ <function AsyncClient.send at 0x7fcc1e6e5b20>
                 └ <httpx.AsyncClient object at 0x7fcbe8cfe810>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
                     │    └ <function AsyncClient._send_handling_auth at 0x7fcc1e6e5bc0>
                     └ <httpx.AsyncClient object at 0x7fcbe8cfe810>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
                     │    └ <function AsyncClient._send_handling_redirects at 0x7fcc1e6e5c60>
                     └ <httpx.AsyncClient object at 0x7fcbe8cfe810>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
                     │    │                    └ <Request('POST', 'http://192.168.31.117:8000')>
                     │    └ <function AsyncClient._send_single_request at 0x7fcc1e6e5d00>
                     └ <httpx.AsyncClient object at 0x7fcbe8cfe810>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
                     │         │                    └ <Request('POST', 'http://192.168.31.117:8000')>
                     │         └ <function AsyncHTTPTransport.handle_async_request at 0x7fcc1e6daca0>
                     └ <httpx.AsyncHTTPTransport object at 0x7fcbe8d05cd0>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_transports/default.py", line 352, in handle_async_request
    with map_httpcore_exceptions():
         └ <function map_httpcore_exceptions at 0x7fcc1ea54c20>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
    │    │   │     │    │      └ <traceback object at 0x7fcbd3719800>
    │    │   │     │    └ RemoteProtocolError('Server disconnected without sending a response.')
    │    │   │     └ <class 'httpcore.RemoteProtocolError'>
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object map_httpcore_exceptions at 0x7fcbd37ac340>
    └ <contextlib._GeneratorContextManager object at 0x7fcbe8d14a90>
  File "/home/kira/anaconda3/envs/chataki/lib/python3.11/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
          │          └ 'Server disconnected without sending a response.'
          └ <class 'httpx.RemoteProtocolError'>

httpx.RemoteProtocolError: Server disconnected without sending a response.
2023-07-25 10:14:16.398 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：出现故障！如果这个问题持续出现，请和我说“重置会话” 来开启一段新的会话，或者发送 “回滚会话” 来回溯到上一条对话，你上一条说的我就当作没看见。
Server disconnected without sending a response.
2023-07-25 10:16:29.817 | DEBUG    | platforms.onebot_bot:_:148 - 私聊消息：1
2023-07-25 10:16:29.818 | DEBUG    | middlewares.concurrentlock:handle_request:40 - [Concurrent] 排队中，前面还有 0 个人！
2023-07-25 10:16:29.819 | DEBUG    | middlewares.concurrentlock:handle_request:42 - [Concurrent] 排到了！
2023-07-25 10:16:29.820 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
2023-07-25 10:16:33.996 | DEBUG    | middlewares.timeout:handle_respond:46 - [Timeout] 取消计时……
2023-07-25 10:16:33.996 | DEBUG    | platforms.onebot_bot:respond:112 - [OneBot] 尝试发送消息：嘿~你好呀~我是莉莉，一个可爱的17岁少女，很高兴能和你聊天喔！有什么我可以帮你的吗？😊
2023-07-25 10:16:34.034 | DEBUG    | middlewares.timeout:create_timeout_task:55 - [Timeout] 开始计时……
